<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kang&#39;s Blog</title>
  
  <subtitle>爱分享，乐学习</subtitle>
  <link href="https://kangblogs.top/atom.xml" rel="self"/>
  
  <link href="https://kangblogs.top/"/>
  <updated>2022-09-26T14:43:48.915Z</updated>
  <id>https://kangblogs.top/</id>
  
  <author>
    <name>Kang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>解决腾讯滑块验证码</title>
    <link href="https://kangblogs.top/posts/be3f37ea.html"/>
    <id>https://kangblogs.top/posts/be3f37ea.html</id>
    <published>2022-09-26T14:31:32.000Z</published>
    <updated>2022-09-26T14:43:48.915Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>最近在研究反反爬，拿腾讯滑块验证下手</p></blockquote><p>以下是官方给的 Demo：</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Web 前端接入示例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 验证码程序依赖(必须)。请勿修改以下程序依赖，如使用本地缓存，或通过其他手段规避加载，会导致验证码无法正常更新，对抗能力无法保证，甚至引起误拦截。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ssl.captcha.qq.com/TCaptcha.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"CaptchaId"</span> <span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>验证<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定义回调函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">res</span>) {</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 第一个参数传入回调结果，结果如下：</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ret         Int       验证结果，0：验证成功。2：用户主动关闭验证码。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// ticket      String    验证成功的票据，当且仅当 ret = 0 时 ticket 有值。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// CaptchaAppId       String    验证码应用ID。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// bizState    Any       自定义透传参数。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// randstr     String    本次验证的随机串，后续票据校验时需传递该参数。</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">'callback:'</span>, res);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// res（用户主动关闭验证码）= {ret: 2, ticket: null}</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// res（验证成功） = {ret: 0, ticket: "String", randstr: "String"}</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// res（请求验证码发生错误，验证码自动返回terror_前缀的容灾票据） = {ret: 0, ticket: "String", randstr: "String",  errorCode: Number, errorMessage: "String"}</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 此处代码仅为验证结果的展示示例，真实业务接入，建议基于ticket和errorCode情况做不同的业务处理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// if (res.ret === 0) {</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     // 复制结果至剪切板</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     var str = '【randstr】-&gt;【' + res.randstr + '】      【ticket】-&gt;【' + res.ticket + '】';</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     var ipt = document.createElement('input');</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     ipt.value = str;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     document.body.appendChild(ipt);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     ipt.select();</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     document.execCommand("Copy");</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     document.body.removeChild(ipt);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// }</span></span></span><br><span class="line"><span class="language-javascript">    }</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定义验证码js加载错误处理函数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">loadErrorCallback</span>(<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> appid = <span class="string">''</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 生成容灾票据或自行做其它处理</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> ticket = <span class="string">'terror_1001_'</span> + appid + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() / <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">callback</span>({</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ret</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">randstr</span>: <span class="string">'@'</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>(<span class="number">36</span>).<span class="title function_">substr</span>(<span class="number">2</span>),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">ticket</span>: ticket,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">errorCode</span>: <span class="number">1001</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">errorMessage</span>: <span class="string">'jsload_error'</span></span></span><br><span class="line"><span class="language-javascript">        });</span></span><br><span class="line"><span class="language-javascript">    }</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 定义验证码触发事件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">'CaptchaId'</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) {</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">try</span> {</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 生成一个验证码对象</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// CaptchaAppId：登录验证码控制台，从【验证管理】页面进行查看。如果未创建过验证，请先新建验证。注意：不可使用客户端类型为小程序的CaptchaAppId，会导致数据统计错误。</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//callback：定义的回调函数</span></span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> captcha = <span class="keyword">new</span> <span class="title class_">TencentCaptcha</span>(<span class="string">'123'</span>, callback, {});</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 调用方法，显示验证码</span></span></span><br><span class="line"><span class="language-javascript">                captcha.<span class="title function_">show</span>();</span></span><br><span class="line"><span class="language-javascript">            } <span class="keyword">catch</span> (error) {</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// 加载异常，调用验证码js加载错误处理函数</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">loadErrorCallback</span>();</span></span><br><span class="line"><span class="language-javascript">            }</span></span><br><span class="line"><span class="language-javascript">        }</span></span><br><span class="line"><span class="language-javascript">    }</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>官方做了不少限制：机器滑动识别、吻合度、成功拖动时间、IP 限制……</p></blockquote><p>直接上代码：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   @Author: Kang</span></span><br><span class="line"><span class="string">   @Version 1.0 </span></span><br><span class="line"><span class="string">   @File: Demo.py</span></span><br><span class="line"><span class="string">   @CreateTime: 2022/9/26 14:10</span></span><br><span class="line"><span class="string">   @Software: PyCharm</span></span><br><span class="line"><span class="string">   @Description: TODO：破解腾讯滑块验证</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.wait <span class="keyword">import</span> WebDriverWait</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TCaptcha</span>:</span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    识别腾讯验证码</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, url</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        初始化浏览器配置</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param url: 要登录的网站地址</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># profile = webdriver.FirefoxOptions()  # Firefox 配置无头</span></span><br><span class="line">        <span class="comment"># profile.add_argument('-headless')</span></span><br><span class="line">        <span class="comment"># 初始化 WebDriver</span></span><br><span class="line">        self.browser = webdriver.Edge()</span><br><span class="line">        <span class="comment"># WebDriver 实例延时</span></span><br><span class="line">        self.wait = WebDriverWait(self.browser, <span class="number">20</span>)</span><br><span class="line">        <span class="comment"># 实例化 url</span></span><br><span class="line">        self.url = url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">tx_code</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        主要部分，函数入口</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 等待 iframe</span></span><br><span class="line">        WebDriverWait(self.browser, <span class="number">20</span>, <span class="number">0.5</span>).until(</span><br><span class="line">            expected_conditions.presence_of_element_located((By.ID, <span class="string">'tcaptcha_iframe'</span>)))</span><br><span class="line">        <span class="comment"># 加载 iframe</span></span><br><span class="line">        self.browser.switch_to.frame(</span><br><span class="line">            self.browser.find_element(By.ID, <span class="string">'tcaptcha_iframe'</span>))</span><br><span class="line">        <span class="comment"># 等待 0.5 秒加载完成</span></span><br><span class="line">        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">        <span class="comment"># 获取图片链接</span></span><br><span class="line">        bk_block = self.browser.find_element(By.ID, <span class="string">'slideBg'</span>).get_attribute(<span class="string">'src'</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'正在保存图像……'</span>)</span><br><span class="line">        <span class="comment"># 保存图片，判断是否写入成功</span></span><br><span class="line">        <span class="keyword">if</span> self.save_img(bk_block):</span><br><span class="line">            <span class="comment"># 获取缺口位置信息</span></span><br><span class="line">            dex = self.get_pos()</span><br><span class="line">            <span class="keyword">if</span> dex:</span><br><span class="line">                <span class="comment"># 获取轨迹列表</span></span><br><span class="line">                track_list = self.get_track(dex)</span><br><span class="line">                time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                <span class="comment"># 获取滑块控制选择器</span></span><br><span class="line">                slid_ing = self.browser.find_element(By.ID, <span class="string">'tcaptcha_drag_thumb'</span>)</span><br><span class="line">                <span class="comment"># 点按滑块控制器</span></span><br><span class="line">                ActionChains(self.browser).click_and_hold(on_element=slid_ing).perform()</span><br><span class="line">                time.sleep(<span class="number">0.2</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">'轨迹'</span>, track_list)</span><br><span class="line">                <span class="comment"># 遍历轨迹列表</span></span><br><span class="line">                <span class="keyword">for</span> track <span class="keyword">in</span> track_list:</span><br><span class="line">                    <span class="comment"># 移动滑块控制选择器</span></span><br><span class="line">                    ActionChains(self.browser).move_by_offset(</span><br><span class="line">                        xoffset=track, yoffset=<span class="number">0</span>).perform()</span><br><span class="line">                time.sleep(<span class="number">1</span>)</span><br><span class="line">                <span class="comment"># 释放滑块控制器</span></span><br><span class="line">                ActionChains(self.browser).release(</span><br><span class="line">                    on_element=slid_ing).perform()</span><br><span class="line">                time.sleep(<span class="number">1</span>)</span><br><span class="line">                <span class="comment"># 识别图片</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.start()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'缺口图片捕获失败'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_img</span>(<span class="params">bk_block</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        保存图片</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param bk_block: 图片url</span></span><br><span class="line"><span class="string">        :return: bool类型，是否被保存</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 请求图片 url 内容</span></span><br><span class="line">            img = requests.get(bk_block).content</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">'bg.jpeg'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(img)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'保存成功!'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'保存失败!'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_pos</span>():</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        识别缺口，网页上显示的图片为缩放图片，缩放 50% 所以识别坐标需要 0.5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :return: 缺口位置</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># 读取图片</span></span><br><span class="line">        image = cv2.imread(<span class="string">'bg.jpeg'</span>)</span><br><span class="line">        <span class="comment"># 高斯滤波，(5, 5)表示高斯矩阵的长与宽都是5，标准差取0</span></span><br><span class="line">        blurred = cv2.GaussianBlur(image, (<span class="number">5</span>, <span class="number">5</span>), <span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 边缘检测</span></span><br><span class="line">        canny = cv2.Canny(blurred, <span class="number">200</span>, <span class="number">400</span>)</span><br><span class="line">        <span class="comment"># 轮廓检测</span></span><br><span class="line">        contours, hierarchy = cv2.findContours(</span><br><span class="line">            canny, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)</span><br><span class="line">        <span class="comment"># 遍历轮廓</span></span><br><span class="line">        <span class="keyword">for</span> i, contour <span class="keyword">in</span> <span class="built_in">enumerate</span>(contours):</span><br><span class="line">            m = cv2.moments(contour)</span><br><span class="line">            <span class="keyword">if</span> m[<span class="string">'m00'</span>] == <span class="number">0</span>:</span><br><span class="line">                cx = cy = <span class="number">0</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cx, cy = m[<span class="string">'m10'</span>] / m[<span class="string">'m00'</span>], m[<span class="string">'m01'</span>] / m[<span class="string">'m00'</span>]</span><br><span class="line">            <span class="comment"># 判断轮廓的面积和周长范围</span></span><br><span class="line">            <span class="keyword">if</span> <span class="number">6000</span> &lt; cv2.contourArea(contour) &lt; <span class="number">8000</span> <span class="keyword">and</span> <span class="number">370</span> &lt; cv2.arcLength(contour, <span class="literal">True</span>) &lt; <span class="number">390</span>:</span><br><span class="line">                <span class="comment"># 判断轮廓的宽</span></span><br><span class="line">                <span class="keyword">if</span> cx &lt; <span class="number">400</span>:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                x, y, w, h = cv2.boundingRect(contour)  <span class="comment"># 外接矩形返回四个值，分别是x，y，w，h；x，y是矩阵左上点的坐标，w，h是矩阵的宽和高</span></span><br><span class="line">                <span class="comment"># 绘制矩形框做标记，&lt;待处理图片, 左上坐标, 右下坐标, 颜色, 线性宽度[, 线性]&gt;</span></span><br><span class="line">                cv2.rectangle(image, (x, y), (x + w, y + h), (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">2</span>)</span><br><span class="line">                <span class="comment"># cv2.imshow('image', image)  # 显示识别结果</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">'缺口识别: {x}px'</span>.<span class="built_in">format</span>(x=x / <span class="number">2</span>))</span><br><span class="line">                <span class="keyword">return</span> x / <span class="number">2</span> + <span class="number">40</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_track</span>(<span class="params">distance</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        轨迹方程</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param distance: 距缺口的距离</span></span><br><span class="line"><span class="string">        :return: 位移列表</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        distance -= <span class="number">75</span>  <span class="comment"># 初始位置</span></span><br><span class="line">        <span class="comment"># 初速度</span></span><br><span class="line">        v = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 单位时间为0.3s来统计轨迹，轨迹即0.3内的位移</span></span><br><span class="line">        t = <span class="number">0.3</span></span><br><span class="line">        <span class="comment"># 位移/轨迹列表，列表内的一个元素代表0.2s的位移</span></span><br><span class="line">        tracks = []</span><br><span class="line">        <span class="comment"># 当前的位移</span></span><br><span class="line">        current = <span class="number">0</span></span><br><span class="line">        <span class="comment"># 到达mid值开始减速</span></span><br><span class="line">        mid = distance * <span class="number">4</span> / <span class="number">5</span></span><br><span class="line"></span><br><span class="line">        distance += <span class="number">10</span>  <span class="comment"># 先滑过一点，最后再反着滑动回来</span></span><br><span class="line">        <span class="comment"># a = random.randint(1,3)</span></span><br><span class="line">        <span class="keyword">while</span> current &lt; distance:</span><br><span class="line">            <span class="keyword">if</span> current &lt; mid:</span><br><span class="line">                <span class="comment"># 加速度越小，单位时间的位移越小,模拟的轨迹就越多越详细</span></span><br><span class="line">                <span class="comment"># a = random.randint(2, 4)  # 加速运动</span></span><br><span class="line">                a = <span class="number">3</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># a = -random.randint(3, 5)  # 减速运动</span></span><br><span class="line">                a = -<span class="number">2</span></span><br><span class="line">            <span class="comment"># 初速度</span></span><br><span class="line">            v0 = v</span><br><span class="line">            <span class="comment"># 0.3秒时间内的位移</span></span><br><span class="line">            s = v0 * t + <span class="number">0.5</span> * a * (t ** <span class="number">2</span>)</span><br><span class="line">            <span class="comment"># 当前的位置</span></span><br><span class="line">            current += s</span><br><span class="line">            <span class="comment"># 添加到轨迹列表</span></span><br><span class="line">            tracks.append(<span class="built_in">round</span>(s))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 速度已经达到v,该速度作为下次的初速度</span></span><br><span class="line">            v = v0 + a * t</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 反着滑动到大概准确位置</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">            tracks.append(-random.randint(<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">            tracks.append(-random.randint(<span class="number">1</span>, <span class="number">3</span>))</span><br><span class="line">        <span class="keyword">return</span> tracks</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_to</span>(<span class="params">self, index</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        移动滑块</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :param index:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        开始，执行打开网页操作</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :return: None</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># 打开网页</span></span><br><span class="line">        self.browser.get(url=self.url)</span><br><span class="line">        <span class="comment"># 点击显示验证码</span></span><br><span class="line">        showCaptcha = self.b.find_element(By.ID, <span class="string">'CaptchaId'</span>)</span><br><span class="line">        showCaptcha.click()</span><br><span class="line">        <span class="comment"># 处理验证</span></span><br><span class="line">        self.tx_code()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">end</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        结束后退出，可选</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.browser.quit()</span><br></pre></td></tr></tbody></table></figure><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   @Author: Kang</span></span><br><span class="line"><span class="string">   @Version 1.0 </span></span><br><span class="line"><span class="string">   @File: Test.py</span></span><br><span class="line"><span class="string">   @CreateTime: 2022/9/26 14:32</span></span><br><span class="line"><span class="string">   @Software: PyCharm</span></span><br><span class="line"><span class="string">   @Description: TODO：测试样例</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> Demo <span class="keyword">import</span> TCaptcha</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># url 链接</span></span><br><span class="line">    url = <span class="string">'file:///C:/Users/47771/Desktop/TCaptcha.html'</span></span><br><span class="line">    <span class="comment"># 实例化</span></span><br><span class="line">    tCaptcha = TCaptcha(url)</span><br><span class="line">    <span class="comment"># 开始</span></span><br><span class="line">    tCaptcha.start()</span><br></pre></td></tr></tbody></table></figure><p>下一步针对 IP 限制做出解决方案。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;最近在研究反反爬，拿腾讯滑块验证下手&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下是官方给的 Demo：&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter</summary>
      
    
    
    
    
    <category term="Python" scheme="https://kangblogs.top/tags/Python/"/>
    
    <category term="爬虫" scheme="https://kangblogs.top/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="验证码" scheme="https://kangblogs.top/tags/%E9%AA%8C%E8%AF%81%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Scrapy 提取数据</title>
    <link href="https://kangblogs.top/posts/6fdcda77.html"/>
    <id>https://kangblogs.top/posts/6fdcda77.html</id>
    <published>2022-09-17T06:44:45.000Z</published>
    <updated>2022-09-17T07:02:15.755Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>此节将会独立于刚新建的项目，学习 <code>Scrapy shell</code>，掌握获取数据的基本方法</p></blockquote><h1 id="何为数据"><a href="#何为数据" class="headerlink" title="何为数据"></a>何为数据</h1><p>在开发过程中，我们需要获取站点的信息，这些信息包括站点 url、响应状态码、header、body…… 在 <code>Scrapy</code> 中，Response 相当于一个数据字典，包含着站点的大部分信息，在请求后将 Response 作为参数传给了 parse 回调函数。</p><h1 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h1><h2 id="CSS-选择器"><a href="#CSS-选择器" class="headerlink" title="CSS 选择器"></a>CSS 选择器</h2><p><em>quotes-1.html</em>&nbsp;和 <em>quotes-2.html</em> 文件只是将站点页面保存了下来，实际开发并不会这样做，而是会在此基础上提取我们想要的数据。学习 <code>Scrapy</code> 最有效的方法其实是使用其提供的&nbsp;<a href="https://docs.scrapy.org/en/latest/topics/shell.html#topics-shell">Scrapy shell</a>。通过使用 <code>shell</code>，我们可以更好地理解 <code>Scrapy</code> 爬取数据的原理和机制，并且快速掌握提取数据的方法。还是使用 <a href="https://quotes.toscrape.com/">https://quotes.toscrape.com</a> 做演示。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy shell 'https://quotes.toscrape.com/page/1/'</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">2022-09-16 23:13:13 [scrapy.utils.log] INFO: Scrapy 2.6.2 started (bot: jd)</span><br><span class="line">2022-09-16 23:13:13 [scrapy.utils.log] INFO: Versions: lxml 4.9.1.0, libxml2 2.9.12, cssselect 1.1.0, parsel 1.6.0, w3lib 2.0.1, Twisted 22.8.0, Python 3.9.12 (tags/v3.9.12:b28265d, Mar 23 2022, 23:52:46) [MSC v.1929 64 bit (AMD64)], pyOpenSSL 22.0.0 (OpenSSL 3.0.5 5 Jul 2022), cryptography 38.0.1, Platform Windows-10-10.0.25201-SP0</span><br><span class="line">2022-09-16 23:13:13 [scrapy.crawler] INFO: Overridden settings:</span><br><span class="line">{'BOT_NAME': 'jd',</span><br><span class="line"> 'DUPEFILTER_CLASS': 'scrapy.dupefilters.BaseDupeFilter',</span><br><span class="line"> 'LOGSTATS_INTERVAL': 0,</span><br><span class="line"> 'NEWSPIDER_MODULE': 'jd.spiders',</span><br><span class="line"> 'ROBOTSTXT_OBEY': True,</span><br><span class="line"> 'SPIDER_MODULES': ['jd.spiders']}</span><br><span class="line">2022-09-16 23:13:13 [scrapy.utils.log] DEBUG: Using reactor: twisted.internet.selectreactor.SelectReactor</span><br><span class="line">2022-09-16 23:13:13 [scrapy.extensions.telnet] INFO: Telnet Password: 5740caa42eea4fff</span><br><span class="line">2022-09-16 23:13:13 [scrapy.middleware] INFO: Enabled extensions:</span><br><span class="line">['scrapy.extensions.corestats.CoreStats',</span><br><span class="line"> 'scrapy.extensions.telnet.TelnetConsole']</span><br><span class="line">2022-09-16 23:13:13 [scrapy.middleware] INFO: Enabled downloader middlewares:</span><br><span class="line">['scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.retry.RetryMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.stats.DownloaderStats']</span><br><span class="line">2022-09-16 23:13:13 [scrapy.middleware] INFO: Enabled spider middlewares:</span><br><span class="line">['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.referer.RefererMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.depth.DepthMiddleware']</span><br><span class="line">2022-09-16 23:13:13 [scrapy.middleware] INFO: Enabled item pipelines:</span><br><span class="line">[]</span><br><span class="line">2022-09-16 23:13:13 [scrapy.extensions.telnet] INFO: Telnet console listening on 127.0.0.1:6023</span><br><span class="line">2022-09-16 23:13:13 [scrapy.core.engine] INFO: Spider opened</span><br><span class="line">2022-09-16 23:13:15 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET https://quotes.toscrape.com/robots.txt&gt; (referer: None)</span><br><span class="line">2022-09-16 23:13:15 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">[s] Available Scrapy objects:</span><br><span class="line">[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)</span><br><span class="line">[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x000001BEF5750490&gt;</span><br><span class="line">[s]   item       {}</span><br><span class="line">[s]   request    &lt;GET https://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   response   &lt;200 https://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   settings   &lt;scrapy.settings.Settings object at 0x000001BEF5750760&gt;</span><br><span class="line">[s]   spider     &lt;DefaultSpider 'default' at 0x1bef5b711c0&gt;</span><br><span class="line">[s] Useful shortcuts:</span><br><span class="line">[s]   fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redirects are followed)</span><br><span class="line">[s]   fetch(req)                  Fetch a scrapy.Request and update local objects</span><br><span class="line">[s]   shelp()           Shell help (print this help)</span><br><span class="line">[s]   view(response)    View response in a browser </span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></tbody></table></figure><p>通过此命令其实已经完成了爬取的过程。并启动了 <code>shell</code> 模式，光标闪烁接收我们的输出，我们在 response 中获取到想要的数据，比如：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title'</span>)</span></span><br><span class="line">[&lt;Selector xpath='descendant-or-self::title' data='&lt;title&gt;Quotes to Scrape&lt;/title&gt;'&gt;]</span><br></pre></td></tr></tbody></table></figure><p>获取名为 <code>title</code> 元素的信息，并返回一个选择器列表，这些选择器含有 <code>xpath</code> 和 <code>data</code> 参数，允许进一步操作。可以获取其文本数据，<code>getall()</code> 会遍历选择器列表返回一个内容列表：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title::text'</span>).getall()</span></span><br><span class="line">['Quotes to Scrape']</span><br></pre></td></tr></tbody></table></figure><p>这里需要注意<code>::text</code> 和 <code>getall()</code>。</p><ul><li><p>::text</p><p>在 CSS 选择器中添加此查询条件，这就意味着我们想要获取 <code>title</code> 标签的文本元素，如果不添加此查询条件，将会返回整个标签元素。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title'</span>).getall()</span></span><br><span class="line">['&lt;title&gt;Quotes to Scrape&lt;/title&gt;']</span><br></pre></td></tr></tbody></table></figure></li><li><p>getall()</p><p>顾名思义，这个函数会遍历选择器列表并返回一个列表结果。如果只想要第一个结果，可以使用 <code>get()</code> 函数：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title::text'</span>).get()</span></span><br><span class="line">'Quotes to Scrape'</span><br></pre></td></tr></tbody></table></figure><p>除了 <code>getall()</code> 和 <code>get()</code> 函数，还可以利用<a href="https://docs.python.org/3/library/re.html">正则匹配</a>获取数据。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'Quotes.*'</span>)</span></span><br><span class="line">['Quotes to Scrape']</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'Q\w+'</span>)</span> </span><br><span class="line">['Quotes']</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'(\w+) to (\w+)'</span>)</span> </span><br><span class="line">['Quotes', 'Scrape']</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="XPath-选择器"><a href="#XPath-选择器" class="headerlink" title="XPath 选择器"></a>XPath 选择器</h2><p><code>Scrapy</code> 还支持了 <a href="https://www.w3.org/TR/xpath/all/">XPath</a> 选择器来获取数据。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.xpath(<span class="string">'//title'</span>)</span></span><br><span class="line">[&lt;Selector xpath='//title' data='&lt;title&gt;Quotes to Scrape&lt;/title&gt;'&gt;]</span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; response.xpath(<span class="string">'//title/text()'</span>).get()</span></span><br><span class="line">'Quotes to Scrape'</span><br></pre></td></tr></tbody></table></figure><p>XPath 表达式十分强大，奠定了 Scrapy 选择器的基础。事实上，CSS 选择器在执行时 <code>Scrapy</code> 会将其转换为 XPath 选择器。仔细看 CSS 选择器的返回值你就会发现这一点。</p><p>虽然 XPath 表达式可能没有 CSS 选择器那么流行，但它提供了更强大的功能，因为除了导航结构之外，它还可以查看内容。使用 XPath，可以选择以下内容：选择包含文本 “下一页” 的链接。这使得 XPath 非常适合于抓取任务，即使我们已经知道如何构造 CSS 选择器，XPath 也将使抓取更容易。</p><h1 id="大展身手"><a href="#大展身手" class="headerlink" title="大展身手"></a>大展身手</h1><p>介绍了两个利器，让我们回到爬虫。直到现在，shell 环境下并没有提取指定的数据，仅仅只是在保存的页面文件中获取数据。可以将这些逻辑代码集成到新建的爬虫文件中。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QuotesSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">"quotes"</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'https://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">        <span class="string">'https://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">            <span class="keyword">yield</span> {</span><br><span class="line">                <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).get(),</span><br><span class="line">                <span class="string">'author'</span>: quote.css(<span class="string">'small.author::text'</span>).get(),</span><br><span class="line">                <span class="string">'tags'</span>: quote.css(<span class="string">'div.tags a.tag::text'</span>).getall(),</span><br><span class="line">            }</span><br></pre></td></tr></tbody></table></figure><p>是不是很熟悉，这就是第一节中的代码逻辑，不再赘述。</p><h1 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h1><p>在实际开发过程中，往往需要在爬虫中跳转页面。当然将网站链接写到 <code>start_urls</code> 列表中固然可以，但是对于大量的页面跳转，将每个链接都写入其中就会变得很麻烦，缺乏执行性。<code>Scrapy</code> 中的 response 提供了 <code>urljoin()</code> 和 <code>follow()</code> 方法来应对这种问题。</p><ul><li><p>urljoin()</p><p>在 parse 中拼接 url，并再次发出递归请求：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">next_page = response.css(<span class="string">'li.next a::attr(href)'</span>).get()</span><br><span class="line"><span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    next_page = response.urljoin(next_page)</span><br><span class="line">    <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parse)</span><br></pre></td></tr></tbody></table></figure></li><li><p>follow()</p><p>follow 是上面写法的简写形式，会完成 url 拼接和请求两个工作：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">next_page = response.css(<span class="string">'li.next a::attr(href)'</span>).get()</span><br><span class="line"><span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">yield</span> response.follow(next_page, callback=self.parse)</span><br></pre></td></tr></tbody></table></figure></li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>熟悉了 Scrapy 的两种选择器：<code>CSS选择器</code>和 <code>XPath选择器</code>，学习了获取数据的方法。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;此节将会独立于刚新建的项目，学习 &lt;code&gt;Scrapy shell&lt;/code&gt;，掌握获取数据的基本方法&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;何为数据&quot;&gt;&lt;a href=&quot;#何为数据&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
    <category term="爬虫" scheme="https://kangblogs.top/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="Scrapy" scheme="https://kangblogs.top/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>第一个爬虫</title>
    <link href="https://kangblogs.top/posts/aff7ebd1.html"/>
    <id>https://kangblogs.top/posts/aff7ebd1.html</id>
    <published>2022-09-16T15:32:12.000Z</published>
    <updated>2022-09-17T02:07:30.388Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在上一节中，我们了解了 <code>Scrapy</code> 是一个爬虫框架，并书写了一个 demo 大致认识了爬取执行过程。但是，在实际开发过程中，不可能是在此 demo 基础上在写逻辑代码的，<code>Scrapy</code> 的强大之处，它为我们开发人员提供一个应用框架，让开发者专心于处理数据。</p></blockquote><h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><p><code>Scrapy</code> 创建项目和 <code>Django</code> 和创建项目命令是一致的。在一个心仪的目录下执行命令创建项目。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject jd</span><br></pre></td></tr></tbody></table></figure><p>这样，就会创建一个名为 <code>jd</code> 的目录，并自动生成一些文件：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">jd/</span><br><span class="line">    scrapy.cfg            # 配置文件。注意：此文件中不要出现中文字符。</span><br><span class="line"></span><br><span class="line">    jd/                   # 工程目录</span><br><span class="line">        __init__.py</span><br><span class="line"></span><br><span class="line">        items.py          # 目标文件，定义结构化数据字段，用来保存爬取到的数据。</span><br><span class="line"></span><br><span class="line">        middlewares.py    # 中间件。</span><br><span class="line"></span><br><span class="line">        pipelines.py      # 管道文件</span><br><span class="line"></span><br><span class="line">        settings.py       # 设置文件</span><br><span class="line"></span><br><span class="line">        spiders/          # 此文件夹存放爬虫文件</span><br><span class="line">            __init__.py</span><br></pre></td></tr></tbody></table></figure><h1 id="第一个爬虫"><a href="#第一个爬虫" class="headerlink" title="第一个爬虫"></a>第一个爬虫</h1><p>已经做足了准备工作，现在可以大展身手了，开始书写我们的第一个爬虫。在第一节中我们可以看出来，其实爬虫在 <code>Scrapy</code> 中就是一个类，<code>Scrapy</code> 可以调用这个类来爬取数据。书写一个爬虫下载网页（还是使用官方提供的演示网站）的数据，将代码保存在 <code>jd/spiders</code> 的 <code>quotes_spider.py</code>（文件名随意）文件中。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入 scrapy 模块</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个爬虫</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QuotesSpider</span>(scrapy.Spider):</span><br><span class="line">    <span class="comment"># 爬虫的名称</span></span><br><span class="line">    name = <span class="string">"quotes"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 请求信息</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># 站点链接</span></span><br><span class="line">        urls = [</span><br><span class="line">            <span class="string">'https://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">            <span class="string">'https://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">        ]</span><br><span class="line">        <span class="comment"># 遍历站点链接并请求，回调 parse 函数</span></span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">            <span class="comment"># 返回生成器</span></span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># parse 函数，提取并处理响应数据</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        page = response.url.split(<span class="string">"/"</span>)[-<span class="number">2</span>]</span><br><span class="line">        filename = <span class="string">f'quotes-<span class="subst">{page}</span>.html'</span></span><br><span class="line">        <span class="comment"># 下载站点界面</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br><span class="line">        <span class="comment"># 记录日志</span></span><br><span class="line">        self.log(<span class="string">f'Saved file <span class="subst">{filename}</span>'</span>)</span><br></pre></td></tr></tbody></table></figure><p>其中的参数和函数需要着重强调一下：</p><ul><li><p><code>name</code>：爬虫的名称。在一个项目中它具有唯一性，不能定义相同的 <code>name</code> 在一个项目中或者不同的爬虫。</p></li><li><p><code>start_requests()</code>：在 <code>Scrapy</code> 框架中此函数必须返回可迭代的请求对象，这个请求对象可以是一系列的请求或者是一个生成器函数。这是爬虫的入口。你可能会发现这与第一小节的写法不一致，此例子是完整写法，上一小节是简写（可以理解为语法糖）。</p></li><li><p><code>parse()</code>：此函数用来处理请求的响应数据。</p></li></ul><h1 id="如何执行爬虫"><a href="#如何执行爬虫" class="headerlink" title="如何执行爬虫"></a>如何执行爬虫</h1><p>已经写好了一个叫做 <code>quotes</code> 的爬虫，那如何让它为我们干活呢？其实很简单，只需在项目更目录下执行命令：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes</span><br></pre></td></tr></tbody></table></figure><p>此命令会执行我们命名为 <code>quotes</code> 的爬虫，会给演示站点 <a href="https://quotes.toscrape.com/">https://quotes.toscrape.com</a> 发送请求，控制台会输出：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">2022-09-16 21:33:19 [scrapy.utils.log] INFO: Scrapy 2.6.2 started (bot: jd)</span><br><span class="line">2022-09-16 21:33:19 [scrapy.utils.log] INFO: Versions: lxml 4.9.1.0, libxml2 2.9.12, cssselect 1.1.0, parsel 1.6.0, w3lib 2.0.1, Twisted 22.8.0, Python 3.9.12 (tags/v3.9.12:b28265d, Mar 23 2022, 23:52:46) [MSC v.1929 64 bit (AMD64)], pyOpenSSL 22.0.0 (OpenSSL 3.0.5 5 Jul 2022), cryptography 38.0.1, Platform Windows-10-10.0.25201-SP0</span><br><span class="line">2022-09-16 21:33:19 [scrapy.crawler] INFO: Overridden settings:</span><br><span class="line">{'BOT_NAME': 'jd',</span><br><span class="line"> 'NEWSPIDER_MODULE': 'jd.spiders',</span><br><span class="line"> 'ROBOTSTXT_OBEY': True,</span><br><span class="line"> 'SPIDER_MODULES': ['jd.spiders']}</span><br><span class="line">2022-09-16 21:33:19 [scrapy.utils.log] DEBUG: Using reactor: twisted.internet.selectreactor.SelectReactor</span><br><span class="line">2022-09-16 21:33:19 [scrapy.extensions.telnet] INFO: Telnet Password: 8128002efcc685b1</span><br><span class="line">2022-09-16 21:33:19 [scrapy.middleware] INFO: Enabled extensions:</span><br><span class="line">['scrapy.extensions.corestats.CoreStats',</span><br><span class="line"> 'scrapy.extensions.telnet.TelnetConsole',</span><br><span class="line"> 'scrapy.extensions.logstats.LogStats']</span><br><span class="line">2022-09-16 21:33:20 [scrapy.middleware] INFO: Enabled downloader middlewares:</span><br><span class="line">['scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.retry.RetryMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.stats.DownloaderStats']</span><br><span class="line">2022-09-16 21:33:20 [scrapy.middleware] INFO: Enabled spider middlewares:</span><br><span class="line">['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.referer.RefererMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.depth.DepthMiddleware']</span><br><span class="line">2022-09-16 21:33:20 [scrapy.middleware] INFO: Enabled item pipelines:</span><br><span class="line">[]</span><br><span class="line">2022-09-16 21:33:20 [scrapy.core.engine] INFO: Spider opened</span><br><span class="line">2022-09-16 21:33:20 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)</span><br><span class="line">2022-09-16 21:33:20 [scrapy.extensions.telnet] INFO: Telnet console listening on 127.0.0.1:6023</span><br><span class="line">2022-09-16 21:33:21 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET https://quotes.toscrape.com/robots.txt&gt; (referer: None)</span><br><span class="line">2022-09-16 21:33:21 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">2022-09-16 21:33:22 [quotes] DEBUG: Saved file quotes-1.html</span><br><span class="line">2022-09-16 21:33:23 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://quotes.toscrape.com/page/2/&gt; (referer: None)</span><br><span class="line">2022-09-16 21:33:23 [quotes] DEBUG: Saved file quotes-2.html</span><br><span class="line">2022-09-16 21:33:23 [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line">2022-09-16 21:33:23 [scrapy.statscollectors] INFO: Dumping Scrapy stats:</span><br><span class="line">{'downloader/request_bytes': 681,</span><br><span class="line"> 'downloader/request_count': 3,</span><br><span class="line"> 'downloader/request_method_count/GET': 3,</span><br><span class="line"> 'downloader/response_bytes': 25579,</span><br><span class="line"> 'downloader/response_count': 3,</span><br><span class="line"> 'downloader/response_status_count/200': 2,</span><br><span class="line"> 'downloader/response_status_count/404': 1,</span><br><span class="line"> 'elapsed_time_seconds': 2.686792,</span><br><span class="line"> 'finish_reason': 'finished',</span><br><span class="line"> 'finish_time': datetime.datetime(2022, 9, 16, 13, 33, 23, 160603),</span><br><span class="line"> 'log_count/DEBUG': 6,</span><br><span class="line"> 'log_count/INFO': 10,</span><br><span class="line"> 'response_received_count': 3,</span><br><span class="line"> 'robotstxt/request_count': 1,</span><br><span class="line"> 'robotstxt/response_count': 1,</span><br><span class="line"> 'robotstxt/response_status_count/404': 1,</span><br><span class="line"> 'scheduler/dequeued': 2,</span><br><span class="line"> 'scheduler/dequeued/memory': 2,</span><br><span class="line"> 'scheduler/enqueued': 2,</span><br><span class="line"> 'scheduler/enqueued/memory': 2,</span><br><span class="line"> 'start_time': datetime.datetime(2022, 9, 16, 13, 33, 20, 473811)}</span><br><span class="line">2022-09-16 21:33:23 [scrapy.core.engine] INFO: Spider closed (finished)</span><br></pre></td></tr></tbody></table></figure><p>第一个爬虫运行成功。可以检查根目录下是否多出两个新文件：<em>quotes-1.html</em>&nbsp;和 <em>quotes-2.html</em>，文件内容就是我们爬取的数据。</p><h1 id="执行过程"><a href="#执行过程" class="headerlink" title="执行过程"></a>执行过程</h1><p><code>Scrapy</code> 框架到底做了什么，就可以爬取数据，这一过程是什么样子的呢？<code>Scrapy</code> 会调度 <code>start_requests()</code> 函数返回的 <code>Request</code> 对象，并将 <code>Response</code> 作为参数传给回调函数 <code>parse()</code>。这样一来，<strong>请求 —&gt; 响应 —&gt; 爬 —&gt; 取</strong>一气呵成。</p><h1 id="start-requests"><a href="#start-requests" class="headerlink" title="start_requests()"></a>start_requests()</h1><p>这个函数还是很灵活的，前面我我们说过它的简写形式，直接就是一个请求站点的列表。定义一个参数 <code>start_urls</code> 站点域名列表，这样就实现了 <code>Request</code> 的初始化。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">start_urls = [</span><br><span class="line">        <span class="string">'https://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">        <span class="string">'https://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>通过书写第一个爬虫，了解了 <code>Scrapy</code> 大致工作流程，并认识了其中重要的参数和函数。 </p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;在上一节中，我们了解了 &lt;code&gt;Scrapy&lt;/code&gt; 是一个爬虫框架，并书写了一个 demo 大致认识了爬取执行过程。但是，在实际开发过程中，不可能是在此 demo 基础上在写逻辑代码的，&lt;code&gt;Scrapy&lt;/code&gt; 的强大之处</summary>
      
    
    
    
    
    <category term="爬虫" scheme="https://kangblogs.top/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="Scrapy" scheme="https://kangblogs.top/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>初识 Scrapy</title>
    <link href="https://kangblogs.top/posts/919c62a5.html"/>
    <id>https://kangblogs.top/posts/919c62a5.html</id>
    <published>2022-09-12T13:30:42.000Z</published>
    <updated>2022-09-12T13:49:13.679Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h1><blockquote><p>Scrapy (/ˈskreɪpaɪ/)</p></blockquote><p><code>Scrapy</code> 是一个被广泛应用于爬取网站和提取结构化数据的应用框架，例如数据挖掘、信息处理等等。其设计之处就是为了网站爬虫，发展到现在已经可以使用 APIs 来提取数据，是一个通用的网站爬取工具。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>当然，前提是已经安装 Python，通过 pip 安装 Scrapy：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Scrapy</span><br></pre></td></tr></tbody></table></figure><h1 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h1><blockquote><p>通过一个小 Demo 认识 Scrapy，实践出真知</p></blockquote><h2 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h2><p>这里使用的是官方文档提供的例子，使用的<a href="https://quotes.toscrape.com/">网站链接</a>依旧有效，是一个很适合爬取做数据分析的演示站点。<br><img src="https://i0.hdslb.com/bfs/album/8246fe359a44df47358d753a15a923101d221a06.png"></p><p>直接上代码：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QuotesSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">'quotes'</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'https://quotes.toscrape.com/tag/humor/'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">            <span class="keyword">yield</span> {</span><br><span class="line">                <span class="string">'author'</span>: quote.xpath(<span class="string">'span/small/text()'</span>).get(),</span><br><span class="line">                <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).get(),</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        next_page = response.css(<span class="string">'li.next a::attr("href")'</span>).get()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> response.follow(next_page, self.parse)</span><br></pre></td></tr></tbody></table></figure><p>先不用看代码具体什么意思，直接在命令运行：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy runspider quotes_spider.py -o quotes.jl</span><br></pre></td></tr></tbody></table></figure><p>之后会进行跑码过程，并将提取的结构数据输出到文件 <code>quotes.jl</code> 中。</p><div class="tabs" id="运行"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#运行-1">console</button></li><li class="tab"><button type="button" data-href="#运行-2">quotes.jl</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="运行-1"><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">2022-09-12 20:09:23 [scrapy.utils.log] INFO: Scrapy 2.6.2 started (bot: scrapybot)</span><br><span class="line">2022-09-12 20:09:23 [scrapy.utils.log] INFO: Versions: lxml 4.9.1.0, libxml2 2.9.12, cssselect 1.1.0, parsel 1.6.0, w3lib 2.0.1, Twisted 22.8.0, Python 3.9.12 (tags/v3.9.12:b28265d, Mar 23 2022, 23:52:46) [MSC v.1929 64 bit (AMD64)], pyOpenSSL 22.0.0 (OpenSSL 3.0.5 5 Jul 2022), cryptography 38.0.1, Platform Windows-10-10.0.25197-SP0</span><br><span class="line">2022-09-12 20:09:23 [scrapy.crawler] INFO: Overridden settings:</span><br><span class="line">{'SPIDER_LOADER_WARN_ONLY': True}</span><br><span class="line">2022-09-12 20:09:23 [scrapy.utils.log] DEBUG: Using reactor: twisted.internet.selectreactor.SelectReactor</span><br><span class="line">2022-09-12 20:09:23 [scrapy.extensions.telnet] INFO: Telnet Password: a89bf20948a48863</span><br><span class="line">2022-09-12 20:09:23 [scrapy.middleware] INFO: Enabled extensions:</span><br><span class="line">['scrapy.extensions.corestats.CoreStats',</span><br><span class="line"> 'scrapy.extensions.telnet.TelnetConsole',</span><br><span class="line"> 'scrapy.extensions.feedexport.FeedExporter',</span><br><span class="line"> 'scrapy.extensions.logstats.LogStats']</span><br><span class="line">2022-09-12 20:09:24 [scrapy.middleware] INFO: Enabled downloader middlewares:</span><br><span class="line">['scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.retry.RetryMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware',</span><br><span class="line"> 'scrapy.downloadermiddlewares.stats.DownloaderStats']</span><br><span class="line">2022-09-12 20:09:24 [scrapy.middleware] INFO: Enabled spider middlewares:</span><br><span class="line">['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.referer.RefererMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',</span><br><span class="line"> 'scrapy.spidermiddlewares.depth.DepthMiddleware']</span><br><span class="line">2022-09-12 20:09:24 [scrapy.middleware] INFO: Enabled item pipelines:</span><br><span class="line">[]</span><br><span class="line">2022-09-12 20:09:24 [scrapy.core.engine] INFO: Spider opened</span><br><span class="line">2022-09-12 20:09:24 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)</span><br><span class="line">2022-09-12 20:09:24 [scrapy.extensions.telnet] INFO: Telnet console listening on 127.0.0.1:6023</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://quotes.toscrape.com/tag/humor/&gt; (referer: None)</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Jane Austen', 'text': '“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Steve Martin', 'text': '“A day without sunshine is like, you know, night.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Garrison Keillor', 'text': '“Anyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Jim Henson', 'text': '“Beauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Charles M. Schulz', 'text': "“All you need is love. But a little chocolate now and then doesn't hurt.”"}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Suzanne Collins', 'text': "“Remember, we're madly in love, so it's all right to kiss me anytime you feel like it.”"}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Charles Bukowski', 'text': '“Some people never go crazy. What truly horrible lives they must lead.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Terry Pratchett', 'text': '“The trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'Dr. Seuss', 'text': '“Think left and think right and think low and think high. Oh, the thinks you can think up if only you try!”'}</span><br><span class="line">2022-09-12 20:09:25 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/&gt;</span><br><span class="line">{'author': 'George Carlin', 'text': '“The reason I talk to myself is because I’m the only one whose answers I accept.”'}</span><br><span class="line">2022-09-12 20:09:26 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://quotes.toscrape.com/tag/humor/page/2/&gt; (referer: https://quotes.toscrape.com/tag/humor/)</span><br><span class="line">2022-09-12 20:09:26 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/page/2/&gt;</span><br><span class="line">{'author': 'W.C. Fields', 'text': '“I am free of all prejudice. I hate everyone equally. ”'}</span><br><span class="line">2022-09-12 20:09:26 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 https://quotes.toscrape.com/tag/humor/page/2/&gt;</span><br><span class="line">{'author': 'Jane Austen', 'text': "“A lady's imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.”"}</span><br><span class="line">2022-09-12 20:09:26 [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line">2022-09-12 20:09:26 [scrapy.extensions.feedexport] INFO: Stored jl feed (12 items) in: quotes.jl</span><br><span class="line">2022-09-12 20:09:26 [scrapy.statscollectors] INFO: Dumping Scrapy stats:</span><br><span class="line">{'downloader/request_bytes': 514,</span><br><span class="line"> 'downloader/request_count': 2,</span><br><span class="line"> 'downloader/request_method_count/GET': 2,</span><br><span class="line"> 'downloader/response_bytes': 15665,</span><br><span class="line"> 'downloader/response_count': 2,</span><br><span class="line"> 'downloader/response_status_count/200': 2,</span><br><span class="line"> 'elapsed_time_seconds': 2.077645,</span><br><span class="line"> 'feedexport/success_count/FileFeedStorage': 1,</span><br><span class="line"> 'finish_reason': 'finished',</span><br><span class="line"> 'finish_time': datetime.datetime(2022, 9, 12, 12, 9, 26, 430224),</span><br><span class="line"> 'item_scraped_count': 12,</span><br><span class="line"> 'log_count/DEBUG': 15,</span><br><span class="line"> 'log_count/INFO': 11,</span><br><span class="line"> 'request_depth_max': 1,</span><br><span class="line"> 'response_received_count': 2,</span><br><span class="line"> 'scheduler/dequeued': 2,</span><br><span class="line"> 'scheduler/dequeued/memory': 2,</span><br><span class="line"> 'scheduler/enqueued': 2,</span><br><span class="line"> 'scheduler/enqueued/memory': 2,</span><br><span class="line"> 'start_time': datetime.datetime(2022, 9, 12, 12, 9, 24, 352579)}</span><br><span class="line">2022-09-12 20:09:26 [scrapy.core.engine] INFO: Spider closed (finished)</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="运行-2"><figure class="highlight julia"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">{<span class="string">"author"</span>: <span class="string">"Jane Austen"</span>, <span class="string">"text"</span>: <span class="string">"\u201cThe person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Steve Martin"</span>, <span class="string">"text"</span>: <span class="string">"\u201cA day without sunshine is like, you know, night.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Garrison Keillor"</span>, <span class="string">"text"</span>: <span class="string">"\u201cAnyone who thinks sitting in church can make you a Christian must also think that sitting in a garage can make you a car.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Jim Henson"</span>, <span class="string">"text"</span>: <span class="string">"\u201cBeauty is in the eye of the beholder and it may be necessary from time to time to give a stupid or misinformed beholder a black eye.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Charles M. Schulz"</span>, <span class="string">"text"</span>: <span class="string">"\u201cAll you need is love. But a little chocolate now and then doesn't hurt.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Suzanne Collins"</span>, <span class="string">"text"</span>: <span class="string">"\u201cRemember, we're madly in love, so it's all right to kiss me anytime you feel like it.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Charles Bukowski"</span>, <span class="string">"text"</span>: <span class="string">"\u201cSome people never go crazy. What truly horrible lives they must lead.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Terry Pratchett"</span>, <span class="string">"text"</span>: <span class="string">"\u201cThe trouble with having an open mind, of course, is that people will insist on coming along and trying to put things in it.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Dr. Seuss"</span>, <span class="string">"text"</span>: <span class="string">"\u201cThink left and think right and think low and think high. Oh, the thinks you can think up if only you try!\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"George Carlin"</span>, <span class="string">"text"</span>: <span class="string">"\u201cThe reason I talk to myself is because I\u2019m the only one whose answers I accept.\u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"W.C. Fields"</span>, <span class="string">"text"</span>: <span class="string">"\u201cI am free of all prejudice. I hate everyone equally. \u201d"</span>}</span><br><span class="line">{<span class="string">"author"</span>: <span class="string">"Jane Austen"</span>, <span class="string">"text"</span>: <span class="string">"\u201cA lady's imagination is very rapid; it jumps from admiration to love, from love to matrimony in a moment.\u201d"</span>}</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>首先导入 scrapy 包：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br></pre></td></tr></tbody></table></figure><p><code>import scrapy</code> 之后指定 <code>scrapy.Spider</code>，提取数据的函数名称为 <code>parse</code>，这是缺省的约定。这样就定义了一个爬虫，现在来完善这个爬虫。首先是 <code>name</code>，其次是 <code>start_urls</code>，值得注意的是这是一个列表。</p><p>定义缺省函数提取数据：</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过向start_URLs属性中定义的URL发出请求</span></span><br><span class="line"><span class="comment"># 接收请求后的响应，通过向start_URLs属性中定义的URL发出请求</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">    <span class="comment"># 使用CSS选择器遍历quote元素</span></span><br><span class="line">    <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">        <span class="comment"># 生成包含提取的quote文本和作者的字典</span></span><br><span class="line">        <span class="keyword">yield</span> {</span><br><span class="line">             <span class="string">'author'</span>: quote.xpath(<span class="string">'span/small/text()'</span>).get(),</span><br><span class="line">             <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).get(),</span><br><span class="line">        }</span><br><span class="line">    <span class="comment"># 查找指向下一页的链接</span></span><br><span class="line">    next_page = response.css(<span class="string">'li.next a::attr("href")'</span>).get()</span><br><span class="line">    <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># 使用与回调相同的解析方法调度下一个请求</span></span><br><span class="line">        <span class="keyword">yield</span> response.follow(next_page, self.parse)</span><br></pre></td></tr></tbody></table></figure><p>其中的 CSS 选择器，可以看出与网页中的对应，CSS class 为 <code>quote</code> 的 <code>div</code> 标签，返回一个选择器，其 <code>data</code> 为整个 class 为 <code>quote</code> 的 <code>div</code> 标签。</p><p><img src="https://i0.hdslb.com/bfs/album/841253d8d2c31f6f6ac37c4c2c17b7c7b238d6e1.png"></p><p>下面再精确定位一波，<code>quote.xpath('span/small/text()')</code> 深度遍历获取目标 div 下的 span 标签，span 标签下的 small 标签，并传入 text ()。使用 get () 函数获取其文本值，具体 div 如下：</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"quote"</span> <span class="attr">itemscope</span>=<span class="string">""</span> <span class="attr">itemtype</span>=<span class="string">"http://schema.org/CreativeWork"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span> <span class="attr">itemprop</span>=<span class="string">"text"</span>&gt;</span>“The person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.”<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>by <span class="tag">&lt;<span class="name">small</span> <span class="attr">class</span>=<span class="string">"author"</span> <span class="attr">itemprop</span>=<span class="string">"author"</span>&gt;</span>Jane Austen<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/author/Jane-Austen"</span>&gt;</span>(about)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">            Tags:</span><br><span class="line">            <span class="tag">&lt;<span class="name">meta</span> <span class="attr">class</span>=<span class="string">"keywords"</span> <span class="attr">itemprop</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"aliteracy,books,classic,humor"</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/aliteracy/page/1/"</span>&gt;</span>aliteracy<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/books/page/1/"</span>&gt;</span>books<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/classic/page/1/"</span>&gt;</span>classic<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/humor/page/1/"</span>&gt;</span>humor<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>我们可以通过修改代码来获取 <code>tags</code>。</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> {</span><br><span class="line">    <span class="string">'author'</span>: quote.xpath(<span class="string">'span/small/text()'</span>).get(),</span><br><span class="line">    <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).get(),</span><br><span class="line">    <span class="string">'tags'</span>: quote.css(<span class="string">'a.tag::text'</span>).getall()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>通过一个小案例成功了解了 <code>Scrapy</code> 爬虫框架。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;简述&quot;&gt;&lt;a href=&quot;#简述&quot; class=&quot;headerlink&quot; title=&quot;简述&quot;&gt;&lt;/a&gt;简述&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Scrapy (/ˈskreɪpaɪ/)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Scrapy&lt;/c</summary>
      
    
    
    
    
    <category term="爬虫" scheme="https://kangblogs.top/tags/%E7%88%AC%E8%99%AB/"/>
    
    <category term="Scrapy" scheme="https://kangblogs.top/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>Git 基本操作流程</title>
    <link href="https://kangblogs.top/posts/66b7cfbe.html"/>
    <id>https://kangblogs.top/posts/66b7cfbe.html</id>
    <published>2022-09-12T07:55:23.000Z</published>
    <updated>2022-09-12T07:59:44.911Z</updated>
    
    <content type="html"><![CDATA[<h1 id="控制逻辑流程"><a href="#控制逻辑流程" class="headerlink" title="控制逻辑流程"></a>控制逻辑流程</h1><img title="" src="https://i0.hdslb.com/bfs/album/e805d3289728419fb58416599cd18a95af269db7.png" alt="" data-align="inline"><hr><h1 id="本地操作"><a href="#本地操作" class="headerlink" title="本地操作"></a>本地操作</h1><h2 id="初始化项目"><a href="#初始化项目" class="headerlink" title="初始化项目"></a>初始化项目</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init [&lt;projectName&gt;]</span><br></pre></td></tr></tbody></table></figure><p>若项目已存在，直接进入项目目录执行命令 <code>git init</code>，当然，前提是已安装 Git。若项目不存在，则运行 <code>git init &lt;projectName&gt;</code>，此命令会在当前目录下新建一个项目 <code>projectName</code> 并项目根目录中新建名为<code>.git</code> 的目录，Windows 用户可能需要通过相关设置才可以查看到此目录。需要注意的是，<code>.git</code> 并不是版本控制的工作区，而是 git 的版本仓库，这一目录下存放了很多东西，例如其中最重要的就是称为 stage（或者叫 index）的暂存区，还有 Git 为我们自动创建的第一个分支 <code>master</code>，以及指向 <code>master</code> 的一个指针叫 <code>HEAD</code>。</p><p><img src="https://i0.hdslb.com/bfs/album/c3568e61a01a31a015892d657b9fb53fa1f6a465.png"></p><h2 id="修改项目"><a href="#修改项目" class="headerlink" title="修改项目"></a>修改项目</h2><p>在 Git 中一个非常重要的概念就是<code>修改</code>，与传统版本控制系统控制元<code>文件</code>不同，Git 引入以<code>修改</code>为控制元的控制结构。就如上图中 <code>git status</code> 返回的内容 “create/copy files…”，这就是一种修改，在 Git 中增加或删除都算作修改。现在作出修改：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim README.md  # 新建并编辑文件</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入任意内容保存退出</span></span><br></pre></td></tr></tbody></table></figure><p>此时查看 Git 状态，已经检测到工作空间中<code>修改</code>（新增）了一个 <code>README.md</code> 文件，并且迫不及待提示使用 <code>git add</code> 完成后续流程操作。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use "git add &lt;file&gt;..." to include in what will be committed)</span><br><span class="line">        README.md</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use "git add" to track)</span><br></pre></td></tr></tbody></table></figure><h2 id="加入暂存区"><a href="#加入暂存区" class="headerlink" title="加入暂存区"></a>加入暂存区</h2><blockquote><p><code>git add</code> 的作用就是将工作区中的修改添加至暂存区</p></blockquote><p>根据提示使用 <code>git add README.md</code>。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">❯ git add README.md</span><br><span class="line"></span><br><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use "git rm --cached &lt;file&gt;..." to unstage)</span><br><span class="line">        new file:   README.md</span><br></pre></td></tr></tbody></table></figure><h2 id="退出暂存区"><a href="#退出暂存区" class="headerlink" title="退出暂存区"></a>退出暂存区</h2><p>有来就有回，根据上面的提示 “use “git rm –cached …” to unstage” 可知，使用 <code>git rm</code> 可以将修改退出暂存区，不用担心，这并不会删除工作区的源文件。status 返回为未添加状态。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">❯ git rm --cache .\README.md</span><br><span class="line">rm 'README.md' </span><br><span class="line"></span><br><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use "git add &lt;file&gt;..." to include in what will be committed)</span><br><span class="line">        README.md</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use "git add" to track)</span><br></pre></td></tr></tbody></table></figure><h2 id="提交修改"><a href="#提交修改" class="headerlink" title="提交修改"></a>提交修改</h2><blockquote><p>使用 <code>git commit</code> 提交已加入暂存区的修改</p></blockquote><p>commit 命令会将暂存区中内容加入版本仓库中，并且可以附加修改信息标题。<code>git add</code> 是 <code>git commit</code> 的前提，这也就是为什么说 <code>git commit</code> 提交的是已加入暂存区的修改。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">❯ git commit -m "📑第一次上传"</span><br><span class="line">[master (root-commit) 4553d51] 📑第一次上传</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 README.md </span><br><span class="line"></span><br><span class="line">❯ git log</span><br><span class="line">commit 4553d51c389bae5da3e77d71fe53326a0f48e330 (HEAD -&gt; master)</span><br><span class="line">Author: CoderKang &lt;example@kang.com&gt;</span><br><span class="line">Date:   Mon Sep 12 14:06:47 2022 +0800</span><br><span class="line"></span><br><span class="line">    📑第一次上传</span><br></pre></td></tr></tbody></table></figure><p>通过 <code>git log</code> 可知，提交后会生成一个 <code>commitId</code>，这个 id 是结合</p><ul><li>The source tree of the commit (which unravels to all the subtrees and blobs)</li><li>The parent commit sha1</li><li>The author info</li><li>The committer info (right, those are different!)</li><li>The commit message</li></ul><p>并使用 <code>SHA1</code> 算法自动生成的。</p><h2 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h2><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">❯ cat .\README.md</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is a README file.</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Git is greate!</span></span><br><span class="line">F**K SVN!</span><br></pre></td></tr></tbody></table></figure><p>正如所见，我们在工作区写入了一些不好的内容，现在需要撤销这些修改。当然，这些修改可能存在好几种状态，需要区别处理。</p><ul><li><p>! add &amp;&amp; ! commit</p><p>这种当然是最理想的状态，可能只是工作中刚发的牢骚体现在了键盘上。此时只需要手动删除最后一行内容就可以了，另外 Git 提供的 <code>checkout</code> 可以使这个文件回到最近一次 <code>git commit</code> 或 <code>git add</code> 时的状态，或者使用 <code>restore</code> 废弃工作区中的修改。此时再查看文件内容：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- README.md</span><br></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git restore README.md</span><br></pre></td></tr></tbody></table></figure><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">❯ cat .\README.md</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This is a README file.</span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">Git is greate!</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>add &amp;&amp; ! commit</p><p>可能是因为中午没有休息，头脑昏昏沉沉，一不小心将修改的内容添加到了暂存区。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">❯ git add README.md</span><br><span class="line"></span><br><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use "git restore --staged &lt;file&gt;..." to unstage)</span><br><span class="line">        modified:   README.md</span><br></pre></td></tr></tbody></table></figure><p>问题不大，在状态返回内容中 Git 已经给出了解决方法，“git restore –staged <file> …”。使用后又回到了未添加到暂存区状态，即第一种状态 <code>! add &amp;&amp; ! commit</code>。</file></p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">❯ git restore --staged .\README.md </span><br><span class="line"></span><br><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">        modified:   README.md</span><br><span class="line"></span><br><span class="line">no changes added to commit (use "git add" and/or "git commit -a")</span><br></pre></td></tr></tbody></table></figure></li><li><p>add &amp;&amp; commit</p><p>可能加上昨晚熬夜加班，还是未发现 Bad Content，并且 commit 提交了。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">❯ git log</span><br><span class="line">commit dd5cb08fda1a4ab65bf1a90338f00537f9299f98 (HEAD -&gt; master)</span><br><span class="line">Author: CoderKang &lt;example@kang.com&gt;</span><br><span class="line">Date:   Mon Sep 12 15:17:28 2022 +0800</span><br><span class="line"></span><br><span class="line">    📑Bad Content</span><br><span class="line"></span><br><span class="line">commit 27294ac7f19b14054ba7dfba700133f4cd7884d2</span><br><span class="line">Author: CoderKang &lt;example@kang.com&gt;</span><br><span class="line">Date:   Mon Sep 12 14:56:31 2022 +0800</span><br><span class="line"></span><br><span class="line">    📑添加内容</span><br><span class="line"></span><br><span class="line">commit 4553d51c389bae5da3e77d71fe53326a0f48e330</span><br><span class="line">Author: CoderKang &lt;example@kang.com&gt;</span><br><span class="line">Date:   Mon Sep 12 14:06:47 2022 +0800</span><br><span class="line"></span><br><span class="line">    📑第一次上传</span><br></pre></td></tr></tbody></table></figure><p>依旧不慌，使用 <code>reset</code> 命令进行版本仓库内容的回退，让 Bad Content 回到暂存区，此时就回到刚刚介绍的情况 <code>add &amp;&amp; ! commit</code>。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">❯ git reset HEAD^ .\README.md</span><br><span class="line">Unstaged changes after reset:</span><br><span class="line">M       README.md </span><br><span class="line"></span><br><span class="line">❯ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use "git restore --staged &lt;file&gt;..." to unstage)</span><br><span class="line">        modified:   README.md</span><br><span class="line"></span><br><span class="line">Changes not staged for commit:</span><br><span class="line">  (use "git add &lt;file&gt;..." to update what will be committed)</span><br><span class="line">  (use "git restore &lt;file&gt;..." to discard changes in working directory)</span><br><span class="line">        modified:   README.md</span><br></pre></td></tr></tbody></table></figure></li><li><p>add &amp;&amp; commit &amp;&amp; push</p><p>此种情况看似很可怕，但是依旧可以使用 <code>reset</code> 方法解决，不多赘述。</p></li></ul><hr><h1 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h1><blockquote><p>实际中最常见的场景是使用内网 / 外网版本仓库来进行开发，这里以 Github 为例</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;控制逻辑流程&quot;&gt;&lt;a href=&quot;#控制逻辑流程&quot; class=&quot;headerlink&quot; title=&quot;控制逻辑流程&quot;&gt;&lt;/a&gt;控制逻辑流程&lt;/h1&gt;&lt;img title=&quot;&quot; src=&quot;https://i0.hdslb.com/bfs/album/e805d32</summary>
      
    
    
    
    
    <category term="Git" scheme="https://kangblogs.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Git 基本命令</title>
    <link href="https://kangblogs.top/posts/517ce18c.html"/>
    <id>https://kangblogs.top/posts/517ce18c.html</id>
    <published>2022-09-11T09:00:47.000Z</published>
    <updated>2022-09-11T09:21:47.567Z</updated>
    
    <content type="html"><![CDATA[<h1 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h1><blockquote><p>Git 是一个快速的、可扩展的、分布的版本控制系统，它具有丰富的命令控制指令，并提供高级的操作。</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git [-v | --version] [-h | --<span class="built_in">help</span>] [-C &lt;path&gt;] [-c &lt;name&gt;=&lt;value&gt;]</span><br><span class="line">    [--exec-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path]</span><br><span class="line">    [-p|--paginate|-P|--no-pager] [--no-replace-objects] [--bare]</span><br><span class="line">    [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;]</span><br><span class="line">    [--super-prefix=&lt;path&gt;] [--config-env=&lt;name&gt;=&lt;envvar&gt;]</span><br><span class="line">    &lt;<span class="built_in">command</span>&gt; [&lt;args&gt;]</span><br></pre></td></tr></tbody></table></figure><hr><h2 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h2><ul><li><p>-v   alias: [–version, version]</p><p>打印 Git 的版本信息。优先级高于 <strong>–help</strong>。</p><p><img src="https://i0.hdslb.com/bfs/album/4723fa3a6ef428cebcabf36c7c5974bb55ef7026.png" alt="version"></p></li><li><p>-h   alias: [–help, help]</p><p>打印全部的指令参数信息并列举介绍出一些常用的命令。携带 <strong>–all</strong> 或 <strong>-a</strong> 参数，将打印所有可用的命令。</p><p><img src="https://i0.hdslb.com/bfs/album/75ef38bedd5b7173bb45e3cc00d31dfb0e113776.png"></p></li><li><p>-C <path></path></p><blockquote><p>Change，官方文档没看明白也没用明白……</p></blockquote><p>修改当前工作目录。当使用多个时 <code>-C &lt;path&gt; -C &lt;path&gt; ...</code>，后继都是对前驱的解释。当 <code>path</code> 存在但是为空时，则当前工作目录不变：<code>git -C ""</code>(使用的 2.37.3.windows.1 版本已经不支持接收空值)。</p><p>This option affects options that expect path name like&nbsp;<code>--git-dir</code>&nbsp;and&nbsp;<code>--work-tree</code>&nbsp;in that their interpretations of the path names would be made relative to the working directory caused by the&nbsp;<code>-C</code>&nbsp;option. For example the following invocations are equivalent:</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git --git-dir=a.git --work-tree=b -C c status</span><br><span class="line">git --git-dir=c/a.git --work-tree=c/b status</span><br></pre></td></tr></tbody></table></figure></li><li><p>-c <name>=<value></value></name></p><blockquote><p>config</p></blockquote><p>将配置参数传递给命令。给定的值 <code>&lt;value&gt;</code> 将覆盖配置文件中的值。 <code>&lt;name&gt;</code> 的格式应与 <code>git config</code> 列出的格式相同（子键以点分隔）。</p></li></ul><h1 id="高级命令"><a href="#高级命令" class="headerlink" title="高级命令"></a>高级命令</h1><blockquote><p>部分命令</p></blockquote><h3 id="⭐git-add"><a href="#⭐git-add" class="headerlink" title="⭐git add"></a>⭐git add</h3><blockquote><p>添加文件到索引</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add [--verbose | -v] [--dry-run | -n] [--force | -f] [--interactive | -i] [--patch | -p]</span><br><span class="line">      [--edit | -e] [--[no-]all | --[no-]ignore-removal | [--update | -u]]</span><br><span class="line">      [--intent-to-add | -N] [--refresh] [--ignore-errors] [--ignore-missing] [--renormalize]</span><br><span class="line">      [--<span class="built_in">chmod</span>=(+|-)x] [--pathspec-from-file=&lt;文件&gt; [--pathspec-file-nul]]</span><br><span class="line">      [--] [&lt;指定路径&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>该命令在工作树中找到的当前的内容以更新索引，为下一次提交准备暂存的内容。它通常会整体添加现有路径的当前内容，但是通过某些选项，它也可以用于仅添加对工作树文件所做的部分更改，或删除工作树中不存在的路径。</p><p><img src="https://i0.hdslb.com/bfs/album/a6d364742b9a13ab998f55744b9ca606675039f1.png"></p><p>“索引” 保存着工作树内容的快照，该快照作为下一次提交的内容。因此，在对工作树进行任何更改之后，以及在运行 commit 命令之前，必须使用 <code>add</code> 命令将所有新文件或修改过的文件添加到索引中。</p><p>提交前可以多次执行此命令。它仅在运行 add 命令时添加指定文件的内容；如果要在下一次提交中包含后续更改，则必须再次运行 <code>git add</code> 将新内容添加到索引中。</p><p><code>git status</code>&nbsp;命令可用于获取摘要，说明哪些变化的文件已暂存，准备下一次提交。</p><p><code>git add</code>&nbsp;命令默认不会添加被忽略的文件。如果在命令行上明确指定了任何被忽略的文件，则 <code>git add</code> 会失败，并显示被忽略文件的列表。由目录递归或 Git 执行的文件名通配符（在 script 之前引用的通配符）所涉及的忽略文件将被静默忽略。&nbsp;<em>git add</em>&nbsp;命令可用于通过 -f 选项（force）强制添加忽略的文件。</p><p>请参阅&nbsp;<a href="https://git-scm.com/docs/git-commit/zh_HANS-CN">git-commit[1]</a>&nbsp;了解将内容添加到提交的其他替代方法。</p></li></ul><h3 id="git-am"><a href="#git-am" class="headerlink" title="git am"></a>git am</h3><blockquote><p>应用来自邮件的补丁</p></blockquote><p>通过电子邮件收到了一个需要整合进入项目的补丁，需要将其应用到主题分支中进行评估。 有两种应用该种补丁的方法：使用&nbsp;<code>git apply</code>，或者使用&nbsp;<code>git am</code>。</p><p>如果补丁的贡献者也是一个 Git 用户，并且其能熟练使用&nbsp;<code>format-patch</code>&nbsp;命令来生成补丁，这样的话你的工作会变得更加轻松，因为这种补丁中包含了作者信息和提交信息供你参考。 如果可能的话，请鼓励贡献者使用&nbsp;<code>format-patch</code>&nbsp;而不是&nbsp;<code>diff</code>&nbsp;来为你生成补丁。 而只有对老式的补丁，你才必须使用&nbsp;<code>git apply</code>&nbsp;命令。</p><p>要应用一个由&nbsp;<code>format-patch</code>&nbsp;命令生成的补丁，你应该使用&nbsp;<code>git am</code>&nbsp;命令 （该命令的名字&nbsp;<code>am</code>&nbsp;表示它 “应用（Apply）一系列来自邮箱（Mailbox）的补丁”）。 从技术的角度看，<code>git am</code>&nbsp;是为了读取 mbox 文件而构建的， mbox 是一种用来在单个文本文件中存储一个或多个电子邮件消息的简单纯文本格式。 其大致格式如下所示：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">From 330090432754092d704da8e76ca5c05c198e71a8 Mon Sep 17 00:00:00 2001</span><br><span class="line">From: Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">Date: Sun, 6 Apr 2008 10:17:23 -0700</span><br><span class="line">Subject: [PATCH 1/2] add limit to log function</span><br><span class="line"></span><br><span class="line">Limit log functionality to the first 20</span><br></pre></td></tr></tbody></table></figure><p>这其实就是你前面看到的&nbsp;<code>git format-patch</code>&nbsp;命令输出的开始几行， 而同时它也是有效的 mbox 电子邮件格式。 如果有人使用&nbsp;<code>git send-email</code>&nbsp;命令将补丁以电子邮件的形式发送给你， 你便可以将它下载为 mbox 格式的文件，之后将 git am 命令指向该文件，它会应用其中包含的所有补丁。 如果你所使用的邮件客户端能够同时将多封邮件保存为 mbox 格式的文件， 你甚至能够将一系列补丁打包为单个 mbox 文件，并利用&nbsp;<code>git am</code>&nbsp;命令将它们一次性全部应用。</p><p>然而，如果贡献者将&nbsp;<code>git format-patch</code>&nbsp;生成的补丁文件上传到工单系统或类似的任务处理系统， 你可以先将其保存到本地，之后通过&nbsp;<code>git am</code>&nbsp;来应用补丁：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git am 0001-limit-log-function.patch</span></span><br><span class="line">Applying: add limit to log function</span><br></pre></td></tr></tbody></table></figure><p>你会看到补丁被顺利地应用，并且为你自动创建了一个新的提交。 其中的作者信息来自于电子邮件头部的&nbsp;<code>From</code>&nbsp;和&nbsp;<code>Date</code>&nbsp;字段，提交消息则取自&nbsp;<code>Subject</code>&nbsp;和邮件正文中补丁之前的内容。 比如，应用上面那个 mbox 示例后生成的提交是这样的：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git <span class="built_in">log</span> --pretty=fuller -1</span></span><br><span class="line">commit 6c5e70b984a60b3cecd395edd5b48a7575bf58e0</span><br><span class="line">Author:     Jessica Smith &lt;jessica@example.com&gt;</span><br><span class="line">AuthorDate: Sun Apr 6 10:17:23 2008 -0700</span><br><span class="line">Commit:     Scott Chacon &lt;schacon@gmail.com&gt;</span><br><span class="line">CommitDate: Thu Apr 9 09:19:06 2009 -0700</span><br><span class="line"></span><br><span class="line">   add limit to log function</span><br><span class="line"></span><br><span class="line">   Limit log functionality to the first 20</span><br></pre></td></tr></tbody></table></figure><p>其中&nbsp;<code>Commit</code>&nbsp;信息表示的是应用补丁的人和应用补丁的时间。&nbsp;<code>Author</code>&nbsp;信息则表示补丁的原作者和原本的创建时间。</p><p>但是，有时候无法顺利地应用补丁。 这也许是因为你的主分支和创建补丁的分支相差较多，也有可能是因为这个补丁依赖于其他你尚未应用的补丁。 这种情况下，<code>git am</code>&nbsp;进程将会报错并且询问你要做什么：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git am 0001-seeing-if-this-helps-the-gem.patch</span></span><br><span class="line">Applying: seeing if this helps the gem</span><br><span class="line">error: patch failed: ticgit.gemspec:1</span><br><span class="line">error: ticgit.gemspec: patch does not apply</span><br><span class="line">Patch failed at 0001.</span><br><span class="line">When you have resolved this problem run "git am --resolved".</span><br><span class="line">If you would prefer to skip this patch, instead run "git am --skip".</span><br><span class="line">To restore the original branch and stop patching run "git am --abort".</span><br></pre></td></tr></tbody></table></figure><p>该命令将会在所有出现问题的文件内加入冲突标记，就和发生冲突的合并或变基操作一样。 而你解决问题的手段很大程度上也是一样的 —— 即手动编辑那些文件来解决冲突，暂存新的文件， 之后运行&nbsp;<code>git am --resolved</code>&nbsp;继续应用下一个补丁：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">(fix the file)</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git add ticgit.gemspec</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git am --resolved</span></span><br><span class="line">Applying: seeing if this helps the gem</span><br></pre></td></tr></tbody></table></figure><p>如果你希望 Git 能够尝试以更加智能的方式解决冲突，你可以对其传递&nbsp;<code>-3</code>&nbsp;选项来使 Git 尝试进行三方合并。 该选项默认并没有打开，因为如果用于创建补丁的提交并不在你的版本库内的话，这样做是没有用处的。 而如果你确实有那个提交的话 —— 比如补丁是基于某个公共提交的 —— 那么通常&nbsp;<code>-3</code>&nbsp;选项对于应用有冲突的补丁是更加明智的选择。</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git am -3 0001-seeing-if-this-helps-the-gem.patch</span></span><br><span class="line">Applying: seeing if this helps the gem</span><br><span class="line">error: patch failed: ticgit.gemspec:1</span><br><span class="line">error: ticgit.gemspec: patch does not apply</span><br><span class="line">Using index info to reconstruct a base tree...</span><br><span class="line">Falling back to patching base and 3-way merge...</span><br><span class="line">No changes -- Patch already applied.</span><br></pre></td></tr></tbody></table></figure><p>比如上面这种情况，如果没有&nbsp;<code>-3</code>&nbsp;选项的话，这看起来就像是存在一个冲突。 由于使用了&nbsp;<code>-3</code>&nbsp;选项，该补丁就被干净地应用了</p><p>如果你正在利用一个 mbox 文件应用多个补丁，也可以在交互模式下运行&nbsp;<code>am</code>&nbsp;命令， 这样在每个补丁之前，它会停住询问你是否要应用该补丁：</p><figure class="highlight console"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git am -3 -i mbox</span></span><br><span class="line">Commit Body is:</span><br><span class="line">--------------------------</span><br><span class="line">seeing if this helps the gem</span><br><span class="line">--------------------------</span><br><span class="line">Apply? [y]es/[n]o/[e]dit/[v]iew patch/[a]ccept all</span><br></pre></td></tr></tbody></table></figure><p>这在你保存的补丁较多时很好用，因为你可以在应用之前查看忘掉内容的补丁，并且跳过已经应用过的补丁。</p><p>当与你的特性相关的所有补丁都被应用并提交到分支中之后，你就可以选择是否以及如何将其整合到更长期的分支中去了。</p><h3 id="git-archive"><a href="#git-archive" class="headerlink" title="git archive"></a>git archive</h3><blockquote><p>归档打包文件树</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git archive [--format=&lt;<span class="built_in">fmt</span>&gt;] [--list] [--prefix=&lt;prefix&gt;/] [&lt;extra&gt;]</span><br><span class="line">          [-o &lt;file&gt; | --output=&lt;file&gt;] [--worktree-attributes]</span><br><span class="line">          [--remote=&lt;repo&gt; [--<span class="built_in">exec</span>=&lt;git-upload-archive&gt;]] &lt;tree-ish&gt;</span><br><span class="line">          [&lt;path&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>将所需文件或文件树打包压缩至压缩包中 [tar、tgz、tar.gz、zip]。</p></li></ul><h3 id="git-bisect"><a href="#git-bisect" class="headerlink" title="git bisect"></a>git bisect</h3><blockquote><p>使用二分搜索发现 commit 中的 Bug 并显示</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bisect &lt;subcommand&gt; &lt;options&gt;</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>此命令使用二分搜索算法检索项目的 commit 历史中的错误。<code>bad</code>：存在错误，<code>good</code>：阴性 commit。</p></li></ul><h3 id="⭐git-branch"><a href="#⭐git-branch" class="headerlink" title="⭐git branch"></a>⭐git branch</h3><blockquote><p>列出、新建、删除分支</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git branch [--color[=&lt;when&gt;] |--no-color] [--show-current]</span><br><span class="line">    [-v [--abbrev=&lt;n&gt; |--no-abbrev] ]</span><br><span class="line">    [--column[=&lt;options&gt;] | --no-column][--<span class="built_in">sort</span>=&lt;key&gt;]</span><br><span class="line">    [--合并 [&lt;commit&gt;]][--no-merged [&lt;commit&gt;]]。</span><br><span class="line">    [--包含[&lt;commit&gt;]][--no-contains [&lt;commit&gt;]] [--contains [&lt;commit&gt;]]</span><br><span class="line">    [--points-at &lt;object&gt;] [--format=&lt;format&gt;]。</span><br><span class="line">    [(-r | --remotes) | (-a | --all)</span><br><span class="line">    [--列表] [&lt;pattern&gt;…​]</span><br><span class="line">git branch [--track |-no-track] [-f] &lt;branchname&gt; [&lt;start-point&gt;]。</span><br><span class="line">git branch (-set-upstream-to=&lt;upstream&gt; | -u &lt;upstream&gt;) [&lt;branchname&gt;]</span><br><span class="line">git branch --unset-upstream [&lt;branchname&gt;]</span><br><span class="line">git branch (-m | -M) [&lt;oldbranch&gt;] &lt;newbranch&gt;  <span class="comment"># Move/rename a branch, together with its config and reflog.</span></span><br><span class="line">git branch (-c | -C) [&lt;oldbranch&gt;] &lt;newbranch&gt;  <span class="comment"># Copy a branch, together with its config and reflog.</span></span><br><span class="line">git branch (-d | -D) [-r] &lt;branchname&gt;…​  <span class="comment"># Delete a branch. </span></span><br><span class="line">git branch --edit-debashion [&lt;branchname&gt;])</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>如果给了 <code>--list</code>，或者没有非选项参数，现有的分支将被列出；当前的分支将以绿色突出显示，并标有星号。 在链接的工作树中检查出来的任何分支将以青色突出显示，并标有加号。选项 <code>-r</code> 导致远程跟踪的分支被列出，选项 <code>-a</code> 显示本地和远程分支。</p><p>如果给出了 <code>&lt;pattern&gt;</code>，它被用作 bash 通配符，将输出限制在匹配的分支上。如果给出多个模式，如果一个分支与任何模式相匹配，就会显示出来。</p><p>注意，当提供”<pattern>“时，必须使用”–list”；否则命令可能被解释为创建分支。</pattern></p><p>使用&nbsp;<code>--contains</code>&nbsp;时，只显示包含指定提交的分支（换句话说，尖端提交是指定提交的后裔的分支），<code>--no-contains</code>&nbsp;会反过来。如果使用&nbsp;<code>--merged</code>，则只列出被合并到指定提交的分支（即其顶端提交可以从指定提交处到达的分支）。 如果使用”–no-merged”，则只列出未被合并到指定提交的分支。 如果缺少<commit>参数，则默认为 <code>HEAD</code>（即当前分支的顶端）。</commit></p><p>该命令的第二种形式是创建一个名为<branchname>的新分支头，该分支头指向当前的 <code>HEAD</code>，如果给定的话，则指向<start-point>。作为一种特殊情况，对于<start-point>，你可以使用”A…​B” 作为 <code>A</code> 和 <code>B</code> 的合并基础的快捷方式，如果正好有一个合并基础。你最多可以省略 <code>A</code> 和 <code>B</code> 中的一个，在这种情况下，它默认为 <code>HEAD</code>。</start-point></start-point></branchname></p><p>注意，这将创建新的分支，但不会将工作树切换到它；使用 <code>git switch &lt;newbranch&gt;</code> 来切换到新的分支。</p><p>当一个本地分支从远程跟踪的分支开始时，Git 会设置该分支（特别是&nbsp;<code>branch.&lt;name&gt;.remote</code>&nbsp;和&nbsp;<code>branch.&lt;name&gt;.merge</code>&nbsp;配置项），以便 “git pull “能适当地从远程跟踪的分支合并。这种行为可以通过全局的&nbsp;<code>branch.autoSetupMerge</code>&nbsp;配置标志来改变。该设置可以通过使用 <code>--track</code> 和 <code>--no-track</code> 选项来覆盖，并在之后使用 <code>git branch --set-upstream-to</code> 来改变。</p><p>使用 <code>-m</code> 或 <code>-M</code> 选项，<oldbranch>将被重命名为<newbranch>。 如果 <oldbranch> 有相应的 reflog，它将被重命名以匹配 <newbranch>，并创建一个 reflog 条目以记住分支重命名。如果 <newbranch> 存在，必须使用 -M 来强制重命名。</newbranch></newbranch></oldbranch></newbranch></oldbranch></p><p><code>-c</code> 和 <code>-C</code> 选项的语义与 <code>-m</code> 和 <code>-M</code> 完全相同，只不过不是对分支进行重命名，而是将其连同其配置和日志一起复制到一个新的名称。</p><p>使用 <code>-d</code> 或 <code>-D</code> 选项，<code>&lt;branchname&gt;</code> 将被删除。 你可以指定一个以上的分支进行删除。 如果该分支目前有一个 reflog，那么 reflog 也将被删除。</p><p>使用&nbsp;<code>-r</code>&nbsp;和&nbsp;<code>-d</code>&nbsp;来删除远程跟踪的分支。注意，只有当远程分支不再存在于远程仓库或 “git fetch “被配置为不再获取它们时，删除远程跟踪分支才有意义。参见&nbsp;<a href="https://git-scm.com/docs/git-remote/zh_HANS-CN">git-remote[1]</a>&nbsp;的 “prune “子命令，它可以清理所有过时的远程跟踪分支。</p></li></ul><h3 id="git-bundle"><a href="#git-bundle" class="headerlink" title="git bundle"></a>git bundle</h3><blockquote><p>压缩并转移版本内容</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git bundle create [-q | --quiet | --progress | --all-progress] [--all-progress-implied]</span><br><span class="line">            [--version=&lt;version&gt;] &lt;file&gt; &lt;git-rev-list-args&gt;</span><br><span class="line">git bundle verify [-q | --quiet] &lt;file&gt;</span><br><span class="line">git bundle list-heads &lt;file&gt; [&lt;refname&gt;…​]</span><br><span class="line">git bundle unbundle [--progress] &lt;file&gt; [&lt;refname&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>将 <code>git push</code> 命令所传输的所有内容打包成一个二进制文件， 你可以将这个文件通过邮件或者闪存传给其他人，然后解包到其他的仓库中。</p></li></ul><h3 id="⭐git-checkout"><a href="#⭐git-checkout" class="headerlink" title="⭐git checkout"></a>⭐git checkout</h3><blockquote><p>切换分支或者恢复历史</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout [-q] [-f] [-m] [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] --detach [&lt;branch&gt;]</span><br><span class="line">git checkout [-q] [-f] [-m] [--detach] &lt;commit&gt;</span><br><span class="line">git checkout [-q] [-f] [-m] [[-b|-B|--orphan] &lt;new-branch&gt;] [&lt;start-point&gt;]</span><br><span class="line">git checkout [-f|--ours|--theirs|-m|--conflict=&lt;style&gt;] [&lt;tree-ish&gt;] [--] &lt;pathspec&gt;…​</span><br><span class="line">git checkout [-f|--ours|--theirs|-m|--conflict=&lt;style&gt;] [&lt;tree-ish&gt;] --pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]</span><br><span class="line">git checkout (-p|--patch) [&lt;tree-ish&gt;] [--] [&lt;pathspec&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>切换项目分支。</p></li></ul><h3 id="⭐git-clone"><a href="#⭐git-clone" class="headerlink" title="⭐git clone"></a>⭐git clone</h3><blockquote><p>克隆一个新仓库</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> [--template=&lt;template_directory&gt;]</span><br><span class="line">      [-l] [-s] [--no-hardlinks] [-q] [-n] [--bare] [--mirror]</span><br><span class="line">      [-o &lt;name&gt;] [-b &lt;name&gt;] [-u &lt;upload-pack&gt;] [--reference &lt;repository&gt;]</span><br><span class="line">      [--dissociate] [--separate-git-dir &lt;git <span class="built_in">dir</span>&gt;]</span><br><span class="line">      [--depth &lt;depth&gt;] [--[no-]single-branch] [--no-tags]</span><br><span class="line">      [--recurse-submodules[=&lt;pathspec&gt;]] [--[no-]shallow-submodules]</span><br><span class="line">      [--[no-]remote-submodules] [--<span class="built_in">jobs</span> &lt;n&gt;] [--sparse]</span><br><span class="line">      [--filter=&lt;filter&gt;] [--] &lt;repository&gt;</span><br><span class="line">      [&lt;directory&gt;]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>将存储库克隆到新创建的目录中，为克隆存储库中的每个分支创建远程跟踪分支（使用 <code>git branch --remotes</code> 可见），并创建、签出从克隆存储库当前活动的分支派生的初始分支。</p><p>-b &lt;名称&gt;：不将新创建的 HEAD 指向克隆存储库的 HEAD 所指向的分支，而是指向 <code>&lt;名称&gt;``分支。在非裸仓库中，这是将被检出的分支。 </code>–branch``&nbsp;也可以使用标签并在生成的存储库中的提交时分离 HEAD。</p></li></ul><h3 id="⭐git-commit"><a href="#⭐git-commit" class="headerlink" title="⭐git commit"></a>⭐git commit</h3><blockquote><p>记录仓库的变更</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git commit [-a | --interactive | --patch] [-s] [-v] [-u&lt;mode&gt;] [--amend]</span><br><span class="line">       [--dry-run] [(-c | -C | --squash) &lt;commit&gt; | --fixup [(amend|reword):]&lt;commit&gt;)]</span><br><span class="line">       [-F &lt;file&gt; | -m &lt;msg&gt;] [--reset-author] [--allow-empty]</span><br><span class="line">       [--allow-empty-message] [--no-verify] [-e] [--author=&lt;author&gt;]</span><br><span class="line">       [--<span class="built_in">date</span>=&lt;<span class="built_in">date</span>&gt;] [--cleanup=&lt;mode&gt;] [--[no-]status]</span><br><span class="line">       [-i | -o] [--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]]</span><br><span class="line">       [(--trailer &lt;token&gt;[(=|:)&lt;value&gt;])…​] [-S[&lt;keyid&gt;]]</span><br><span class="line">       [--] [&lt;pathspec&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>修改仓库中的内容使用此命令，将更改提交，一般附加 <code>-m(msg)</code> 参数来解释提交。</p></li></ul><h3 id="git-describe"><a href="#git-describe" class="headerlink" title="git describe"></a>git describe</h3><blockquote><p>查找提交中可到达的最近的标记</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git describe [--all] [--tags] [--contains] [--abbrev=&lt;n&gt;] [&lt;commit-ish&gt;…​]</span><br><span class="line">git describe [--all] [--tags] [--contains] [--abbrev=&lt;n&gt;] --dirty[=&lt;mark&gt;]</span><br><span class="line">git describe &lt;blob&gt;</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>如果标签指向提交，则只显示标签。 否则，它会在标记名称的后缀加上标记对象顶部的附加提交数量和最近提交的缩写对象名称。 结果是一个易读的对象名称，它也可用于识别对其他 git 命令的提交。</p></li></ul><h3 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h3><blockquote><p>differences。显示提交之间或提交与当前的更改。</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git diff [&lt;options&gt;] [&lt;commit&gt;] [--] [&lt;path&gt;…​]</span><br><span class="line">git diff [&lt;options&gt;] --cached [--merge-base] [&lt;commit&gt;] [--] [&lt;path&gt;…​]</span><br><span class="line">git diff [&lt;options&gt;] [--merge-base] &lt;commit&gt; [&lt;commit&gt;…​] &lt;commit&gt; [--] [&lt;path&gt;…​]</span><br><span class="line">git diff [&lt;options&gt;] &lt;commit&gt;…​&lt;commit&gt; [--] [&lt;path&gt;…​]</span><br><span class="line">git diff [&lt;options&gt;] &lt;blob&gt; &lt;blob&gt;</span><br><span class="line">git diff [&lt;options&gt;] --no-index [--] &lt;path&gt; &lt;path&gt;</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>显示提交之间或提交与当前的更改。当前工作内容与任一提交、索引与任一提交、提交之间的、合并结果、分支之间、文件系统下的不同文件。</p></li></ul><h3 id="⭐git-fetch"><a href="#⭐git-fetch" class="headerlink" title="⭐git fetch"></a>⭐git fetch</h3><blockquote><p>从仓库获取内容</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch [&lt;options&gt;] [&lt;repository&gt; [&lt;refspec&gt;…​]]</span><br><span class="line">git fetch [&lt;options&gt;] &lt;group&gt;</span><br><span class="line">git fetch --multiple [&lt;options&gt;] [(&lt;repository&gt; | &lt;group&gt;)…​]</span><br><span class="line">git fetch --all [&lt;options&gt;]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>从一个或者多个仓库获取分支或者 <code>tags</code> 标签中的内容。</p><p>git fetch 可以从单个命名存储库或 URL 中获取，或者如果给出 <group> 并且配置文件中有 remotes.<group> 条目，则可以一次从多个存储库中获取。</group></group></p></li></ul><h3 id="⭐git-init"><a href="#⭐git-init" class="headerlink" title="⭐git init"></a>⭐git init</h3><blockquote><p>初始化 Git 仓库</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git init [-q | --quiet] [--bare] [--template=&lt;template_directory&gt;]</span><br><span class="line">      [--separate-git-dir &lt;git <span class="built_in">dir</span>&gt;] [--object-format=&lt;format&gt;]</span><br><span class="line">      [-b &lt;branch-name&gt; | --initial-branch=&lt;branch-name&gt;]</span><br><span class="line">      [--shared[=&lt;permissions&gt;]] [directory]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>该命令创建一个空的 Git 存储库 - 本质上是一个&nbsp;<code>.git</code>&nbsp;目录，其中包含&nbsp;<code>objects</code>、<code>refs/heads</code>、<code>refs/tags和模板文件的子目录。还将创建一个引用master分支 HEAD 的初始 HEAD</code>&nbsp;文件。</p><p><img src="F:\MarkdownData\2022-09-10-21-55-35-image.png"></p><p>If the&nbsp;<code>$GIT_DIR</code>&nbsp;environment variable is set then it specifies a path to use instead of&nbsp;<code>./.git</code>&nbsp;for the base of the repository.</p><p>如果通过&nbsp;<code>$GIT_OBJECT_DIRECTORY</code>&nbsp;环境变量指定了对象存储目录，那么将在该目录下创建 sha1 目录，否则将使用默认的&nbsp;<code>$GIT_DIR/objects</code>&nbsp;目录。</p></li></ul><h3 id="⭐git-merge"><a href="#⭐git-merge" class="headerlink" title="⭐git merge"></a>⭐git merge</h3><blockquote><p>合并</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git merge [-n] [--<span class="built_in">stat</span>] [--no-commit] [--squash] [--[no-]edit]</span><br><span class="line">    [--no-verify] [-s &lt;strategy&gt;] [-X &lt;strategy-option&gt;] [-S[&lt;keyid&gt;]]</span><br><span class="line">    [--[no-]allow-unrelated-histories]</span><br><span class="line">    [--[no-]rerere-autoupdate] [-m &lt;msg&gt;] [-F &lt;file&gt;]</span><br><span class="line">    [--into-name &lt;branch&gt;] [&lt;commit&gt;…​]</span><br><span class="line">git merge (--<span class="built_in">continue</span> | --abort | --quit)</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>合并提交中的更改，执行 <code>git pull</code> 时会被使用。</p></li></ul><h3 id="⭐git-pull"><a href="#⭐git-pull" class="headerlink" title="⭐git pull"></a>⭐git pull</h3><blockquote><p>更新内容</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git push [--all | --mirror | --tags] [--follow-tags] [--atomic] [-n | --dry-run] [--receive-pack=&lt;git-receive-pack&gt;]</span><br><span class="line">       [--repo=&lt;repository&gt;] [-f | --force] [-d | --delete] [--prune] [-v | --verbose]</span><br><span class="line">       [-u | --set-upstream] [-o &lt;string&gt; | --push-option=&lt;string&gt;]</span><br><span class="line">       [--[no-]signed|--signed=(<span class="literal">true</span>|<span class="literal">false</span>|if-asked)]</span><br><span class="line">       [--force-with-lease[=&lt;refname&gt;[:&lt;expect&gt;]] [--force-if-includes]]</span><br><span class="line">       [--no-verify] [&lt;repository&gt; [&lt;refspec&gt;…​]]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>拉取仓库中的更新，并合并本地。</p></li></ul><h3 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h3><blockquote><p>变基。实际开发还是倾向于使用 <code>git merge</code></p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git rebase [-i | --interactive] [&lt;options&gt;] [--<span class="built_in">exec</span> &lt;cmd&gt;]</span><br><span class="line">    [--onto &lt;newbase&gt; | --keep-base] [&lt;upstream&gt; [&lt;branch&gt;]]</span><br><span class="line">git rebase [-i | --interactive] [&lt;options&gt;] [--<span class="built_in">exec</span> &lt;cmd&gt;] [--onto &lt;newbase&gt;]</span><br><span class="line">    --root [&lt;branch&gt;]</span><br><span class="line">git rebase (--<span class="built_in">continue</span> | --skip | --abort | --quit | --edit-todo | --show-current-patch)</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>合并当前分支与所选分支，并将此时提交作为新的基点。</p></li></ul><h3 id="⭐git-reset"><a href="#⭐git-reset" class="headerlink" title="⭐git reset"></a>⭐git reset</h3><blockquote><p>重置 <code>HEAD</code></p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git reset [-q] [&lt;tree-ish&gt;] [--] &lt;pathspec&gt;…​</span><br><span class="line">git reset [-q] [--pathspec-from-file=&lt;file&gt; [--pathspec-file-nul]] [&lt;tree-ish&gt;]</span><br><span class="line">git reset (--patch | -p) [&lt;tree-ish&gt;] [--] [&lt;pathspec&gt;…​]</span><br><span class="line">git reset [--soft | --mixed [-N] | --hard | --merge | --keep] [-q] [&lt;commit&gt;]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>重置 <code>HEAD</code>，达到跳转版本的目的。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commitId&gt;</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="⭐git-status"><a href="#⭐git-status" class="headerlink" title="⭐git status"></a>⭐git status</h3><blockquote><p>显示工作树状态</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status [&lt;options&gt;…​] [--] [&lt;pathspec&gt;…​]</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>显示索引文件和当前 HEAD 提交有差异的路径，工作树和索引文件有差异的路径，以及工作树中不被 Git 追踪的路径（也不被 <a href="https://git-scm.com/docs/gitignore/zh_HANS-CN">gitignore[5]</a> 忽略）。前者是你通过运行 “git commit “会提交的东西；第二和第三者是你在运行 “git commit “之前通过运行 “git add “可以提交的东西。</p></li></ul><h3 id="git-switch"><a href="#git-switch" class="headerlink" title="git switch"></a>git switch</h3><blockquote><p>切换分支</p></blockquote><ul><li><p>概述</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git switch [&lt;options&gt;] [--no-guess] &lt;branch&gt;</span><br><span class="line">git switch [&lt;options&gt;] --detach [&lt;start-point&gt;]</span><br><span class="line">git switch [&lt;options&gt;] (-c|-C) &lt;new-branch&gt; [&lt;start-point&gt;]</span><br><span class="line">git switch [&lt;options&gt;] --orphan &lt;new-branch&gt;</span><br></pre></td></tr></tbody></table></figure></li><li><p>描述</p><p>切换到指定分支。</p></li></ul><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>由于英语水平有限，官方的文档有些地方即使凭借翻译，理解起来也较为困难，部分内容来源于实践 + 猜测，不确保是否正确（欢迎指正，会跟进文章内容）。阅读了官方的文档，才知道 <code>Git</code> 如此强大，日常用到的只不过冰山一角。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;总述&quot;&gt;&lt;a href=&quot;#总述&quot; class=&quot;headerlink&quot; title=&quot;总述&quot;&gt;&lt;/a&gt;总述&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;Git 是一个快速的、可扩展的、分布的版本控制系统，它具有丰富的命令控制指令，并提供高级的操作。&lt;/p&gt;
&lt;/bl</summary>
      
    
    
    
    
    <category term="Git" scheme="https://kangblogs.top/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 学习 - ZooKeeper</title>
    <link href="https://kangblogs.top/posts/1d6454dd.html"/>
    <id>https://kangblogs.top/posts/1d6454dd.html</id>
    <published>2022-03-30T03:13:31.000Z</published>
    <updated>2022-07-10T09:49:20.756Z</updated>
    
    <content type="html"><![CDATA[<h1 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h1><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> apache-zookeeper-3.8.0-bin/conf/</span><br><span class="line"><span class="built_in">cp</span> zoo_sample.cfg zoo.cfg</span><br><span class="line">vim zoo.cfg</span><br></pre></td></tr></tbody></table></figure><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># The number of milliseconds of each tick</span><br><span class="line">tickTime=2000</span><br><span class="line"># The number of ticks that the initial </span><br><span class="line"># synchronization phase can take</span><br><span class="line">initLimit=10</span><br><span class="line"># The number of ticks that can pass between </span><br><span class="line"># sending a request and getting an acknowledgement</span><br><span class="line">syncLimit=5</span><br><span class="line"># the directory where the snapshot is stored.</span><br><span class="line"># do not use /tmp for storage, /tmp here is just </span><br><span class="line"># example sakes.</span><br><span class="line">dataDir=/usr/local/hadoop/tmp/zookeeper/data</span><br><span class="line">dataLogDir=/usr/local/hadoop/tmp/zookeeper/log</span><br><span class="line"># the port at which the clients will connect</span><br><span class="line">clientPort=2181</span><br><span class="line"># the maximum number of client connections.</span><br><span class="line"># increase this if you need to handle more clients</span><br><span class="line">#maxClientCnxns=60</span><br><span class="line">#</span><br><span class="line"># Be sure to read the maintenance section of the </span><br><span class="line"># administrator guide before turning on autopurge.</span><br><span class="line">#</span><br><span class="line"># https://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance</span><br><span class="line">#</span><br><span class="line"># The number of snapshots to retain in dataDir</span><br><span class="line">#autopurge.snapRetainCount=3</span><br><span class="line"># Purge task interval in hours</span><br><span class="line"># Set to "0" to disable auto purge feature</span><br><span class="line">#autopurge.purgeInterval=1</span><br><span class="line"></span><br><span class="line">## Metrics Providers</span><br><span class="line">#</span><br><span class="line"># https://prometheus.io Metrics Exporter</span><br><span class="line">#metricsProvider.className=org.apache.zookeeper.metrics.prometheus.PrometheusMetricsProvider</span><br><span class="line">#metricsProvider.httpHost=0.0.0.0</span><br><span class="line">#metricsProvider.httpPort=7000</span><br><span class="line">#metricsProvider.exportJvmInfo=true</span><br><span class="line"></span><br><span class="line">server.0=0.0.0.0:2888:3888</span><br><span class="line">server.1=&lt;node1hostname&gt;:2888:3888</span><br><span class="line">server.2=&lt;node2hostname&gt;:2888:3888</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;配置文件&quot;&gt;&lt;a href=&quot;#配置文件&quot; class=&quot;headerlink&quot; title=&quot;配置文件&quot;&gt;&lt;/a&gt;配置文件&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutte</summary>
      
    
    
    
    
    <category term="Hadoop" scheme="https://kangblogs.top/tags/Hadoop/"/>
    
    <category term="ZooKeeper" scheme="https://kangblogs.top/tags/ZooKeeper/"/>
    
    <category term="Linux" scheme="https://kangblogs.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 学习：环境搭建</title>
    <link href="https://kangblogs.top/posts/d92cf058.html"/>
    <id>https://kangblogs.top/posts/d92cf058.html</id>
    <published>2022-03-15T16:39:29.000Z</published>
    <updated>2022-07-10T09:53:09.045Z</updated>
    
    <content type="html"><![CDATA[<h1 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h1><p>此次流程记录是 Ubuntu Server 20.04 系统下 Hadoop 集群的搭建。Linux 和 Windows 所需软件包括：（1）Java 1.5.x 及以上，必须安装，建议选择 Java 8 版本。（2）ssh 必须安装并且保证 sshd 一直运行，以便用 Hadoop 脚本管理远端 Hadoop 守护进程。</p><h1 id="软件下载"><a href="#软件下载" class="headerlink" title="软件下载"></a>软件下载</h1><p>Mobaxterm：一款多功能的远程连接工具，支持多种协议，自带 SFTP 功能，<a href="https://mobaxterm.mobatek.net/download.html">下载链接</a>；<br><img src="https://i0.hdslb.com/bfs/album/b7ce2045305201a6176074488bce7274b04855f7.png" alt="20220316004252"><br>Java：Java 8 是目前使用最为广泛的版本（可能是因为 Java 版本迭代所带来的学习成本问题），自此安装也是选择 Java 8 为运行环境，方便维护，<a href="https://www.oracle.com/java/technologies/downloads/#java8-linux">下载链接</a>；</p><p><img src="https://i0.hdslb.com/bfs/album/096e632432f26972e569a8a4f7a66a0878d42a08.png" alt="20220316004305"><br>SSH：集群的工作环境需要远程连接进行管理，通过对 master 和 slaves 安装 SSH 服务，方便管理。Ubuntu 安装 SSH 服务命令 apt-get install openssh-server。</p><p><img src="https://i0.hdslb.com/bfs/album/b87a02eca688596c2fc88a935d345c328c956a0d.png" alt="20220316004315"><br>Hadoop：此次安装的重头戏，前往 Apache 官方网站下载即可，<a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.3.2/hadoop-3.3.2.tar.gz">https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.3.2/hadoop-3.3.2.tar.gz</a></p><p><img src="https://i0.hdslb.com/bfs/album/0ea86f58500b689ea1957cf2d7dd6303b6fcd12b.png" alt="20220316004323"></p><h1 id="软件的安装和配置"><a href="#软件的安装和配置" class="headerlink" title="软件的安装和配置"></a>软件的安装和配置</h1><h2 id="Mobaxterm的安装"><a href="#Mobaxterm的安装" class="headerlink" title="Mobaxterm的安装"></a>Mobaxterm 的安装</h2><p>Mobaxterm 下载后，双击安装包进行安装，经典的 “下一步”，并进行安装位置的选择，完成安装。</p><p><img src="https://i0.hdslb.com/bfs/album/b0c6b7ba5da6ec33631936c88c90a7c603d419c6.png" alt="20220316004331"></p><h2 id="SSH的安装"><a href="#SSH的安装" class="headerlink" title="SSH的安装"></a>SSH 的安装</h2><p>Ubuntu 安装后默认就具有 SSH 服务，由于未进行配置，此时还是个单向的服务，“只出不进”—— 能通过 SSH 命令远程连接其他主机，其他主机不能通过 SSH 访问本机。安装 OpenSSH，在 Terminal 中输入命令：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install openssh-server</span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/f1562f9b487b53703db9600b7af10ddeaee5f455.png" alt="20220316004341"></p><h2 id="配置SSH"><a href="#配置SSH" class="headerlink" title="配置SSH"></a>配置 SSH</h2><p>新建 root 用户，键入命令 passwd root，并输入、确定密码。<br>首先，编辑系统或者重要服务配置文件时，做好备份。键入命令</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> /etc/ssh/sshd_config /etc/ssh/sshd_config.bak</span><br></pre></td></tr></tbody></table></figure><p>再通过 Vim 进行 SSH 的配置，</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></tbody></table></figure><p>添加一行 PermitRootLogin yes，按键盘 Esc，输入英文冒号、wq，推出并保存。再重启 SSH 服务：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service ssh restart</span><br></pre></td></tr></tbody></table></figure><h2 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h2><p>在虚拟主机 Terminal 中输入 ip addr，查看默认分配的 IP 地址。</p><p><img src="https://i0.hdslb.com/bfs/album/e05a4a8821a44fd56674711d26c128cdd4d8a4a8.png" alt="20220316004355"><br>打开 Mobaxterm，进行远程连接配置，新建远程连接任务，选择协议类型，根据上一步获取的信息，在 Mobaxterm 中输入虚拟主机的相关信息。</p><p><img src="https://i0.hdslb.com/bfs/album/89eb634cbb071b3c1ee008e41c2b0752dfdff55d.png" alt="20220316004403"><br>输入之前配置的 root 账户的密码，完成远程连接。</p><p><img src="https://i0.hdslb.com/bfs/album/30f8c8b5ed636ff03cbfaecc0fdc2c55388242f8.png" alt="20220316004410"></p><h2 id="Java的安装和配置"><a href="#Java的安装和配置" class="headerlink" title="Java的安装和配置"></a>Java 的安装和配置</h2><p>使用的 Mobaxterm 的 SFTP 的功能，支持拖拽上传，直接将下载的 Java 8 打包压缩包拖至文件夹中。由于处在内网环境下，传输速率应该会很快。</p><p><img src="https://i0.hdslb.com/bfs/album/7f6aab765da0b54558a875fba6be162dfdca0038.png" alt="20220316004420"><br>进入到 Java 8 所在文件夹，进行解压</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-8u321-linux-x64.tar.gz</span><br></pre></td></tr></tbody></table></figure><p>配置环境变量，<code>vim /etc/profile</code>，在末尾添加语句，配置环境变量。</p><figure class="highlight profile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JAVA_HOME=/path/to/java/jdk1.8.0_321</span><br><span class="line">PATH=$PATH:$HOME/bin:$JAVA_HOME/bin</span><br><span class="line">export JAVA_HOME</span><br><span class="line">export PATH</span><br></pre></td></tr></tbody></table></figure><p>重载环境变量配置文件 <code>source /etc/profile</code>，并检查 Java 是否配置完成 <code>java -version</code>。<br><img src="https://i0.hdslb.com/bfs/album/9dcc6efe50f37d1661313889fc450753d33ca251.png" alt="20220316004434"></p><h2 id="Hadoop的安装和配置"><a href="#Hadoop的安装和配置" class="headerlink" title="Hadoop的安装和配置"></a>Hadoop 的安装和配置</h2><p>重复安装 Java 时的步骤，拖拽上传 Hadoop 压缩包，并进行解压，验证安装。<br><img src="https://i0.hdslb.com/bfs/album/5b229abdb1627ceeeb8978468d116a493a63ad04.png" alt="20220316004452"></p><h1 id="Hadoop分布式配置"><a href="#Hadoop分布式配置" class="headerlink" title="Hadoop分布式配置"></a>Hadoop 分布式配置</h1><h2 id="克隆虚拟主机"><a href="#克隆虚拟主机" class="headerlink" title="克隆虚拟主机"></a>克隆虚拟主机</h2><p>将配置好的已有主机（Master）克隆两台（Node1、Node2）。</p><p>在克隆选项时，需注意选择 “创建完整克隆”，否则后续步骤将失败。</p><p><img src="https://i0.hdslb.com/bfs/album/dd82b79c73a7ab79ea84edad5b9b72c1a57e5fb6.png" alt="20220316004534"></p><h2 id="配置网络和主机名"><a href="#配置网络和主机名" class="headerlink" title="配置网络和主机名"></a>配置网络和主机名</h2><p>由于 VMware 克隆机制，会将源主机的所有信息原封不动得复制一份，包括软件和硬件信息。所以需要对克隆的 Nodes 的网络进行配置。</p><ul><li>生成 MAC 地址。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/73d633600ac47904370f62ba18dc6c82ee5fa45b.png" alt="20220316004542"></p><ul><li>配置 IP 和网关，分别对三个主机进行配置。使用 shell 命令 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim etc/netplan/00-installer-config.yaml</span><br></pre></td></tr></tbody></table></figure>对网络进行配置。使用 netplan –debug apply 使得配置生效。<figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This is the network config written by 'subiquity'</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line">  <span class="attr">ethernets:</span></span><br><span class="line">    <span class="attr">ens33:</span></span><br><span class="line">      <span class="attr">addresses:</span> [<span class="number">192.168</span><span class="string">.***.***/24</span>]</span><br><span class="line">      <span class="attr">gateway4:</span> <span class="number">192.168</span><span class="string">.***.2</span></span><br><span class="line">      <span class="attr">nameservers:</span></span><br><span class="line">        <span class="attr">addresses:</span> [<span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>, <span class="number">8.8</span><span class="number">.4</span><span class="number">.4</span>]</span><br><span class="line">      <span class="attr">dhcp4:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure><img src="https://i0.hdslb.com/bfs/album/1013dfea611becd1fb98fa274678fd80b8cfb822.png" alt="20220316004549"></li><li>修改主机名 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname</span><br></pre></td></tr></tbody></table></figure>分别为 master、node1、node2。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/a1c373849fc076ab91a1ff9ea5065861e6f49078.png" alt="20220316004557"></p><h2 id="分布式集群"><a href="#分布式集群" class="headerlink" title="分布式集群"></a>分布式集群</h2><p>经过上述步骤，再通过 Mobaxterm 连接这三台主机（master、node1、node2）。</p><p><img src="https://i0.hdslb.com/bfs/album/4c95973a43182e186b8c0f412ecd630078300242.png" alt="20220316004604"></p><ul><li>防火墙：分别关闭这三台主机的防火墙，并不允许防火墙自启。在 Ubuntu 20.04 版本中，<code>ufw status</code> 防火墙默认时关闭（inactive）状态。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/0d2d0044469475a699b6b34a3cf8622d2fdd44c1.png" alt="20220316004612"></p><ul><li>SSH 免密：在 master 主机执行 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></tbody></table></figure>生成密钥文件，生成过程一路回车即可，并使用 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i node1</span><br><span class="line">ssh-copy-id -i node2</span><br></pre></td></tr></tbody></table></figure>命令，该命令的作用其实就是将密钥复制到 node1 和 node2 的 /root/.ssh/authorized_keys 文件中，方法不限，也可手动将密钥复制到两个节点的 /root/.ssh/authorized_keys 文件中去，能达到同样的效果。实现 master 能够免密登录到 node1 和 node2。为后续的工作打好基础。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/254df28f5744452c81f646427959eeb597ca45db.png" alt="20220316004619"></p><ul><li>IP 映射：修改 master 主机 IP hosts 映射，vim /etc/hosts。在 node1、node2 中做出相同的配置，或者使用命令 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp /etc/hosts node&lt;<span class="built_in">id</span>&gt;:/etc/hosts</span><br></pre></td></tr></tbody></table></figure></li></ul><p><img src="https://i0.hdslb.com/bfs/album/4c33e4e5b3aa78982e3c51c38ccdaf2ee46ad16d.png" alt="20220316004627"></p><ul><li>Hadoop 配置文件：修改 master 主机的 Hadoop 配置文件 workers（/path/to/hadoop/etc/hadoop/workers），向其中添加主机名 node1、node2 或者二者对应的 IP。修改 hadoop-env.sh（/path/to/hadoop/etc/hadoop/hadoop-env.sh），添加 Java 安装的根目录。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/d4da21c2e91869f6d61704672cc12d2e66f5ccb2.png" alt="20220316004634"><br>修改 core-site.xml 文件，hdfs 监听端口、Hadoop 临时文件夹内容因人而异。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:12369<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.trash.interval<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1440<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/ad44d3d321be1e4d2ffec82e62eb4a5d48ac74c4.png" alt="20220316004640"><br>修改 hdfs-site.xml 配置文件。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.http.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>0.0.0.0:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/37daf2d0ed3f5a9f05d434dd818bb7c2b7e1ff2d.png" alt="20220316004646"><br>修改 yarn-site.xml 配置文件。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/33621e5b79f9bb43c90a9e95b3ba40443d662158.png" alt="20220316004659"><br>修改 mapred-site.xml 配置文件。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span>?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the "License");</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>master:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/4a40ac0576b073778f001a5902d20a3c8a248225.png" alt="20220316004707"></p><ul><li>拷贝 master 主机已经配置完毕的 hadoop 到 node1 和 node2 中 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -rf /usr/local/hadoop/hadoop-3.3.2 node&lt;<span class="built_in">id</span>&gt;:/usr/local/hadoop/</span><br></pre></td></tr></tbody></table></figure>此时应该是覆盖了。</li><li>启动 Hadoop：输入 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/hadoop/hadoop-3.3.2/bin/hdfs namenode -format</span><br></pre></td></tr></tbody></table></figure>命令生成初始化文件。运行启动键本：<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/hadoop/hadoop-3.3.2/sbin/start-all.sh</span><br></pre></td></tr></tbody></table></figure></li></ul><p><img src="https://i0.hdslb.com/bfs/album/9e87c3168587968ec25201a28418fd6fdcd89475.png" alt="20220316004716"></p><ul><li>大功告成！。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/ec0a6de0911e88fae4c97a4c924cc04f3a2498bd.png" alt="20220316004724"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;环境要求&quot;&gt;&lt;a href=&quot;#环境要求&quot; class=&quot;headerlink&quot; title=&quot;环境要求&quot;&gt;&lt;/a&gt;环境要求&lt;/h1&gt;&lt;p&gt;此次流程记录是 Ubuntu Server 20.04 系统下 Hadoop 集群的搭建。Linux 和 Windows 所</summary>
      
    
    
    
    
    <category term="Hadoop" scheme="https://kangblogs.top/tags/Hadoop/"/>
    
    <category term="Linux" scheme="https://kangblogs.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Hadoop 学习：虚拟机的安装</title>
    <link href="https://kangblogs.top/posts/ed4099cb.html"/>
    <id>https://kangblogs.top/posts/ed4099cb.html</id>
    <published>2022-03-15T15:37:29.000Z</published>
    <updated>2022-07-10T09:54:53.442Z</updated>
    
    <content type="html"><![CDATA[<h1 id="虚拟机及Linux安装"><a href="#虚拟机及Linux安装" class="headerlink" title="虚拟机及Linux安装"></a>虚拟机及 Linux 安装</h1><h2 id="所需工具和相关软件"><a href="#所需工具和相关软件" class="headerlink" title="所需工具和相关软件"></a>所需工具和相关软件</h2><p>PC 机一台、Windows 11 操作系统、Ubuntu 20.04 镜像、VMware Workstation 软件。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><ul><li>VMware Workstation 软件的下载：前往官网 <a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html%EF%BC%8C%E7%82%B9%E5%87%BB%E4%B8%8B%E8%BD%BD%E5%8D%B3%E5%8F%AF%EF%BC%8C%E6%9C%AC%E4%BA%BA%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%98%AF%E5%AE%98%E7%BD%91%E6%89%80%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%80%E6%96%B0%E7%89%88VMware">https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html，点击下载即可，本人下载的是官网所提供的最新版 VMware</a> Workstation 16 Pro。<br><img src="https://i0.hdslb.com/bfs/album/404948ccbe20300700550f93586709b5971bed64.png" alt="20220316001711"></li><li>Ubuntu 镜像的下载：前往官网下载链接 <a href="https://ubuntu.com/download/desktop/thank-you?version=20.04.4&amp;architecture=amd64%EF%BC%8C%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%98%AFLTS%EF%BC%88%E9%95%BF%E6%9C%9F%E6%94%AF%E6%8C%81%EF%BC%89%E7%89%88%E6%9C%AC%E3%80%82">https://ubuntu.com/download/desktop/thank-you?version=20.04.4&amp;architecture=amd64，下载的是 LTS（长期支持）版本。</a></li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li>VMware Workstation 16 Pro 的安装：双击下载的 Workstation 16 Pro 进行安装，可能会出现要求重启完成安装配置的要求，点击 “是” 重启其即可。重启后并没有继续安装进程，再次双击安装包进行安装。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/3a3aac33eab11d6a0a641843245dca7783326c9e.png" alt="20220316001731"><br>接下来就是 Windows 式的 “下一步”。在安装过程中提示 “安装程序检测到主机启用了 Hyper-V……”，勾选左下角 “自动安装 Windows Hypervisor Platform (WHP)” 即可。继续完成安装。</p><p><img src="https://i0.hdslb.com/bfs/album/bb02560193fc779841447ce4f70f475c206efeb8.png" alt="20220316001745"></p><ul><li>Ubuntu 20.04 的安装：打开已安装的 VMware Workstation 16 Pro，创建新的虚拟机。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/02a82d49685b49f52c363bcc02dfcff039353f34.png" alt="20220316001754"></p><ul><li>选择 “典型” 安装，并点击 “下一步”，浏览选中下载的 Ubuntu 20.04 镜像。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/6cc351bc7baa8e5ffbfbc96e43631fffb00a42f5.png" alt="20220316001829"></p><ul><li>点击 “下一步”，配置 Ubuntu 系统的相关信息（全名、用户名、密码）。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/23fc3ea08555e02a4140f8f676cd8081d2d1ccc8.png" alt="20220316001841"></p><ul><li>接着又是一通 “下一步”，最大磁盘大小按需分配。自定义硬件可按需分配内存大小，并可对网络通信模式进行选择和配置。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/4ecee33f3e856e0eefcfc523ab7497eda7214d8e.png" alt="20220316001849"></p><ul><li>点击开启此虚拟机进行系统安装，等待…… 最终进入系统，如图 3-7 所示。简易安装会自动配置 VMware Tools。</li></ul><p><img src="https://i0.hdslb.com/bfs/album/17db65f73078ae1f48ec06df02ed5c6c84c9f6d1.png" alt="20220316001917"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;虚拟机及Linux安装&quot;&gt;&lt;a href=&quot;#虚拟机及Linux安装&quot; class=&quot;headerlink&quot; title=&quot;虚拟机及Linux安装&quot;&gt;&lt;/a&gt;虚拟机及 Linux 安装&lt;/h1&gt;&lt;h2 id=&quot;所需工具和相关软件&quot;&gt;&lt;a href=&quot;#所需工具和相</summary>
      
    
    
    
    
    <category term="Hadoop" scheme="https://kangblogs.top/tags/Hadoop/"/>
    
    <category term="VMware WorkStation" scheme="https://kangblogs.top/tags/VMware-WorkStation/"/>
    
  </entry>
  
  <entry>
    <title>NAT 穿透 - CloudFlare</title>
    <link href="https://kangblogs.top/posts/f5398100.html"/>
    <id>https://kangblogs.top/posts/f5398100.html</id>
    <published>2022-02-04T06:23:17.000Z</published>
    <updated>2022-02-07T15:19:16.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>过年在家，闲来无事到处翻一翻，竟然发现一台十年前的老机子，准备搞一波事情 —— <code>内网穿透</code>。思索良久，最终选择了 CloudFlare 家的 Argo Tunnel 服务，因为其配置较为方便，而且<code>免费</code>。其实一开始考虑使用 <a href="https://gofrp.org/">frp</a>，但是其工作时需要一台具有公网 IP 的主机做监听和转发服务，集群式的应用场景不满足我目前的需求。</p><h1 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h1><h2 id="系统选择"><a href="#系统选择" class="headerlink" title="系统选择"></a>系统选择</h2><table><thead><tr><th align="center">OS</th><th align="center"> 选择</th></tr></thead><tbody><tr><td align="center"> Windows</td><td align="center"> 需求是内网穿透做服务器，2H2G 的小老机并不适合安装 Windows</td></tr><tr><td align="center">Ubuntu</td><td align="center"> 服务器首选，但是在安装时总是卡死 (猜测是硬件问题)</td></tr><tr><td align="center">Arch</td><td align="center"> 安装配置较为繁琐，虽然有一键安装脚本，但是考虑到<code>十年前的机器</code>，还是算了</td></tr><tr><td align="center"> Manjaro</td><td align="center"> 安装成功，却总因为网络问题卡死</td></tr><tr><td align="center"> Mint</td><td align="center"> 安装成功，运行效果尚可</td></tr></tbody></table><h2 id="启动盘制作"><a href="#启动盘制作" class="headerlink" title="启动盘制作"></a>启动盘制作</h2><div class="note info flat"><p><a href="http://rufus.ie/zh/">Rufus</a>、U 盘 (32GB)、<a href="https://www.linuxmint.com/download.php">Linux Mint 20.3</a> Cinnamon Edition</p></div><p>使用 Rufus 以 DD 方式制作镜像。</p><h2 id="安装-Mint"><a href="#安装-Mint" class="headerlink" title="安装 Mint"></a>安装 Mint</h2><p>进 BIOS 花费了本人不少时间（大无语事件），启动时左下角显示 <code>F12</code> 进入 BIOS 设置，可是怎么按都不顶用，<code>F12</code>、<code>FN+F12</code>、<code>Shift+F12</code>…… 一堆组合键都尝试过，后来不知按到哪个键突然弹出启动项选择，进入并成功安装系统后才发现键盘坏了，思考一下，应该是按到了 <code>F9</code>😀。算是一个小插曲。<br>由于是全盘安装，安装过程基本无脑，Windows 式的 “下一步”，不再赘述。<br><img src="https://i0.hdslb.com/bfs/album/989c5f137ec7d843900d8491754cf22b1c61dbd8.png" alt="20220204190003"></p><h1 id="NAT-穿透"><a href="#NAT-穿透" class="headerlink" title="NAT 穿透"></a>NAT 穿透</h1><p>系统安装完成，此时这台机子却只有个 “单向门”—— 只能出不能进，需要配置公网 IP，才能满足成为服务器的这一需求，CloudFlare 的 Argo Tunnel 服务可以完成对端口的监听和响应，关键还免费。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在 CloudFlare 上新建网站并在域名服务商将域名的 DNS 配置成 CloudFlare 所提供的 DNS 服务器。等待响应完成。</p><figure class="highlight txt"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arely.ns.cloudflare.com</span><br><span class="line">memphis.ns.cloudflare.com</span><br></pre></td></tr></tbody></table></figure><h2 id="安装-CloudFlared"><a href="#安装-CloudFlared" class="headerlink" title="安装 CloudFlared"></a>安装 CloudFlared</h2><p>官方在 Linux 上的支持很全面。</p><table><thead><tr><th align="center">Type</th><th align="center">amd64/x86-64</th><th align="center">x86(32-bit)</th><th align="center">ARM ARM64</th></tr></thead><tbody><tr><td align="center">.deb</td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb">Download</a></td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-386.deb">Download</a></td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm.deb">Download</a></td></tr><tr><td align="center">.rpm</td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm">Download</a></td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-386.rpm">Download</a></td><td align="center"><a href="https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm.rpm">Download</a></td></tr></tbody></table><ul><li>.deb 安装 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb dpkg -i cloudflared-linux-amd64.deb</span><br></pre></td></tr></tbody></table></figure></li><li>.rpm 安装 <figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -q https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="Cloudflared-验证"><a href="#Cloudflared-验证" class="headerlink" title="Cloudflared 验证"></a>Cloudflared 验证</h2><p>通过执行命令行登录 CloudFlare ，进行账户验证。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel login</span><br></pre></td></tr></tbody></table></figure><h2 id="创建隧道"><a href="#创建隧道" class="headerlink" title="创建隧道"></a>创建隧道</h2><p>通过 CloudFlared 应用创建隧道并命名。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel create &lt;NAME&gt;</span><br></pre></td></tr></tbody></table></figure><p>此时会在<code>.cloudflared/</code> 目录下生成一个 JSON 文件，前缀为 UUID<code>&lt;UUID&gt;.json</code>。</p><h2 id="单隧道执行"><a href="#单隧道执行" class="headerlink" title="单隧道执行"></a>单隧道执行</h2><p>如果执行单隧道，可通过 cloudflared 创建 DNS 解析记录，并采取映射方法实现对本机端口的监听（支持多种协议）。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cloudflared tunnel route dns &lt;UUID or NAME&gt; &lt;hostname&gt;</span><br><span class="line">cloudflared tunnel --hostname *.example.com --url http://localhost:port</span><br></pre></td></tr></tbody></table></figure><h2 id="多隧道执行"><a href="#多隧道执行" class="headerlink" title="多隧道执行"></a>多隧道执行</h2><p>在<code>.cloudflared/</code> 目录下创建 <code>config.yml</code> 文件。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim config.yml</span><br></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tunnel:</span> <span class="string">&lt;Tunnel-UUID&gt;</span></span><br><span class="line"><span class="attr">credentials-file:</span> <span class="string">/root/.cloudflared/&lt;Tunnel-UUID&gt;.json</span></span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">*.example.com</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">http://localhost:80</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">*.example.com</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">ssh://localhost:22</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">service:</span> <span class="string">http_status:404</span></span><br></pre></td></tr></tbody></table></figure><p>启动隧道：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cloudflare tunnel run &lt;NAME or UUID&gt;</span><br></pre></td></tr></tbody></table></figure><p>通过 hostname 即可访问部署的网络应用或本机应用。</p><h2 id="关于-HTTPS"><a href="#关于-HTTPS" class="headerlink" title="关于 HTTPS"></a>关于 HTTPS</h2><p>关于 HTTPS，在<a href="https://www.lifeng.in/12895.html">李峰</a>大佬博客中看到了这样的方法。<br><img src="https://i0.hdslb.com/bfs/album/0b87d441697404183ba410cf2a38875d01d2951f.png" alt="20220204205239"><br>本人并未配置成功，在配置文件中加入 <code>noTLSVerify: true</code> 也无济于事，最后一顿捣鼓才发现，只要在 CloudFlare 站点配置中打开<code>始终使用 HTTPS</code> 这一设置即可，无需有其他操作，可能官方为了简化 Tunnel 配置流程做了更新，好评👍。<br><img src="https://i0.hdslb.com/bfs/album/bcc7174c9a01716dc1037fd27188e98d2ad38a6f.png" alt="20220204205419"></p><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="站点搭建"><a href="#站点搭建" class="headerlink" title="站点搭建"></a>站点搭建</h3><div class="note info flat"><p>大学一年级时，一向对 “无脑化” 的操作表示反感，拒绝一键式的操作，往底层挖，越挖越深…… 但是经过一两年的 “磨练”，才知道时间就是金钱，不然真得熬夜啊！<del>宝塔真香</del></p></div><p>搭建宝塔，安装 <code>Nginx</code>，建立站点，修改 <code>config.yml</code> 配置文件，重启 <code>cloudflared</code> 服务。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Nginx 80 端口</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">*.example.com</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">http://localhost:80</span></span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/0fc6fddcfd48ad31e18b4acaef36d6c8f43c9c1f.png" alt="20220207230333"></p><h3 id="SSH-远程连接"><a href="#SSH-远程连接" class="headerlink" title="SSH 远程连接"></a>SSH 远程连接</h3><p>配置文件 <code>config.yml</code> 新增：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SSH 22 端口</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">hostname:</span> <span class="string">ssh.example.com</span></span><br><span class="line">    <span class="attr">service:</span> <span class="string">ssh://localhost:22</span></span><br></pre></td></tr></tbody></table></figure><p>服务器端重启 <code>cloudflared</code> 服务，主机也需安装 <code>cloudflared</code> ，并在 <code>C:\Users\&lt;name&gt;\.ssh\config</code> 新增：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Host ssh.example.cf</span><br><span class="line">ProxyCommand C:/Program Files (x86)/cloudflared/cloudflared(cloudflared安装位置) access ssh --hostname %h</span><br></pre></td></tr></tbody></table></figure><p><img src="https://i0.hdslb.com/bfs/album/e266912d115a15c008e91fd92ef97edf06f6a37e.png" alt="20220207231232"></p><h3 id="简单-Web-应用"><a href="#简单-Web-应用" class="headerlink" title="简单 Web 应用"></a>简单 Web 应用</h3><p>搭建了一个青龙面板，代理原理和操作过程同上，在配置文件 <code>config.yml</code> 新增 Web 应用的端口和指定域名。<br><img src="https://i0.hdslb.com/bfs/album/c42a96e2b22912397bc705a04c4b052f1e60a790.png" alt="20220207231601"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>内网穿透，从思考、搜索到实践，前前后后折腾了一下午，期间也遇到了不少困难，但，有意义！从体验上来看，响应速度并不友好，尤其是在 SSH 远程连接时，有感知性的延迟，但是一想到<code>十年老机</code>、<code>免费</code>…… 还要什么自行车！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;过年在家，闲来无事到处翻一翻，竟然发现一台十年前的老机子，准备搞一波事情 —— &lt;code&gt;内网穿透&lt;/code&gt;。思索良久，最终选择了 C</summary>
      
    
    
    
    
    <category term="内网穿透" scheme="https://kangblogs.top/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    
    <category term="CloudFlare" scheme="https://kangblogs.top/tags/CloudFlare/"/>
    
    <category term="Mint" scheme="https://kangblogs.top/tags/Mint/"/>
    
  </entry>
  
  <entry>
    <title>储 “物” 间（五）</title>
    <link href="https://kangblogs.top/posts/865fc504.html"/>
    <id>https://kangblogs.top/posts/865fc504.html</id>
    <published>2022-01-01T05:11:43.000Z</published>
    <updated>2022-01-01T05:11:47.000Z</updated>
    
    <content type="html"><![CDATA[<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><p><meting-js name="2021年12月31日物联网新闻" artist="冯站长之家" url="https://res.wx.qq.com/voice/getvoice?mediaid=MzA5OTQyMDgyOV8yNjUyNjI0ODY3" cover="https://cdn.jsdelivr.net/gh/flipped-1121/BlogPictures/flipped-1121-PIC/20211109231424.png"><br></meting-js></p><h1 id="物联网头条"><a href="#物联网头条" class="headerlink" title="物联网头条"></a>物联网头条</h1><h2 id="商汤科技正式登陆港交所"><a href="#商汤科技正式登陆港交所" class="headerlink" title="商汤科技正式登陆港交所"></a>商汤科技正式登陆港交所</h2><p>商汤科技昨日在港交所上市，涨幅一度扩大至超 20%，总市值超 1400 亿港元。据悉，经历此前 12 轮融资后，商汤科技已成为全球估值最高、最有价值的人工智能创业公司。，截至今日收盘，商汤科技报 4.130 港元 / 股，总市值为 1374.56 亿港元（约合人民币 1124.39 亿元）。</p><h1 id="底层技术、通信、网络安全"><a href="#底层技术、通信、网络安全" class="headerlink" title="底层技术、通信、网络安全"></a>底层技术、通信、网络安全</h1><h2 id="SK海力士完成接管英特尔闪存业务及国内工厂"><a href="#SK海力士完成接管英特尔闪存业务及国内工厂" class="headerlink" title="SK海力士完成接管英特尔闪存业务及国内工厂"></a>SK 海力士完成接管英特尔闪存业务及国内工厂</h2><p>日前，国内监管部门批准了 SK 海力士 90 亿美元收购 Intel 闪存业务的交易，至此双方的法律审核阶段已经完成。SK 海力士昨日完成了第一阶段的后续流程，包括从英特尔接管 SSD 业务及其位于中国大连 NAND 闪存制造厂的资产，作为对价，SK 海力士将向英特尔支付 70 亿美元。</p><h2 id="美国法院判决6GHz频段无需授权"><a href="#美国法院判决6GHz频段无需授权" class="headerlink" title="美国法院判决6GHz频段无需授权"></a>美国法院判决 6GHz 频段无需授权</h2><p>在美国，6GHz 频段原本是受限制的，FCC 联邦通信委员会去年 4 月份宣布释放 6GHz 频段，开放 6GHz 频段的 1200MHz 频谱为非授权使用，但美国运营商 AT&amp;T 对此决定表示不满，认为开放 6G 频段会影响他们的智能电表、消防甚至微波、电视广播等服务，因此将 FCC 告上法庭。日前美国哥伦比亚特区巡回上诉法院做出了判决，支持了 FCC 的决定，也就是说允许开放 6GHz 频段。</p><h2 id="长江存储发布首款PCIe-4-0-SSD"><a href="#长江存储发布首款PCIe-4-0-SSD" class="headerlink" title="长江存储发布首款PCIe 4.0 SSD"></a>长江存储发布首款 PCIe 4.0 SSD</h2><p>日前，长江存储宣布原厂 SSD 品牌更名为 “致态”，同时正式发布了旗下首款 PCIe 4.0 SSD，型号为 “致态 TiPro7000”，搭载英韧科技 Rainier IG5236 主控制器，八通道设计，12nm 制造工艺，顺序读写最高可以跑到 7.4GB/s、6.7GB/s，4K 随机读写最高则是 85 万 IOPS、105 万 IOPS。</p><h1 id="B2B：智能制造、机器人"><a href="#B2B：智能制造、机器人" class="headerlink" title="B2B：智能制造、机器人"></a>B2B：智能制造、机器人</h1><h2 id="马斯克谈特斯拉机器人：或能成人类朋友"><a href="#马斯克谈特斯拉机器人：或能成人类朋友" class="headerlink" title="马斯克谈特斯拉机器人：或能成人类朋友"></a>马斯克谈特斯拉机器人：或能成人类朋友</h2><p><img src="https://i0.hdslb.com/bfs/album/f3126c84581c07fe1e3caf9fe8ea6f088d275873.png" alt="20220101132651"></p><p>马斯克今年早些时候公布了特斯拉机器人计划，它是一款能完成重复性任务的人形机器人，有助于解决劳动力短缺问题。而在近日接受采访时马斯克表示，特斯拉机器人不会仅仅是一款能完成重复性任务的人形机器人，它可能发展自己的独特个性，成为人类伙伴。</p><h1 id="B2C：智能家居、智能硬件、可穿戴"><a href="#B2C：智能家居、智能硬件、可穿戴" class="headerlink" title="B2C：智能家居、智能硬件、可穿戴"></a>B2C：智能家居、智能硬件、可穿戴</h1><h2 id="手工耿做了一台“保安巡逻机甲”"><a href="#手工耿做了一台“保安巡逻机甲”" class="headerlink" title="手工耿做了一台“保安巡逻机甲”"></a>手工耿做了一台 “保安巡逻机甲”</h2><p><img src="https://i0.hdslb.com/bfs/album/fca95ff0b04eb10b78d00ca588c3a00a20ec50bd.png" alt="20220101132707"></p><p>近日，手工耿又带来了自己的最新力作 —— 安保巡逻机甲。这款机甲不仅外型炫酷而且操作也十分简单，据他介绍，就连老大爷也能轻松驾驶。他先找来两个越野履带，用钢管焊接在一起，上面固定好电机，通过链条带动履带转动控制机甲的前进和后退。之后他又为机甲配置了双拳和水枪，安装了驾驶位，座位上还安装了蓝牙音响和大灯。试驾过程中，虽然机甲有些不稳，但确实可以行走和转弯。</p><h2 id="华为发布智慧屏“影音游戏”三大升级"><a href="#华为发布智慧屏“影音游戏”三大升级" class="headerlink" title="华为发布智慧屏“影音游戏”三大升级"></a>华为发布智慧屏 “影音游戏” 三大升级</h2><p><img src="https://i0.hdslb.com/bfs/album/8bda15623c4036466d44ad26868fa6f6feb630ea.png" alt="20220101132720"></p><p>新版本带来了 “分布式家庭影院”、“智慧屏 K 歌” 以及 “智慧屏手柄游戏”，同时还推出了华为智选 K 歌麦克风和游戏手柄。其中，智慧屏 K 歌搭配新一代华为智选纯麦智能 K 歌麦克风，即插即用，无需蓝牙配对，拥有毫秒级时延，售价 499 元；智慧屏手柄游戏，搭配新一代华为智选北通智能游戏手柄，即插即用，可一键调出游戏专区，售价 249 元。</p><h1 id="V2X：智能驾驶、车联网"><a href="#V2X：智能驾驶、车联网" class="headerlink" title="V2X：智能驾驶、车联网"></a>V2X：智能驾驶、车联网</h1><h2 id="图森未来完成了全球首次无人驾驶重卡公开道路全无人测试"><a href="#图森未来完成了全球首次无人驾驶重卡公开道路全无人测试" class="headerlink" title="图森未来完成了全球首次无人驾驶重卡公开道路全无人测试"></a>图森未来完成了全球首次无人驾驶重卡公开道路全无人测试</h2><p><img src="https://i0.hdslb.com/bfs/album/fa02cdf8e680b59ab353795f331b0c37e75b7319.png" alt="20220101132754"></p><p>昨日，图森未来宣布已成功完成全球首次无人驾驶重卡公开道路的驾驶测试，全程无安全员值守，也没有任何人为干预，本次测试从美国亚利桑那州图市附近的铁路港出发，终点为凤凰城附近的大型物流配送中心，全程长达 80 多英里，且为夜间行车，共用时 80 分钟。</p><h2 id="中信证券：预计自动驾驶渗透率快速提升，将有一批TIER1厂商核心受益"><a href="#中信证券：预计自动驾驶渗透率快速提升，将有一批TIER1厂商核心受益" class="headerlink" title="中信证券：预计自动驾驶渗透率快速提升，将有一批TIER1厂商核心受益"></a>中信证券：预计自动驾驶渗透率快速提升，将有一批 TIER1 厂商核心受益</h2><p>中信证券最新研报指出，L2 + 级别自动驾驶硬件成本可以控制在 6000 元左右，该硬件可以被配置到最低 13 万元左右的车型上，在国产自主品牌车型中的渗透率有望快速提升。L3 + 级别当前主要配置在 40 万左右的高端自主车型，随着整套解决方案成本的下行，有望在 25 万左右的车型实现落地量产。</p><h1 id="人工智能、区块链、云平台"><a href="#人工智能、区块链、云平台" class="headerlink" title="人工智能、区块链、云平台"></a>人工智能、区块链、云平台</h1><h2 id="阿加犀发布算力回收支持技术"><a href="#阿加犀发布算力回收支持技术" class="headerlink" title="阿加犀发布算力回收支持技术"></a>阿加犀发布算力回收支持技术</h2><p>据介绍，该技术可使用 AidLux 平台将闲置的手机芯片改造为 AI 边缘计算智能终端，通过增加外设接口并解决散热问题，使其应对各类边缘计算需求。该方案可适用于 AI 教育、极客开发等多种边缘计算场景，预计成本将减少三分之二。</p><h1 id="B2B-x2F-B2G：智慧城市"><a href="#B2B-x2F-B2G：智慧城市" class="headerlink" title="B2B/B2G：智慧城市"></a>B2B/B2G：智慧城市</h1><h2 id="我国已全面实现“村村通宽带”"><a href="#我国已全面实现“村村通宽带”" class="headerlink" title="我国已全面实现“村村通宽带”"></a>我国已全面实现 “村村通宽带”</h2><p>工信部信息通信发展司司长谢存表示，截至 2021 年 11 月底，我国现有行政村已全面实现 “村村通宽带”，偏远落后地区通信难的问题得到历史性解决。</p><h2 id="科研人员研发出水面智能保洁无人子母船系统"><a href="#科研人员研发出水面智能保洁无人子母船系统" class="headerlink" title="科研人员研发出水面智能保洁无人子母船系统"></a>科研人员研发出水面智能保洁无人子母船系统</h2><p><img src="https://i0.hdslb.com/bfs/album/893c456d5dd0823f3567b36a8c60c8ad606e1740.png" alt="20220101132836"></p><p>据介绍，由中国科学院合肥物质科学研究院固体物理研究所主持研制的无人控制智能保洁子母船装置配置了 1 艘母船和 2 艘子船，可开启河道逼近、河道中央行驶、自主巡航等作业模式，可根据场景自由切换模式。此外，科研团队还开发了基于碰撞风险系数的动态避障决策系统，子母船会根据相遇的情况采取合理的避免碰撞措施。</p><h2 id="上海公交试点，银行卡、社保卡直接刷卡坐公交"><a href="#上海公交试点，银行卡、社保卡直接刷卡坐公交" class="headerlink" title="上海公交试点，银行卡、社保卡直接刷卡坐公交"></a>上海公交试点，银行卡、社保卡直接刷卡坐公交</h2><p>可刷乘公交的社保卡和银行卡需要带有 “银联、闪付” 标识，同时开通了小额免密免签功能。据介绍，银联闪付采用 “脱机模式先乘车、延时联机后付费” 的信用消费模式，使用时不受通讯环境影响，极大提升支付体验。</p><h1 id="科技财经"><a href="#科技财经" class="headerlink" title="科技财经"></a>科技财经</h1><h2 id="华为、联想卷入滴滴高管千万受贿案"><a href="#华为、联想卷入滴滴高管千万受贿案" class="headerlink" title="华为、联想卷入滴滴高管千万受贿案"></a>华为、联想卷入滴滴高管千万受贿案</h2><p>昨日，滴滴原基础平台部高级技术总监于晓声受贿案已宣判，其受贿金额高达千万。经查，于某某自 2015 年 8 月担任嘀嘀无限公司高级技术总监，负责服务器采购项目招投标期间，利用职务便利，非法收受供应商北明公司的贿赂，帮助其修改技术分并指导该公司调整报价，最终成功中标。而北明软件与华为于 2019 年开展全方位合作，其为华为第一大经销商。据曝光，除了北明公司，于晓声还为联想公司和浪潮公司调过技术分。</p><h2 id="中国十大科技富豪2021创最惨纪录"><a href="#中国十大科技富豪2021创最惨纪录" class="headerlink" title="中国十大科技富豪2021创最惨纪录"></a>中国十大科技富豪 2021 创最惨纪录</h2><p><img src="https://i0.hdslb.com/bfs/album/3b27d0159580925e682cf9230266ea745bdcf7e0.png" alt="20220101132915"></p><p>彭博亿万富翁指数显示，2021 年，中国最富有的十位科技大亨总净资产蒸发了 800 亿美元 (约合 5095 亿元人民币)，几乎跌去了总财富的四分之一，创下了自彭博亿万富翁指数 2012 年开始追踪全球富豪以来的最大年度跌量。拼多多创始人黄峥的财富在今年损失的最多，达到 429 亿美元 (约合 2732 亿元)，相当于个人财富的三分之二，这是因为其电商平台拼多多的股价大跌近 70%。</p><h2 id="微信内测：视频号可以在电脑端（MAC版）登录"><a href="#微信内测：视频号可以在电脑端（MAC版）登录" class="headerlink" title="微信内测：视频号可以在电脑端（MAC版）登录"></a>微信内测：视频号可以在电脑端（MAC 版）登录</h2><p><img src="https://i0.hdslb.com/bfs/album/e2a55a545c0bba174daabed0bd793546b1227243.png" alt="20220101132929"></p><p>最近一段时间，视频号多次更新，包括：视频号植入订阅号信息流、视频号裂变功能以及电脑端上线视频号等新功能。对此，有用户表示对自己的阅读体验很影响，也有用户表示应该设置自定义开关。</p><h2 id="马斯克：打算在火星上实行直接民主制"><a href="#马斯克：打算在火星上实行直接民主制" class="headerlink" title="马斯克：打算在火星上实行直接民主制"></a>马斯克：打算在火星上实行直接民主制</h2><p>马斯克在最近一次采访中表示，人类登上火星后应该摒弃美国式的代议民主制，以摆脱特殊利益集团和 “政客的胁迫”。他表示，把人类送上火星是一个机会，可以 “重新思考政府的整体性质。”</p><blockquote><p>内容来源：物联网智库、三迪时空网、工业 4.0 俱乐部、cnbeta、证券时报网、天工社、快科技、钉科技、车云网、环球网、新华网、新智元、卫星与网络、机器之心、36kr、techweb、钛媒体、中国工控网、中国工业新闻网、中国智能制造网、工业 4.0 研究院、日日夜夜呕心沥血的整理团队：物联网智库</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;meting-js name=&quot;2021年12月31日物联网新闻&quot; artist=&quot;冯站长之家&quot; url=&quot;h</summary>
      
    
    
    
    
    <category term="IOT" scheme="https://kangblogs.top/tags/IOT/"/>
    
    <category term="物联网" scheme="https://kangblogs.top/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
    <category term="马斯克" scheme="https://kangblogs.top/tags/%E9%A9%AC%E6%96%AF%E5%85%8B/"/>
    
    <category term="车联网" scheme="https://kangblogs.top/tags/%E8%BD%A6%E8%81%94%E7%BD%91/"/>
    
    <category term="华为" scheme="https://kangblogs.top/tags/%E5%8D%8E%E4%B8%BA/"/>
    
  </entry>
  
  <entry>
    <title>储 “物” 间（四）</title>
    <link href="https://kangblogs.top/posts/fa500912.html"/>
    <id>https://kangblogs.top/posts/fa500912.html</id>
    <published>2022-01-01T04:33:53.000Z</published>
    <updated>2022-01-01T04:33:56.000Z</updated>
    
    <content type="html"><![CDATA[<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><p><meting-js name="2021年12月27日物联网新闻" artist="冯站长之家" url="https://res.wx.qq.com/voice/getvoice?mediaid=MzA5OTQyMDgyOV8yNjUyNjI0NjI4" cover="https://cdn.jsdelivr.net/gh/flipped-1121/BlogPictures/flipped-1121-PIC/20211109231424.png"><br></meting-js></p><h1 id="物联网头条"><a href="#物联网头条" class="headerlink" title="物联网头条"></a>物联网头条</h1><h2 id="詹姆斯·韦布空间望远镜点火发射"><a href="#詹姆斯·韦布空间望远镜点火发射" class="headerlink" title="詹姆斯·韦布空间望远镜点火发射"></a>詹姆斯・韦布空间望远镜点火发射</h2><p><img src="https://i0.hdslb.com/bfs/album/e3624926fcbab1cd7994c9c2625801970dffdd49.png" alt="20220101124910"><br>北京时间 12 月 25 日 20 点 20 分，美国国家航空航天局（NASA) 的詹姆斯・韦布空间望远镜点火发射，在未来几个月，这个人类历史上最大、耗资近 100 亿美元的太空天文台将飞到地球和太阳之间的引力平衡点，展开折叠的天线、遮阳板、镜片，对宇宙起源进行探索。该空间望远镜原计划于 2007 年发射，它的 “前辈” 哈勃空间望远镜于 1990 年成功发射，曾在 2019 年传回了迄今最完整的 7500 张星空照片拼接而成的宇宙图谱。</p><h1 id="底层技术、通信、网络安全"><a href="#底层技术、通信、网络安全" class="headerlink" title="底层技术、通信、网络安全"></a>底层技术、通信、网络安全</h1><h2 id="华为海思首次公开自研越影ISP"><a href="#华为海思首次公开自研越影ISP" class="headerlink" title="华为海思首次公开自研越影ISP"></a>华为海思首次公开自研越影 ISP</h2><p><img src="https://i0.hdslb.com/bfs/album/ceb62bf30356287ec21aee28eee63ddcd86ff8f2.png" alt="20220101124812"></p><p>日前，上海海思首次公开展示了自研的 “越影” AI ISP，支持超感光降噪，利用神经网络深度学习，实现了低照度场景的智能降噪，可以让 “伸手不见五指” 的黑夜变成 “白天”。同时还结合了多光谱融合技术，有效融合可见光与红外光谱，低照图像达到了色彩与细节平衡。</p><h2 id="曝苹果A16处理器无缘3nm"><a href="#曝苹果A16处理器无缘3nm" class="headerlink" title="曝苹果A16处理器无缘3nm"></a>曝苹果 A16 处理器无缘 3nm</h2><p>有消息曝出，iPhone 14 系列将不会全系升级到新的 A16 处理器，而是继续沿用今年的 iPhone 13 的 A15 芯片。此外 A16 处理器似乎也将无缘 3nm。消息称台积电 3nm 的量产时间预计明年四季度启动，且首批产能被苹果和英特尔均分。</p><h2 id="全国首家终端快充行业协会正式成立"><a href="#全国首家终端快充行业协会正式成立" class="headerlink" title="全国首家终端快充行业协会正式成立"></a>全国首家终端快充行业协会正式成立</h2><p><img src="https://i0.hdslb.com/bfs/album/65cb7edb68d632bb3f0cc5b21e65eac12f545427.png" alt="20220101124747"></p><p>广东省终端快充行业协会由中国信息通信研究院、华为、OPPO、vivo、小米牵头发起，联合国内终端整机、芯片、仪表仪器、充电器、配件等终端快充产业链各方于 2021 年初开始筹建，将协同和整合产业资源，加速新技术的标准化、产业化应用和推广。据相关人士分析，该协会的成立将加速推广国内融合快充新技术，过去在终端充电上互不兼容的快充协议有望实现统一。</p><h2 id="国产首款高性能4K级显卡GPU“风华1号”性能指标公布"><a href="#国产首款高性能4K级显卡GPU“风华1号”性能指标公布" class="headerlink" title="国产首款高性能4K级显卡GPU“风华1号”性能指标公布"></a>国产首款高性能 4K 级显卡 GPU “风华 1 号” 性能指标公布</h2><p>据介绍，风华 1 号 GPU 接口为 PCIe 4.0 x16，显存采用 GDDR6/GDDR6X，最大容量为 16GB，最大速率 19 Gbps，支持 HDMI 2.1、DisplayPort 1.4 输出，采用 12nm 工艺制造，支持 X86，ARM，龙芯等不同指令集处理器，支持 Linux、安卓、麒麟、统信 UOS 等操作系统，支持鲲鹏 / 安培等服务器平台。同时还支持数据中心服务器高密度图形渲染、AI 超分 / 运算，支持 5G 数据中心多路云办公、云渲染、云游戏、云手机，支持高安全性多路硬件虚拟化、远程桌面应用。</p><h2 id="全国首批“千兆城市”名单发布"><a href="#全国首批“千兆城市”名单发布" class="headerlink" title="全国首批“千兆城市”名单发布"></a>全国首批 “千兆城市” 名单发布</h2><p>据悉，工业和信息化部今年正式启动了 “千兆城市” 评估工作，目前我国 15 个省（市、自治区）的 29 个城市达到了千兆城市评价标准，建成了全国首批 “千兆城市”，包括北京、天津、上海、济南、青岛、日照、南京、长沙等。</p><h1 id="B2B：智能制造、机器人"><a href="#B2B：智能制造、机器人" class="headerlink" title="B2B：智能制造、机器人"></a>B2B：智能制造、机器人</h1><h2 id="哈医大胸外科机器人实现肺癌根治-快速康复目标"><a href="#哈医大胸外科机器人实现肺癌根治-快速康复目标" class="headerlink" title="哈医大胸外科机器人实现肺癌根治+快速康复目标"></a>哈医大胸外科机器人实现肺癌根治 + 快速康复目标</h2><p>近日，哈医大一院胸外科常浩教授成功应用达芬奇机器人，完成一例伴有多种基础病的左肺下叶癌根治手术。手术仅用一小时，术后第三天患者即康复出院，实现了根治肿瘤和快速康复的治疗目标。</p><h1 id="B2C：智能家居、智能硬件、可穿戴"><a href="#B2C：智能家居、智能硬件、可穿戴" class="headerlink" title="B2C：智能家居、智能硬件、可穿戴"></a>B2C：智能家居、智能硬件、可穿戴</h1><h2 id="小米Watch-S1智能手表官宣"><a href="#小米Watch-S1智能手表官宣" class="headerlink" title="小米Watch S1智能手表官宣"></a>小米 Watch S1 智能手表官宣</h2><p><img src="https://i0.hdslb.com/bfs/album/6d4cafd233c6c8488d2a54119002889dde07cdbe.png" alt="20220101124521"></p><p>从预热海报来看，小米 Watch S1 采用圆形表盘设计，表体右侧配备两个旋转表冠。目前，具体参数暂不知晓，但从介绍来看，S 系列或以商务为主。</p><h2 id="小米12双旗舰全配置曝光：售价4000-起跳"><a href="#小米12双旗舰全配置曝光：售价4000-起跳" class="headerlink" title="小米12双旗舰全配置曝光：售价4000+起跳"></a>小米 12 双旗舰全配置曝光：售价 4000 + 起跳</h2><p><img src="https://i0.hdslb.com/bfs/album/27f1fd58212b348e8d91f2e7c7ede231be989c61.png" alt="20220101124431"></p><p>综合现有消息来看，小米 12 除了屏幕的差异之外，几乎全线配置均相较前代有所升级，新系列包含三款新机，分别是小米 12X、小米 12 以及小米 12Pro。其中小米 12X 应该是搭载骁龙 870 处理器，主打中高端次旗舰市场。而小米 12 和 12Pro 都是搭载骁龙 8gen1 处理器，定位于高端市场。</p><h2 id="亿航智能宣布获得长航程载人级自动驾驶飞行器VT-30的首个订单"><a href="#亿航智能宣布获得长航程载人级自动驾驶飞行器VT-30的首个订单" class="headerlink" title="亿航智能宣布获得长航程载人级自动驾驶飞行器VT-30的首个订单"></a>亿航智能宣布获得长航程载人级自动驾驶飞行器 VT-30 的首个订单</h2><p>据悉，该订单来自日本，未来公司将携手当地合作伙伴，进一步探索 EH216 和 VT-30 的应用场景，推动日本城市空中交通网络的发展。亿航智能双座版载人级自动驾驶飞行器 EH216 继今年 6 月在日本首飞之后，近日先后在福岛和冈山完成了飞行演示，以探索自动驾驶空中交通解决方案在岛屿间出行、应急救援和空中物流等场景下的应用和实践。</p><h1 id="V2X：智能驾驶、车联网"><a href="#V2X：智能驾驶、车联网" class="headerlink" title="V2X：智能驾驶、车联网"></a>V2X：智能驾驶、车联网</h1><h2 id="首批基于商用密码算法的智能网联汽车信息安全标准项目发布"><a href="#首批基于商用密码算法的智能网联汽车信息安全标准项目发布" class="headerlink" title="首批基于商用密码算法的智能网联汽车信息安全标准项目发布"></a>首批基于商用密码算法的智能网联汽车信息安全标准项目发布</h2><p>12 月 24 日，首批基于商用密码算法的智能网联汽车信息安全标准项目发布会暨 2021 智能网联汽车信息安全技术创新合作研讨会在长春召开。会议发布了《基于商用密码算法的智能网联汽车信息安全标准体系建设总体方案》及首批 12 项标准项目。</p><h2 id="上汽集团首批200台智己L7-Beta体验版正式下线交付"><a href="#上汽集团首批200台智己L7-Beta体验版正式下线交付" class="headerlink" title="上汽集团首批200台智己L7 Beta体验版正式下线交付"></a>上汽集团首批 200 台智己 L7 Beta 体验版正式下线交付</h2><p>据悉，在上汽集团临港智能工厂，智己 L7 首批 200 台 Beta 体验版正式下线交付。到明年 2 月底，智己 L7 试驾车将会陆续到店，3 月初全面开启实车试驾。</p><h2 id="何小鹏：雷军造车是我“怂恿”的-汽车比手机更酷"><a href="#何小鹏：雷军造车是我“怂恿”的-汽车比手机更酷" class="headerlink" title="何小鹏：雷军造车是我“怂恿”的 汽车比手机更酷"></a>何小鹏：雷军造车是我 “怂恿” 的 汽车比手机更酷</h2><p><img src="https://i0.hdslb.com/bfs/album/3ce7b31653bca6adadc647a745f57845958cb85f.png" alt="20220101124226"></p><p>小鹏汽车董事长兼 CEO 何小鹏在出席央视《对话挑战者》栏目时，讲述了一些小鹏汽车和其它造车新势力不为人知的故事。何小鹏透露，他一直在建议雷军造车。而当他真正打算去造车的时候，也曾去找过雷军好几次，当时雷军觉得造车是一件非常困难的事，不太期望他去造车，但是他最终还是决定去造车时，后来雷军也投资了他。</p><h1 id="人工智能、区块链、云平台"><a href="#人工智能、区块链、云平台" class="headerlink" title="人工智能、区块链、云平台"></a>人工智能、区块链、云平台</h1><h2 id="腾讯云亿元大单被废标"><a href="#腾讯云亿元大单被废标" class="headerlink" title="腾讯云亿元大单被废标"></a>腾讯云亿元大单被废标</h2><p>2021 年 9 月 30 日，珠海市公安局（科信支队）珠海公安大数据智能化建设采购项目公开招标公告发布，预算 103398915.2 元。10 月 22 日中标（成交）结果公告发布，腾讯云计算（北京）有限责任公司 100,127,866.00 元中标。12 月 25 日废标公告发布，公告称本项目因故根据《中华人民共和国政府采购法》第 36 条规定，做废标处理。有分析称，此次废标或因出现影响采购公正的违法、违规行为，或因重大变故，采购任务取消的。</p><h2 id="百度首个元宇宙”希壤”选定英伟达为合作伙伴，双方共建“AI元宇宙”"><a href="#百度首个元宇宙”希壤”选定英伟达为合作伙伴，双方共建“AI元宇宙”" class="headerlink" title="百度首个元宇宙”希壤”选定英伟达为合作伙伴，双方共建“AI元宇宙”"></a>百度首个元宇宙” 希壤” 选定英伟达为合作伙伴，双方共建 “AI 元宇宙”</h2><p>百度与英伟达已达成协议，双方合作共建 AI 元宇宙。在今日北京举行的百度 Create2021 上，百度将发布首个国产元宇宙产品 “希壤”， 英伟达全球副总裁暨亚太区总裁 Raymond Teh 将受邀出席。</p><h1 id="B2B-x2F-B2G：智慧城市"><a href="#B2B-x2F-B2G：智慧城市" class="headerlink" title="B2B/B2G：智慧城市"></a>B2B/B2G：智慧城市</h1><h2 id="网易与三亚市政府达成战略合作"><a href="#网易与三亚市政府达成战略合作" class="headerlink" title="网易与三亚市政府达成战略合作"></a>网易与三亚市政府达成战略合作</h2><p>网易将在三亚设立网易海南总部，建设网易元宇宙产业基地项目。该基地旨在推动海南数字化文创产业高质量发展，将被打造为集互联网技术开发、数字化内容生产、数字化版权运营和数字化产品输出为一体的国际化数字新文创中心。此外，双方还将在互动娱乐、电子竞技、音乐文化、电商直播、在线教育等领域深化合作。</p><h1 id="科技财经"><a href="#科技财经" class="headerlink" title="科技财经"></a>科技财经</h1><h2 id="元宇宙炒房或被套"><a href="#元宇宙炒房或被套" class="headerlink" title="元宇宙炒房或被套"></a>元宇宙炒房或被套</h2><p>12 月中旬，顶级虚拟房产项目在闲鱼上的转让价一度超过 10 万元。而近日，有媒体发现，闲鱼已经屏蔽了 “元宇宙”“虹宇宙” 等关键词，该平台几乎检索不到虚拟房产的交易。一些 QQ 群上，转售虹宇宙房产的用户依旧较多，但价格较之前大幅缩水，顶级房产的价格也不过万元。</p><h2 id="曝何小鹏跑去宁德时代总部跟曾毓群吵架！官方回应"><a href="#曝何小鹏跑去宁德时代总部跟曾毓群吵架！官方回应" class="headerlink" title="曝何小鹏跑去宁德时代总部跟曾毓群吵架！官方回应"></a>曝何小鹏跑去宁德时代总部跟曾毓群吵架！官方回应</h2><p>此前有媒体报道，今年年中，小鹏汽车董事长何小鹏与宁德时代董事长曾毓群曾在宁德时代总部大楼发生过一场争执，“战况” 十分激烈，曾毓群一度退出会议室，持续约 10 分钟。据悉，这场争端源于何小鹏打算引入中航锂电，让其成为小鹏汽车的主力电池供应商。对此，小鹏汽车对此事做出回应：争吵一事，完全是谣言。此外，对于引入中航锂电一事，小鹏汽车表示：“车辆生产的零部件供应链需要不断完善，才能更好地保供保产，更加准确地预测交付周期。”</p><blockquote><p>内容来源：物联网智库、三迪时空网、工业 4.0 俱乐部、cnbeta、证券时报网、天工社、快科技、钉科技、车云网、环球网、新华网、新智元、卫星与网络、机器之心、36kr、techweb、钛媒体、中国工控网、中国工业新闻网、中国智能制造网、工业 4.0 研究院、日日夜夜呕心沥血的整理团队：物联网智库</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js&quot;&gt;&lt;/script&gt;
&lt;p&gt;&lt;meting-js name=&quot;2021年12月27日物联网新闻&quot; artist=&quot;冯站长之家&quot; url=&quot;h</summary>
      
    
    
    
    
    <category term="IOT" scheme="https://kangblogs.top/tags/IOT/"/>
    
    <category term="物联网" scheme="https://kangblogs.top/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
    <category term="小米" scheme="https://kangblogs.top/tags/%E5%B0%8F%E7%B1%B3/"/>
    
    <category term="海思" scheme="https://kangblogs.top/tags/%E6%B5%B7%E6%80%9D/"/>
    
    <category term="车联网" scheme="https://kangblogs.top/tags/%E8%BD%A6%E8%81%94%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>储 “物” 间（三）</title>
    <link href="https://kangblogs.top/posts/fa500911.html"/>
    <id>https://kangblogs.top/posts/fa500911.html</id>
    <published>2021-11-13T15:43:11.000Z</published>
    <updated>2021-11-13T15:43:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="物联网头条"><a href="#物联网头条" class="headerlink" title="物联网头条"></a>物联网头条</h1><h2 id="高通发布四款芯片-第四季度上市"><a href="#高通发布四款芯片-第四季度上市" class="headerlink" title="高通发布四款芯片 第四季度上市"></a>高通发布四款芯片 第四季度上市</h2><p><img src="https://i0.hdslb.com/bfs/album/cf820a088d63fc04bb87a17c98adaee66bc33499.png" alt="20211113235559"></p><p>其中，骁龙 778G Plus 5G 移动平台是骁龙 778G 的后续产品，CPU 主频升级到了 2.5GHz；骁龙 695 5G 移动平台可提供全球 5G 支持，支持毫米波和 sub-6 GHz 频段，与骁龙 690 相比具有高达 30% 的 GPU 图形渲染速度和 15% 的 CPU 性能提升；骁龙 480 Plus 将频率从前代的 2.0GHz 提高到了 2.2GHz；骁龙 680 4G 移动平台基于 6nm 工艺技术打造。据悉，OPPO 和小米都会推出基于骁龙 695 的新品。</p><h1 id="底层技术、通信、网络安全"><a href="#底层技术、通信、网络安全" class="headerlink" title="底层技术、通信、网络安全"></a>底层技术、通信、网络安全</h1><h2 id="张忠谋：半导体在美国本土制造不可能成功"><a href="#张忠谋：半导体在美国本土制造不可能成功" class="headerlink" title="张忠谋：半导体在美国本土制造不可能成功"></a>张忠谋：半导体在美国本土制造不可能成功</h2><p>据台媒报道，台积电创办人张忠谋 10 月 26 日表示，美国半导体供应链不完整，生产成本高，他认为美国要推动半导体在美国本土制造不可能会成功。对于英特尔积极鼓吹美国政府补贴以美国为总部的半导体厂，张忠谋表示，英特尔的动机是瞄准美国政府的补贴，只是这对亚洲，甚至是全世界的半导体厂都是挑战。</p><h2 id="AMD锐龙、显卡价格创新高"><a href="#AMD锐龙、显卡价格创新高" class="headerlink" title="AMD锐龙、显卡价格创新高"></a>AMD 锐龙、显卡价格创新高</h2><p>AMD 昨日发布了 Q3 季度财报，营收为 43.13 亿美元，与上年同期的 28.01 亿美元相比增长 54%，与上一季度的 38.50 亿美元相比增长 12%。这次营收及盈利大涨很大一个因素是 ASP 均价创了新高，AMD 提到客户端 ASP 均价提升是因为锐龙处理器销售，GPU 均价提升则是高端显卡及数据中心显卡的共同结果。</p><h2 id="清华大学霸榜世界大学排名计算机学科第一"><a href="#清华大学霸榜世界大学排名计算机学科第一" class="headerlink" title="清华大学霸榜世界大学排名计算机学科第一"></a>清华大学霸榜世界大学排名计算机学科第一</h2><p>昨日，U.S.News 正式发布最新的 2022 最佳全球院校排名。哈佛大学继续领跑全球 No.1 的位置，麻省理工学院、斯坦福大学、加利福尼亚大学伯克利分校位列 Top5。清北分别位列 26 和 45。中国共有 289 所大学上榜。值得注意的是，清华大学登顶全球最佳计算机科学大学榜单，北京大学也跻身前十，排到第九位。</p><h1 id="B2B：智能制造、机器人"><a href="#B2B：智能制造、机器人" class="headerlink" title="B2B：智能制造、机器人"></a>B2B：智能制造、机器人</h1><h2 id="商汤科技发布“工业引擎”"><a href="#商汤科技发布“工业引擎”" class="headerlink" title="商汤科技发布“工业引擎”"></a>商汤科技发布 “工业引擎”</h2><p>据悉，该引擎由商汤原创打造的新型人工智能基础设施 SenseCore 商汤 AI 大装置、SenseMARS 火星混合现实平台和 SenseFoundry Enterprise 商汤方舟企业开放平台等核心架构组成，能够赋能各类传统工业垂直领域，帮助工业企业降本增效。目前，该引擎已在青岛多家头部企业落地，将助力青岛打造世界工业互联网之都。</p><h1 id="B2C：智能家居、智能硬件、可穿戴"><a href="#B2C：智能家居、智能硬件、可穿戴" class="headerlink" title="B2C：智能家居、智能硬件、可穿戴"></a>B2C：智能家居、智能硬件、可穿戴</h1><h2 id="新专利显示苹果眼镜可将AR画面直接投射到佩戴者的视网膜上"><a href="#新专利显示苹果眼镜可将AR画面直接投射到佩戴者的视网膜上" class="headerlink" title="新专利显示苹果眼镜可将AR画面直接投射到佩戴者的视网膜上"></a>新专利显示苹果眼镜可将 AR 画面直接投射到佩戴者的视网膜上</h2><p><img src="https://i0.hdslb.com/bfs/album/8f52948a5a1fa1647bdb65acc98b85d6384575a2.png" alt="20211113235539"></p><p>据悉，苹果公司正在研究如何让 “苹果眼镜” 或其他未来的苹果 AR 设备完全跳过小屏幕，而使用微型投影仪将图像直接传送到佩戴者的视网膜上。苹果声称这可能是 AR 的最佳选择，它可以防止在头显上观看 AR 或 VR 会导致的头痛和不适感。</p><h2 id="日本一公司开卖飞行摩托车"><a href="#日本一公司开卖飞行摩托车" class="headerlink" title="日本一公司开卖飞行摩托车"></a>日本一公司开卖飞行摩托车</h2><p>该款 “飞行摩托车” 重约 300 公斤，借助传统内燃机提供动力，依靠两个主要的螺旋桨进行飞行，凭借与无人机类似的传感技术，可避开障碍物。它的时速最高可达 100 公里，续航时间约 40 分钟。不过受政策限制，这款 “飞行摩托” 目前暂无法上路，公司希望它能在沙漠、水上等极端条件的救援工作中发挥用途。售价约合人民币 435 万元。</p><h1 id="V2X：智能驾驶、车联网"><a href="#V2X：智能驾驶、车联网" class="headerlink" title="V2X：智能驾驶、车联网"></a>V2X：智能驾驶、车联网</h1><h2 id="段永平否认牵头OPPO、vivo联合造车"><a href="#段永平否认牵头OPPO、vivo联合造车" class="headerlink" title="段永平否认牵头OPPO、vivo联合造车"></a>段永平否认牵头 OPPO、vivo 联合造车</h2><p>有媒体报道称，步步高系 “教父” 段永平将 “重出江湖”，牵头 OPPO、vivo 成立新公司共同造车。对此，OPPO 内部人士表示，这种说法 “不靠谱”；vivo 则否认了三家联合造车的可能性，称三家都是独立主体，没有任何股权关系，vivo 会继续专注智能手机这一主营业务领域。段永平本人表示：“‘重出江湖’的事情绝对不会发生的。顺便说下，还没听说过我们要造车，了解一下倒是可能的。</p><h2 id="Apollo-Moon埃安版无人车发布"><a href="#Apollo-Moon埃安版无人车发布" class="headerlink" title="Apollo Moon埃安版无人车发布"></a>Apollo Moon 埃安版无人车发布</h2><p><img src="https://i0.hdslb.com/bfs/album/5430e2be24b0ad46e4499989db62a94b6399d482.png" alt="20211113235522"></p><p>日前，百度联合广汽埃安正式发布了基于 Apollo Moon 技术研发的 Apollo Moon 埃安版前装量产无人车。该款车结合了百度 Apollo 自动驾驶软 / 硬件技术和广汽埃安自动驾驶整车平台及整车设计、制造能力联合开发，具备 L4 级 Robotaxi 自动驾驶数据与 L2 + 级辅助驾驶数据共享，满足 Robotaxi 无人化运营需要。</p><h2 id="OPPO推出全链路智行解决方案"><a href="#OPPO推出全链路智行解决方案" class="headerlink" title="OPPO推出全链路智行解决方案"></a>OPPO 推出全链路智行解决方案</h2><p>昨日，OPPO 软件工程事业部总裁吴恒刚在 OPPO 开发者大会上宣布，公司正式推出 OPPO 智行（OPPO Carlink）解决方案，将车机互融能力对外开放。据悉，这是一套从硬件到软件，从技术能力到服务应用，从两轮电动车到四轮汽车，跨终端全场景的系统出行解决方案，如数字车钥匙，手表控车，闪充上车，车机投屏，车管家等功能。</p><h1 id="工智能、区块链、云平台"><a href="#工智能、区块链、云平台" class="headerlink" title="工智能、区块链、云平台"></a>工智能、区块链、云平台</h1><h2 id="北京大学计算机学院正式成立：目标进入世界前十"><a href="#北京大学计算机学院正式成立：目标进入世界前十" class="headerlink" title="北京大学计算机学院正式成立：目标进入世界前十"></a>北京大学计算机学院正式成立：目标进入世界前十</h2><p><img src="https://i0.hdslb.com/bfs/album/d830fcc4910b4a41f6924586e9e47209265ad358.png" alt="20211113235510"><br>近日，北京大学计算机学院成立仪式在百周年纪念讲堂举行。据了解，北京大学计算机学院由原计算机科学技术系改设而成。北京大学计算机学院还与腾讯、中兴、华为和阿里等企业进行了合作，以推进科研成果转化，培养高层次创新人才。</p><h2 id="OPPO发布小布虚拟人"><a href="#OPPO发布小布虚拟人" class="headerlink" title="OPPO发布小布虚拟人"></a>OPPO 发布小布虚拟人</h2><p><img src="https://i0.hdslb.com/bfs/album/16cfeb1f1d33b3248c17fc30ae06823cac7250de.png" alt="20211113235459"></p><p>在昨日举行的 2021 OPPO 开发者大会上，小布虚拟人正式发布亮相，这是首个基于虚拟人多模态交互的手机智能助手，涵盖视觉、语音、自然语言处理等多模态融合算法。此外，OPPO 宣布将同步开放小布虚拟人定制平台，未来能根据每个开发者的需求，演化出不同的个性化虚拟形象，如智能客服、虚拟助手、带货主播等，可搭载在多个智能终端设备上。</p><h2 id="上海数据立法透露新动向：浦东将设数据交易所"><a href="#上海数据立法透露新动向：浦东将设数据交易所" class="headerlink" title="上海数据立法透露新动向：浦东将设数据交易所"></a>上海数据立法透露新动向：浦东将设数据交易所</h2><p>《上海市数据条例 (草案)》修改稿提交市十五届人大常委会第 36 次会议二次审议。此次立法专门设置 “浦东新区数据改革” 专章，其中提出，上海按照国家要求在浦东新区设立数据交易所，开展实质化运营，同时支持临港新片区打造国际数据港，建设离岸数据中心。</p><h1 id="B2B-x2F-B2G：智慧城市"><a href="#B2B-x2F-B2G：智慧城市" class="headerlink" title="B2B/B2G：智慧城市"></a>B2B/B2G：智慧城市</h1><h2 id="驾校开启智慧驾培新模式"><a href="#驾校开启智慧驾培新模式" class="headerlink" title="驾校开启智慧驾培新模式"></a>驾校开启智慧驾培新模式</h2><p>近日，上海开启智慧驾培模式试点，虚拟现实 + 人工智能 + 实际道路训练帮助学员学车练车。学员可以利用空余碎片时间随时约车，在环境舒适的室内练车，免去了往来驾校的一路奔波。这种智慧驾培模式，使得学员能够用更少的时间和精力快速熟悉并扎实掌握驾车技能。</p><h1 id="科技财经"><a href="#科技财经" class="headerlink" title="科技财经"></a>科技财经</h1><h2 id="联想杨元庆曾在7年前跟马斯克比拼客户量"><a href="#联想杨元庆曾在7年前跟马斯克比拼客户量" class="headerlink" title="联想杨元庆曾在7年前跟马斯克比拼客户量"></a>联想杨元庆曾在 7 年前跟马斯克比拼客户量</h2><p><img src="https://i0.hdslb.com/bfs/album/617f138e041c7991f607db5b6be31ca6cebcfb3d.png" alt="20211113235409"></p><p>2014 年，马斯克曾与联想董事长兼 CEO 杨元庆共同做客央视的《对话》节目。当时，主持人提出，马斯克把 “粉丝经济” 做到了极致并询问杨元庆是否羡慕。对此，杨元庆回应，“你知道他现在有多少客户，我有多少客户吗？” 马斯克介绍，自己现在的客户还不是很多，只有 3 万左右。而杨元庆则透露，我们到当年 3 月 31 号为止，一个财政年度，销售 1.15 亿台设备，每秒钟 5 台设备，其中包括了 5500 万的 PC、5000 万的手机、和 1000 万的平板电脑。不一定是 1.15 亿个客户，因为可能有一个客户，购买多个联想产品的情况。</p><h2 id="《2021胡润百富榜》发布：钟睒睒成首富"><a href="#《2021胡润百富榜》发布：钟睒睒成首富" class="headerlink" title="《2021胡润百富榜》发布：钟睒睒成首富"></a>《2021 胡润百富榜》发布：钟睒睒成首富</h2><p><img src="https://i0.hdslb.com/bfs/album/f4969eaac45b4558a39928f9d27a2ffe0e458840.png" alt="20211113235345"></p><p>胡润研究院发布《2021 胡润百富榜》，蝉联了 4 年首富宝座的马云大跌，被农夫山泉 67 岁的钟睒睒反超而上，以 3900 亿元首次成为中国首富，其财富比去年增长 250 亿。抖音创始人张一鸣财富增长至去年的 3 倍，以 3400 亿元跃居第二。去年首富马云财富下降 1450 亿，以 2550 亿元位列第五。恒大许家印财富比去年下降 1620 亿，是今年榜单上财富下降最多的企业家，跌至第 70 位。</p><h2 id="美政府向微信用户联合会赔偿90万美元"><a href="#美政府向微信用户联合会赔偿90万美元" class="headerlink" title="美政府向微信用户联合会赔偿90万美元"></a>美政府向微信用户联合会赔偿 90 万美元</h2><p>美国微信用户联合会（USWUA）表示，经历数月谈判，USWUA 与美司法部在上周达成协议，美国政府同意对 USWUA 补偿总额为 90 万美元的律师费。此前针对特朗普政府 “微信禁令”，美国微信用户联合会（USWUA）发起诉讼，状告美国政府微信禁止令侵犯美国微信用户宪法权利。据悉，在整个微信维权案件中，不少华人纷纷捐款，美微联共筹款 100 多万美元。</p><h2 id="荣耀重启海外市场"><a href="#荣耀重启海外市场" class="headerlink" title="荣耀重启海外市场"></a>荣耀重启海外市场</h2><p>10 月 26 日下午，荣耀 50 系列在欧洲、非洲等地区的多个国家同步发布，这也是荣耀独立后在全球市场发布的首款产品。据悉，目前荣耀在海外市场已全面恢复与各大主流运营商和渠道商的合作，此次荣耀 50 系列也将于 11 月在全球多国市场开启线上线下双渠道同步售卖。</p><script type="text/javascript">    function display(id){          var traget=document.getElementById(id);          if(traget.style.display=="none"){              traget.style.display="";          }else{              traget.style.display="none";        }     }  </script><div class="note info flat"><p>摘自<a href="javascript:void(0);" id="js_name" onclick="display('lb')">冯站长之家</a></p></div><code><div style="display:none" id="lb">    <strong>冯站长之家</strong>    <img src="https://mp.weixin.qq.com/mp/qrcode?scene=10000005&amp;size=102&amp;__biz=MzA5OTQyMDgyOQ==&amp;mid=2652620959&amp;idx=7&amp;sn=e5a109401e614bf414935c9bdebb38b7&amp;send_time=" alt="">    <p>    <label>微信号</label>    <span>fgzadmin</span>    </p>    <p>    <label>功能介绍</label>    <span>每天新闻资讯类公众号单篇阅读量排名经常第一！每天提供人工精选最新鲜、最全面、最有价值的新闻早餐，每天三分钟，知晓天下事。还有最新财经早餐、医疗晨报、历史上的今天、一日一诗等等站长精选推荐的精彩内容，精彩不容错过！</span>    </p></div></code>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;物联网头条&quot;&gt;&lt;a href=&quot;#物联网头条&quot; class=&quot;headerlink&quot; title=&quot;物联网头条&quot;&gt;&lt;/a&gt;物联网头条&lt;/h1&gt;&lt;h2 id=&quot;高通发布四款芯片-第四季度上市&quot;&gt;&lt;a href=&quot;#高通发布四款芯片-第四季度上市&quot; class=&quot;he</summary>
      
    
    
    
    
    <category term="IOT" scheme="https://kangblogs.top/tags/IOT/"/>
    
    <category term="物联网" scheme="https://kangblogs.top/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
    <category term="智慧" scheme="https://kangblogs.top/tags/%E6%99%BA%E6%85%A7/"/>
    
    <category term="车联网" scheme="https://kangblogs.top/tags/%E8%BD%A6%E8%81%94%E7%BD%91/"/>
    
    <category term="高通" scheme="https://kangblogs.top/tags/%E9%AB%98%E9%80%9A/"/>
    
  </entry>
  
  <entry>
    <title>储 “物” 间（二）</title>
    <link href="https://kangblogs.top/posts/fa500910.html"/>
    <id>https://kangblogs.top/posts/fa500910.html</id>
    <published>2021-11-13T13:56:34.000Z</published>
    <updated>2021-11-13T13:56:37.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="物联网头条"><a href="#物联网头条" class="headerlink" title="物联网头条"></a>物联网头条</h1><h2 id="美国进一步限制华为、中兴等中企"><a href="#美国进一步限制华为、中兴等中企" class="headerlink" title="美国进一步限制华为、中兴等中企"></a>美国进一步限制华为、中兴等中企</h2><p><img src="https://i0.hdslb.com/bfs/album/6bc53363c3a0ff3e503d61e5a09027170a7f0e4a.png" alt="20211113234053"></p><p>据路透社报道，当地时间 10 月 28 日，美国参议院当天通过了《2021 年安全设备法》(Secure Equipment Act of 2021)，该法案以所谓 “安全威胁” 为借口，禁止美国联邦通讯委员会（FCC）对华为和中兴等公司进行审议或颁发新的设备执照。受影响的公司包括先前指定的华为和中兴通讯，以及海能达、杭州海康威视和浙江大华科技。</p><h1 id="底层技术、通信、网络安全"><a href="#底层技术、通信、网络安全" class="headerlink" title="底层技术、通信、网络安全"></a>底层技术、通信、网络安全</h1><h2 id="英特尔官方确认：Xe-HP高性能显卡不公开销售"><a href="#英特尔官方确认：Xe-HP高性能显卡不公开销售" class="headerlink" title="英特尔官方确认：Xe HP高性能显卡不公开销售"></a>英特尔官方确认：Xe HP 高性能显卡不公开销售</h2><p>英特尔首席架构师昨日在媒体平台上表示，Xe HP 架构主要用于打造 Intel 自己的开发平台基础，利用其计算性能，开发针对 oneAPI、Aurora 超算的相关软件，相关技术会延伸到 Xe HPG、Xe HPC 架构，但本身不会用于商用产品。</p><h2 id="韩国电信KT网络瘫痪调查结果公布"><a href="#韩国电信KT网络瘫痪调查结果公布" class="headerlink" title="韩国电信KT网络瘫痪调查结果公布"></a>韩国电信 KT 网络瘫痪调查结果公布</h2><p>韩国电信（KT）从当地时间 25 日上午出现约 1 小时 25 分钟的中断，门户网站、证券交易系统、商铺支付系统等基于 KT 互联网的各项服务均出现瘫痪，很多用户无法拨打电话，甚至连客服电话都无法接通。经调查发现，起初是 KT 的域名系统（DNS）服务器流量超负荷造成网络故障。随后工作人员在更换企业路由器的过程中遗漏 “exit” 命令，导致釜山地区首次出现设置错误。</p><h1 id="SK海力士已同Key-Foundry达成收购协议"><a href="#SK海力士已同Key-Foundry达成收购协议" class="headerlink" title="SK海力士已同Key Foundry达成收购协议"></a>SK 海力士已同 Key Foundry 达成收购协议</h1><p>据外媒报道，SK 海力士已同韩国国内的芯片代工商 Key Foundry 达成收购协议，收购价格是 5756.8 亿韩元（约 4.9 亿美元）。据悉，Key Foundry 是一家 8 英寸晶圆代工商，代工电源管理芯片、显示驱动芯片和微控制器。</p><h1 id="B2B：智能制造、机器人"><a href="#B2B：智能制造、机器人" class="headerlink" title="B2B：智能制造、机器人"></a>B2B：智能制造、机器人</h1><h2 id="我国首个海洋油气装备“智能制造”项目在津开工"><a href="#我国首个海洋油气装备“智能制造”项目在津开工" class="headerlink" title="我国首个海洋油气装备“智能制造”项目在津开工"></a>我国首个海洋油气装备 “智能制造” 项目在津开工</h2><p>近日，由海洋石油工程股份有限公司承揽的渤中 29-6 油田开发项目在天津智能化制造基地点火开工。作为我国首个按照 “智能制造” 模式运行的海洋油气装备制造工程项目，该项目的开工也意味着我国首个海洋油气装备制造 “智能工厂” 具备了试运行条件，向基地正式投产目标迈进了关键的一步。</p><h2 id="高科技助力“智慧”矿山建设"><a href="#高科技助力“智慧”矿山建设" class="headerlink" title="高科技助力“智慧”矿山建设"></a>高科技助力 “智慧” 矿山建设</h2><p>近日，由晋能控股装备制造集团设计生产的首套智能化大采高综采成套设备，成功在王家岭煤业公司完成地面联合试运转。据了解，该套设备通过惯导技术、无线遥控、精准移架控制、红外、压力及角度传感器等多种技术手段，达到了地面、井下均可控制，可完全实现一键启停、记忆割煤、系统集中监控、煤流扫描、自动跟机、自动调直、视频全覆盖、智能集成供液、供电、事故预警等功能。</p><h1 id="B2C：智能家居、智能硬件、可穿戴"><a href="#B2C：智能家居、智能硬件、可穿戴" class="headerlink" title="B2C：智能家居、智能硬件、可穿戴"></a>B2C：智能家居、智能硬件、可穿戴</h1><h2 id="Facebook发布多款VR、AR产品"><a href="#Facebook发布多款VR、AR产品" class="headerlink" title="Facebook发布多款VR、AR产品"></a>Facebook 发布多款 VR、AR 产品</h2><p>昨日，社交巨头 Facebook 重磅官宣改名为 Meta，全面拥抱元宇宙时代，并一口气推出多款 VR、AR 产品。基于这些产品，扎克伯格也描述了一些未来可能实现的场景。例如，集成 Facebook Messenger 音频通话功能后，在 VR 构建的虚拟空间内可以与现实世界的朋友进行通话；抑或通过轻薄便携款 AR 眼镜打通虚拟世界和真实世界，跨空间下棋；甚至还能跨空间打篮球等等，令人惊叹。</p><h2 id="“完全体”华为P50-Pro真机被曝光"><a href="#“完全体”华为P50-Pro真机被曝光" class="headerlink" title="“完全体”华为P50 Pro真机被曝光"></a>“完全体” 华为 P50 Pro 真机被曝光</h2><p><img src="https://i0.hdslb.com/bfs/album/cff1f229b2f52e41c72fb8e5ec5e55493c412980.png" alt="20211113234007"></p><p>今年夏天，华为正式发布了华为 P50 旗舰系列，但因为受制于人，最大的遗憾是不支持 5G。然而，最新消息显示，该款机型早期的测试工程机其实是配备了 5G 功能的。近日，有酷安网友曝光了华为 P50 Pro 的工程测试机，并且透露该机搭载了完整的射频芯片，预装鸿蒙 HarmonyOS 系统，采用麒麟 9000 芯片，并且摄像头也有可能是 IMX700Y 传感器，是一个完全体的华为 P50 Pro。</p><h1 id="V2X：智能驾驶、车联网"><a href="#V2X：智能驾驶、车联网" class="headerlink" title="V2X：智能驾驶、车联网"></a>V2X：智能驾驶、车联网</h1><h2 id="Facebook宣布与宝马合作-探索佩戴智能眼镜驾驶车辆的影响"><a href="#Facebook宣布与宝马合作-探索佩戴智能眼镜驾驶车辆的影响" class="headerlink" title="Facebook宣布与宝马合作 探索佩戴智能眼镜驾驶车辆的影响"></a>Facebook 宣布与宝马合作 探索佩戴智能眼镜驾驶车辆的影响</h2><p>据国外媒体报道，Facebook（现更名为 Meta）仍在努力打造支持 AR 和 AI 辅助的智能眼镜。该公司宣布计划在更多地方实地测试其包含相机和传感器的 Project Aria 智能眼镜，此外还将对神经输入腕带产品进行测试。值得一提的是，测试的环境包括了汽车内。Facebook 与宝马新宣布的合作伙伴关系，将探索 AR 眼镜如何与汽车集成以及如何在移动的车辆中使用它们。</p><h2 id="峰飞自动驾驶eVTOL载人飞行器完成首飞测试"><a href="#峰飞自动驾驶eVTOL载人飞行器完成首飞测试" class="headerlink" title="峰飞自动驾驶eVTOL载人飞行器完成首飞测试"></a>峰飞自动驾驶 eVTOL 载人飞行器完成首飞测试</h2><p><img src="https://i0.hdslb.com/bfs/album/f8a5168e3cac04678d93d052eeed2d2496013ef7.png" alt="20211113233940"><br>近日，峰飞航空科技自主研发的自动驾驶 eVTOL 载人飞行器 V1500M 成功完成首飞测试。该项目负责人表示，不久后将启动 V1500M 的固定翼转换测试，验证由旋翼向固定翼飞行模式的转换。通过各项试飞测试，全速推进 V1500M 的研发，并争取在 2024 年取得适航认证。</p><h2 id="华为鸿蒙系统加速“上车”-主流车企认可与否成关键"><a href="#华为鸿蒙系统加速“上车”-主流车企认可与否成关键" class="headerlink" title="华为鸿蒙系统加速“上车” 主流车企认可与否成关键"></a>华为鸿蒙系统加速 “上车” 主流车企认可与否成关键</h2><p>北汽蓝谷有关负责人透露，搭载华为鸿蒙操作系统的北汽极狐华为版新车将于 11 月小批量产交付。小康股份方面则宣布，小康赛力斯将要发布的新车会搭载基于华为鸿蒙的智能座舱。此外，长安汽车和思皓汽车的智能座舱也有望采用华为鸿蒙软件系统。业内专家分析认为，华为鸿蒙操作系统 “上车” 的成败关键在于获得主流车企的认可，形成规模化。</p><h1 id="人工智能、区块链、云平台"><a href="#人工智能、区块链、云平台" class="headerlink" title="人工智能、区块链、云平台"></a>人工智能、区块链、云平台</h1><h2 id="百度人脸采集SDK通过CFCA权威安全测评"><a href="#百度人脸采集SDK通过CFCA权威安全测评" class="headerlink" title="百度人脸采集SDK通过CFCA权威安全测评"></a>百度人脸采集 SDK 通过 CFCA 权威安全测评</h2><p>近日，百度人脸采集 SDK 已通过中国金融认证中心（CFCA）在网络传输安全性、数据传输保密性、网络风险环境检测等 13 个维度的综合测评。据介绍，百度人脸采集 SDK 通过 SDK+API 的端云结合加密方式，从代码逻辑、采集方式、传输层多维度确保人脸数据采集成效，拦截非活体验证、人脸替换等黑产攻击。</p><h2 id="阿里AI技术获国际视觉大赛双冠军"><a href="#阿里AI技术获国际视觉大赛双冠军" class="headerlink" title="阿里AI技术获国际视觉大赛双冠军"></a>阿里 AI 技术获国际视觉大赛双冠军</h2><p>近日，在国际计算机视觉领域顶级会议 ICCV 2021 举办的 VIPriors 挑战赛中，阿里安全团队赢得了图像分类赛道和工业检测赛道的双料冠军。其通过 “数据增强”“动态网络结构”“伪标签方法” 等方式方法，降低了超过 30% 的 AI 模型算力成本，实现更低碳的 AI 计算，并提升了检测模型的检测精度。</p><h1 id="B2B-x2F-B2G：智慧城市"><a href="#B2B-x2F-B2G：智慧城市" class="headerlink" title="B2B/B2G：智慧城市"></a>B2B/B2G：智慧城市</h1><h2 id="中国已建成全球最大充电网络"><a href="#中国已建成全球最大充电网络" class="headerlink" title="中国已建成全球最大充电网络"></a>中国已建成全球最大充电网络</h2><p>中国电动汽车充电基础设施促进联盟最新数据显示，截至 9 月，全国充电基础设施累计达 222.3 万台，同比增长 56.8%。我国已建成全球最大规模充电设施网络。</p><h1 id="科技财经"><a href="#科技财经" class="headerlink" title="科技财经"></a>科技财经</h1><h2 id="华为前三季度实现销售收入4558亿元人民币-净利润率10-2"><a href="#华为前三季度实现销售收入4558亿元人民币-净利润率10-2" class="headerlink" title="华为前三季度实现销售收入4558亿元人民币 净利润率10.2%"></a>华为前三季度实现销售收入 4558 亿元人民币 净利润率 10.2%</h2><p><img src="https://i0.hdslb.com/bfs/album/3bff358b71e4978c36f980e4f17b2648768ed780.png" alt="20211113233842"></p><p>华为昨日发布 2021 年前三季度经营业绩，前三季度公司实现销售收入 4558 亿元人民币，净利润率 10.2%。值得关注的是，去年，华为发布的 2020 年三季度财报显示，期内公司实现销售收入 6713 亿元，同比增长 9.9%，净利润率 8.0%。这意味着，今年前三季度华为销售收入同比下降 32.1%。不过另一方面，销售净利率较去年提升了 26.25%。</p><h2 id="马斯克考虑办一所大学-叫得州理工"><a href="#马斯克考虑办一所大学-叫得州理工" class="headerlink" title="马斯克考虑办一所大学 叫得州理工"></a>马斯克考虑办一所大学 叫得州理工</h2><p><img src="https://i0.hdslb.com/bfs/album/30d563d29ca870f1caad9036fa1a0ebbcdd64996.png" alt="20211113233831"></p><p>10 月 29 日消息，特斯拉 CEO 埃隆・马斯克微博发文表示在考虑创办一所新大学，名为得克萨斯理工学院（Texas Institute of Technology &amp; Science）。马斯克月初表示，特斯拉将把总部从硅谷搬到得克萨斯州奥斯汀，但会继续在加利福尼亚州弗里蒙特运营其电动汽车工厂。而在去年，他已经搬家到得克萨斯州。</p><h2 id="苹果发布2021财年第四财季财报"><a href="#苹果发布2021财年第四财季财报" class="headerlink" title="苹果发布2021财年第四财季财报"></a>苹果发布 2021 财年第四财季财报</h2><p>苹果发布 2021 财年第四财季财报。财报显示，该季度，苹果实现营收 833.6 亿美元，同比增长 29%，市场预期 846.9 亿美元；调整后净利润 205.51 亿美元，同比增长 62%，市场预期 203.3 亿美元。大中华区营收为 145.63 亿美元，同比增长 83%，上年同期 79.46 亿美元。</p><script type="text/javascript">    function display(id){          var traget=document.getElementById(id);          if(traget.style.display=="none"){              traget.style.display="";          }else{              traget.style.display="none";        }     }  </script><div class="note info flat"><p>摘自<a href="javascript:void(0);" id="js_name" onclick="display('lb')">冯站长之家</a></p></div><code><div style="display:none" id="lb">    <strong>冯站长之家</strong>    <img src="https://mp.weixin.qq.com/mp/qrcode?scene=10000005&amp;size=102&amp;__biz=MzA5OTQyMDgyOQ==&amp;mid=2652620959&amp;idx=7&amp;sn=e5a109401e614bf414935c9bdebb38b7&amp;send_time=" alt="">    <p>    <label>微信号</label>    <span>fgzadmin</span>    </p>    <p>    <label>功能介绍</label>    <span>每天新闻资讯类公众号单篇阅读量排名经常第一！每天提供人工精选最新鲜、最全面、最有价值的新闻早餐，每天三分钟，知晓天下事。还有最新财经早餐、医疗晨报、历史上的今天、一日一诗等等站长精选推荐的精彩内容，精彩不容错过！</span>    </p></div></code>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;物联网头条&quot;&gt;&lt;a href=&quot;#物联网头条&quot; class=&quot;headerlink&quot; title=&quot;物联网头条&quot;&gt;&lt;/a&gt;物联网头条&lt;/h1&gt;&lt;h2 id=&quot;美国进一步限制华为、中兴等中企&quot;&gt;&lt;a href=&quot;#美国进一步限制华为、中兴等中企&quot; class=&quot;he</summary>
      
    
    
    
    
    <category term="IOT" scheme="https://kangblogs.top/tags/IOT/"/>
    
    <category term="物联网" scheme="https://kangblogs.top/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
    <category term="马斯克" scheme="https://kangblogs.top/tags/%E9%A9%AC%E6%96%AF%E5%85%8B/"/>
    
    <category term="智慧" scheme="https://kangblogs.top/tags/%E6%99%BA%E6%85%A7/"/>
    
  </entry>
  
  <entry>
    <title>储 “物” 间（一）</title>
    <link href="https://kangblogs.top/posts/3c6cceaa.html"/>
    <id>https://kangblogs.top/posts/3c6cceaa.html</id>
    <published>2021-11-09T15:16:37.000Z</published>
    <updated>2021-11-09T15:16:40.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="物联网头条"><a href="#物联网头条" class="headerlink" title="物联网头条"></a>物联网头条</h1><h2 id="台积电、美光等23家企业已向美国提交芯片数据"><a href="#台积电、美光等23家企业已向美国提交芯片数据" class="headerlink" title="台积电、美光等23家企业已向美国提交芯片数据"></a>台积电、美光等 23 家企业已向美国提交芯片数据</h2><p>今年 9 月，美国商务部以 “应对全球芯片危机” 为由，要求 20 多家芯片相关企业交出被视为商业机密的库存量、订单、销售记录等数据。如今，包括台积电、台联电、高塔、美光、日月光、西部数据、环球晶圆等 23 家企业与机构已经提交相关信息，部分文件涉及机密不对外公开；三星、英特尔等半导体龙头以及汽车半导体厂商英飞凌、恩智浦等尚未披露信息。</p><h1 id="底层技术、通信、网络安全"><a href="#底层技术、通信、网络安全" class="headerlink" title="底层技术、通信、网络安全"></a>底层技术、通信、网络安全</h1><h2 id="中国联通在全国启动5G消息试商用"><a href="#中国联通在全国启动5G消息试商用" class="headerlink" title="中国联通在全国启动5G消息试商用"></a>中国联通在全国启动 5G 消息试商用</h2><p><img src="https://i0.hdslb.com/bfs/album/36c588bad213be370a09dc6e983dc311bde4cd5e.png" alt="20211110001016"></p><p>日前，中国联通在全国启动 5G 消息试商用，并开展 “5G 消息体验招募活动”，面向企业客户和个人用户提供免费的 5G 消息体验包。据介绍，目前已陆续接入数十家 CSP（Chatbot Service Provider），初期将提供智慧金融、智慧商超、智慧物流、智慧政务、智慧出行等领域的应用场景。同时，中国联通将联合冬奥合作伙伴共同打造基于冬奥场景的 5G 消息应用，为公众带来智慧冬奥的全新体验。</p><h2 id="苹果正在开发代号Ibiza、Lobos和Palma的三款芯片"><a href="#苹果正在开发代号Ibiza、Lobos和Palma的三款芯片" class="headerlink" title="苹果正在开发代号Ibiza、Lobos和Palma的三款芯片"></a>苹果正在开发代号 Ibiza、Lobos 和 Palma 的三款芯片</h2><p>据外媒报道，苹果新开发计划里的几款芯片都将采用 3nm 工艺，对应不同层面的性能需求，预计会在 2023 年亮相。相比现在的 M1 系列 SoC，可以在功耗相同的情况下拥有更多的晶体管并提高频率。据称，最顶级的一款芯片会配置 40 个 CPU 内核，以满足像 Mac Pro 这样的工作站在性能方面的需求。在时间点上，与台积电 N3 制程节点的量产计划步调一致。</p><h2 id="小米张国全表示用户可以放心打开5G开关了"><a href="#小米张国全表示用户可以放心打开5G开关了" class="headerlink" title="小米张国全表示用户可以放心打开5G开关了"></a>小米张国全表示用户可以放心打开 5G 开关了</h2><p><img src="https://i0.hdslb.com/bfs/album/e4f5d8ac3407260aaad7c90b432bc6d79d22dc86.png" alt="图片"></p><p>昨日，小米手机系统软件部总监张国全在微博上表示，手机 5G 功耗有了大幅度下降，如果大家因为功耗问题关闭了 5G，现在可以放心打开了。他提出，最近三大运营商基本快完成全覆盖，SA 待机功耗大幅度下降，和 4G LTE 差别已经不大 (2mA 左右的差距)。</p><h2 id="联发科已通知客户提高芯片价格"><a href="#联发科已通知客户提高芯片价格" class="headerlink" title="联发科已通知客户提高芯片价格"></a>联发科已通知客户提高芯片价格</h2><p>据外媒报道，联发科已于 11 月份通知客户将提高芯片价格，平均上调 10%-15%，外媒称 5G 芯片的价格此次也有上调，幅度约 5%。</p><h1 id="B2B：智能制造、机器人"><a href="#B2B：智能制造、机器人" class="headerlink" title="B2B：智能制造、机器人"></a>B2B：智能制造、机器人</h1><h2 id="百度智能云和中电互联打造自主可控工业互联网联合实验室"><a href="#百度智能云和中电互联打造自主可控工业互联网联合实验室" class="headerlink" title="百度智能云和中电互联打造自主可控工业互联网联合实验室"></a>百度智能云和中电互联打造自主可控工业互联网联合实验室</h2><p>该实验室将深入整合双方产品技术优势，着力打造国内领先的跨行业跨领域的工业互联网平台。面向 SMT、高端面板、鞋帽服装等行业进行智能化改造，通过智能化生产、网络化协同、个性化定制、服务化延伸、数字化管理五大应用模式，助力企业提质增效。</p><h2 id="腾讯云、用友、英特尔发布智能制造联合解决方案"><a href="#腾讯云、用友、英特尔发布智能制造联合解决方案" class="headerlink" title="腾讯云、用友、英特尔发布智能制造联合解决方案"></a>腾讯云、用友、英特尔发布智能制造联合解决方案</h2><p>联合方案实现了对复杂离散制造业的整体云化，满足制造企业上云的各类复杂业务场景。联合方案发挥腾讯云计算、AI、大数据、协同等优势，联合用友、英特尔的优势能力，助力制造企业全面数字化转型升级。</p><h1 id="B2C：智能家居、智能硬件、可穿戴"><a href="#B2C：智能家居、智能硬件、可穿戴" class="headerlink" title="B2C：智能家居、智能硬件、可穿戴"></a>B2C：智能家居、智能硬件、可穿戴</h1><h2 id="苹果同款天价抛光布上架拼多多"><a href="#苹果同款天价抛光布上架拼多多" class="headerlink" title="苹果同款天价抛光布上架拼多多"></a>苹果同款天价抛光布上架拼多多</h2><p><img src="https://i0.hdslb.com/bfs/album/b0f8efc6cd5a93ab28ad27c4dc1822d70996da6f.png" alt="20211110001105"></p><p>前不久，苹果发布的 145 元 “天价” 抛光布，引起了众多网友调侃与不解。虽然吐嘈声不断，但该产品上架后不久便被秒空，官网交货日期一度达到了 12 周。日前，有网友发现，这块 “天价” 抛光布已在拼多多上架，售价仅 16.79 元起。其产品宣传图与详情页显示：“Apple 同款、工厂直销，现货直发，和官网一模一样”。</p><h2 id="摩托罗拉要跟小米抢骁龙898首发"><a href="#摩托罗拉要跟小米抢骁龙898首发" class="headerlink" title="摩托罗拉要跟小米抢骁龙898首发"></a>摩托罗拉要跟小米抢骁龙 898 首发</h2><p><img src="https://i0.hdslb.com/bfs/album/e0fc60c3497ee818b9f997258227bf389b057571.png" alt="20211110001114"></p><p>昨日，联想中国区手机业务部总经理陈劲预告，摩托罗拉新机 edge X 即将发布。之前陈劲在与网友互动时透露，搭载高通骁龙 898 的摩托罗拉新机会在 2022 年元旦之前发布。@数码闲聊站也透露，摩托罗拉可能会与小米抢骁龙 898 首发权。</p><h2 id="华为医疗器械专利曝光"><a href="#华为医疗器械专利曝光" class="headerlink" title="华为医疗器械专利曝光"></a>华为医疗器械专利曝光</h2><p>近日，华为正式获批开始生产医疗器械，华为腕部单导心电采集器正式批准生产。据悉，华为的血压监测装置专利，通过获取用户的腕围数据以及腕部脂肪厚度数据，提高了血压测量精度，以及血压测量装置的兼容性，增强了用户的佩戴体验。</p><h1 id="V2X：智能驾驶、车联网"><a href="#V2X：智能驾驶、车联网" class="headerlink" title="V2X：智能驾驶、车联网"></a>V2X：智能驾驶、车联网</h1><h2 id="上海新增7000余个智能网联汽车可测交通场景"><a href="#上海新增7000余个智能网联汽车可测交通场景" class="headerlink" title="上海新增7000余个智能网联汽车可测交通场景"></a>上海新增 7000 余个智能网联汽车可测交通场景</h2><p>昨日，上海市交通委公布上海最新开放临港新片区 386 区块全域、嘉定新城全域共 372 条 722.60 公里道路，新增 7000 余个可测交通场景。其中临港新片区两港大道部分路段的开放，标志着上海准许智能网联汽车可以在城市快速路开展道路测试活动。 </p><h2 id="微软首席技术官称公司没有造车计划"><a href="#微软首席技术官称公司没有造车计划" class="headerlink" title="微软首席技术官称公司没有造车计划"></a>微软首席技术官称公司没有造车计划</h2><p>在第四届进博会上，微软（中国）首席技术官韦青对于 “微软跨界造车” 等相关问题回应称，从目前所看的趋势来讲，微软没有造车计划。但微软也可以参与造车工作，可利用自己的计算能力、算法能力、存储能力、网络能力，来帮助汽车行业，让他们的车更加好开。</p><h1 id="人工智能、区块链、云平台"><a href="#人工智能、区块链、云平台" class="headerlink" title="人工智能、区块链、云平台"></a>人工智能、区块链、云平台</h1><h2 id="达摩院实现全球最大AI预训练模型"><a href="#达摩院实现全球最大AI预训练模型" class="headerlink" title="达摩院实现全球最大AI预训练模型"></a>达摩院实现全球最大 AI 预训练模型</h2><p><img src="https://i0.hdslb.com/bfs/album/bc4b67098e1ab3d20c1be79aae2a4a6bf1834fc4.png" alt="20211110001125"></p><p>11 月 8 日，阿里巴巴达摩院公布多模态大模型 M6 最新进展，其参数已从万亿跃迁至 10 万亿，规模远超 Google、微软此前发布的万亿级模型，成为全球最大的 AI 预训练模型。 同时，M6 做到了业内极致的低碳高效，使用 512 GPU 在 10 天内即训练出具有可用水平的 10 万亿模型。</p><h2 id="以太坊首次突破4700美元"><a href="#以太坊首次突破4700美元" class="headerlink" title="以太坊首次突破4700美元"></a>以太坊首次突破 4700 美元</h2><p>美东时间周日晚间，全球第二大加密货币以太坊的价格首次突破 4700 美元。上周有报道称，包括对冲基金经理拉胡尔・拉伊（Rahul Rai）在内的一些加密货币专家认为，以太坊有望在 2022 年年中取代比特币成为全球最大加密货币。</p><h1 id="B2B-x2F-B2G：智慧城市"><a href="#B2B-x2F-B2G：智慧城市" class="headerlink" title="B2B/B2G：智慧城市"></a>B2B/B2G：智慧城市</h1><h2 id="机器狗现身常州参与巡逻防疫"><a href="#机器狗现身常州参与巡逻防疫" class="headerlink" title="机器狗现身常州参与巡逻防疫"></a>机器狗现身常州参与巡逻防疫</h2><p><img src="https://i0.hdslb.com/bfs/album/439cd686d27a1faad5fbbc5794fc76fe675bb070.png" alt="20211110001138"></p><p>近日，机器狗现身江苏常州武进御城小区，可以在小区的人群中匀速穿行而过，准确避开居民，遇到雨天也能平稳上下台阶和斜坡。同时，不仅可以不间断参与小区防疫巡逻，还能现场喊话，让居民保持社交距离。</p><h2 id="央视CCTV-16奥运频道已覆盖31省"><a href="#央视CCTV-16奥运频道已覆盖31省" class="headerlink" title="央视CCTV-16奥运频道已覆盖31省"></a>央视 CCTV-16 奥运频道已覆盖 31 省</h2><p>据央视介绍，作为国际上首个以 4K 超高清和数字平台同步播出的体育频道，奥林匹克频道包含央视奥林匹克电视频道和数字平台。其中，电视频道将以 CCTV16 为呼号，以 4K＋高清同播模式 24 小时上星开路播出；数字平台覆盖 PC 端、APP 端、H5 以及微信、微博新媒体平台。截至昨日，全国 31 个省（自治区、直辖市）IPTV 平台均已上线奥林匹克高清频道，覆盖用户近 3 亿户。</p><h1 id="科技财经"><a href="#科技财经" class="headerlink" title="科技财经"></a>科技财经</h1><h2 id="华为出售X86服务器业务已有实质性进展"><a href="#华为出售X86服务器业务已有实质性进展" class="headerlink" title="华为出售X86服务器业务已有实质性进展"></a>华为出售 X86 服务器业务已有实质性进展</h2><p>工商登记显示，华为控股的超聚变数字技术有限公司股东已变更为河南超聚能。此前传闻华为的 X86 服务器业务出售已有实质进展。华为 X86 服务器业务的买家将由产业基金、海外国家主权基金、互联网公司、银行等多方社会资本组成。接近交易的一位知情人士表示：“此次工商变更只是完成了第一步，后续其他投资方将陆续完成工商变更。”</p><h2 id="推特粉丝支持马斯克出售10-特斯拉股份并缴税"><a href="#推特粉丝支持马斯克出售10-特斯拉股份并缴税" class="headerlink" title="推特粉丝支持马斯克出售10%特斯拉股份并缴税"></a>推特粉丝支持马斯克出售 10% 特斯拉股份并缴税</h2><p><img src="https://i0.hdslb.com/bfs/album/dda06ad8a10f3ef2ec74cb32dd773c9c1e5b9add.png" alt="20211110001149"></p><p>6 日，马斯克在推特上发起一项网络投票活动，并宣布将根据投票结果决定是否出售其拥有的全部特斯拉股票的 10%。这项网络投票已于美国东部时间 7 日下午 3 时结束，共有 351 万人参与投票，其中 58% 支持马斯克出售股票。马斯克表示，无论结果如何，都将遵守这次投票的结果。他同时发帖称，“我没有从任何地方拿现金工资或奖金。我只有股票，所以我个人纳税的唯一方法就是卖股票。”</p><script type="text/javascript">    function display(id){          var traget=document.getElementById(id);          if(traget.style.display=="none"){              traget.style.display="";          }else{              traget.style.display="none";        }     }  </script><div class="note info flat"><p>摘自<a href="javascript:void(0);" id="js_name" onclick="display('lb')">冯站长之家</a></p></div><code><div style="display:none" id="lb">    <strong>冯站长之家</strong>    <img src="https://mp.weixin.qq.com/mp/qrcode?scene=10000005&amp;size=102&amp;__biz=MzA5OTQyMDgyOQ==&amp;mid=2652620959&amp;idx=7&amp;sn=e5a109401e614bf414935c9bdebb38b7&amp;send_time=" alt="">    <p>    <label>微信号</label>    <span>fgzadmin</span>    </p>    <p>    <label>功能介绍</label>    <span>每天新闻资讯类公众号单篇阅读量排名经常第一！每天提供人工精选最新鲜、最全面、最有价值的新闻早餐，每天三分钟，知晓天下事。还有最新财经早餐、医疗晨报、历史上的今天、一日一诗等等站长精选推荐的精彩内容，精彩不容错过！</span>    </p></div></code>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;物联网头条&quot;&gt;&lt;a href=&quot;#物联网头条&quot; class=&quot;headerlink&quot; title=&quot;物联网头条&quot;&gt;&lt;/a&gt;物联网头条&lt;/h1&gt;&lt;h2 id=&quot;台积电、美光等23家企业已向美国提交芯片数据&quot;&gt;&lt;a href=&quot;#台积电、美光等23家企业已向美国提交芯</summary>
      
    
    
    
    
    <category term="IOT" scheme="https://kangblogs.top/tags/IOT/"/>
    
    <category term="物联网" scheme="https://kangblogs.top/tags/%E7%89%A9%E8%81%94%E7%BD%91/"/>
    
    <category term="5G" scheme="https://kangblogs.top/tags/5G/"/>
    
  </entry>
  
  <entry>
    <title>数电学习・格雷码</title>
    <link href="https://kangblogs.top/posts/e7d047d4.html"/>
    <id>https://kangblogs.top/posts/e7d047d4.html</id>
    <published>2021-02-22T16:00:18.000Z</published>
    <updated>2021-02-22T16:00:21.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>　　<rainbow-text>格雷码</rainbow-text>（<code>Gray Code</code>）又被称<code>反射二进制码</code>（<code>Reflected Binary Code</code>）或（<code>Reflected Binary</code>），是由贝尔实验室的 Frank Gray 在 1940 年提出，用于在 PCM（脉冲编码调变）方法传送讯号时防止出错，并于 1953 年 3 月 17 日取得美国专利。格雷码是一个数列集合，相邻两数间只有一个位元改变，为无权数码，且格雷码的顺序不是唯一的。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;　　&lt;rainbow-text&gt;格雷码&lt;/rainbow-text&gt;（&lt;code&gt;Gray Code&lt;/code&gt;）又被称&lt;code&gt;反射二</summary>
      
    
    
    
    
    <category term="数电" scheme="https://kangblogs.top/tags/%E6%95%B0%E7%94%B5/"/>
    
    <category term="格雷码" scheme="https://kangblogs.top/tags/%E6%A0%BC%E9%9B%B7%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>今日校园自动提交・AUST</title>
    <link href="https://kangblogs.top/posts/e157cbc8.html"/>
    <id>https://kangblogs.top/posts/e157cbc8.html</id>
    <published>2021-01-15T16:54:43.000Z</published>
    <updated>2021-03-18T13:43:21.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于子墨大佬的教程已足够详细，不再赘叙。传送门：<a class="btn-beautify blue larger" href="https://github.com/ZimoLoveShuang/auto-submit" title="教程"><i class="far fa-hand-point-right"></i><span>教程</span></a>。此只提供文件以减少校友配置的时间。</p></blockquote><h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><table>    <tbody>    <tr>        <th>时间</th>        <th>更新内容</th>    </tr>    <tr>        <td rowspan="1"> 2021.03.18</td>        <td> 添加 UA<code>headers = {        'User-Agent': 'Mozilla/5.0 (iPad; U; CPU OS 3_2_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B500 Safari/531.21.10'    }</code><img src="https://i0.hdslb.com/bfs/album/4786c7f8666e1d24c9abd6233b2c82b72e262912.png"></td>    </tr>    <tr>        <td rowspan="1">2021.01.31</td>        <td>“辅导员满意度测评”😀😀😀</td>    </tr>    <tr>        <td rowspan="1">2021.01.22</td>        <td> 删除 Server 酱通知</td>    </tr>    <tr>        <td rowspan="1"> 2021.01.18</td>        <td> 删除多余参数 <code>user['user']['email']</code><img src="https://i0.hdslb.com/bfs/album/a60f4fab93591bc2bc7818e7c6acf751db867a9a.png" alt="20210118163458"></td>    </tr>    <tr>        <td rowspan="1">2021.01.16</td>        <td> 新添 <code>Submit</code> 版本</td>    </tr>    </tbody></table><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ul><li>此为<rainbow-text> AUST</rainbow-text>（安徽理工大学）专版。<del>其实就是为了方便校友</del></li><li>基于腾讯云函数</li><li>使用了自建 api。大佬造好的轮子。</li><li><del>新增消息通知 <a href="http://sc.ftqq.com/3.version">Server 酱</a></del></li><li>新增消息通知 <a href="https://qmsg.zendee.cn/">Qmsg 酱</a></li></ul><h1 id="所用代码"><a href="#所用代码" class="headerlink" title="所用代码"></a>所用代码</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">config.yml</button></li><li class="tab"><button type="button" data-href="#uuid-2">generate.py</button></li><li class="tab"><button type="button" data-href="#uuid-3">index.py</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#登陆相关配置</span></span><br><span class="line"><span class="attr">login:</span></span><br><span class="line">  <span class="comment">#开放的模拟登陆api服务器地址</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">"http://121.196.172.243:8080/wisedu-unified-login-api-v1.0/api/login"</span></span><br><span class="line"><span class="comment">#用户组配置</span></span><br><span class="line"><span class="attr">users:</span></span><br><span class="line">  <span class="comment">#单个用户配置</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">user:</span></span><br><span class="line">      <span class="comment">#username 学号或者工号</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">'2019******'</span></span><br><span class="line">      <span class="comment">#password 密码</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">'*************'</span></span><br><span class="line">      <span class="comment">#address 地址，定位信息</span></span><br><span class="line">      <span class="attr">address:</span> <span class="string">中国**省**市</span></span><br><span class="line">      <span class="comment">#email 接受通知消息的邮箱</span></span><br><span class="line">      <span class="attr">email:</span> <span class="string">************@qq.com</span></span><br><span class="line">      <span class="comment">#lon 当前位置经度，可以访问http://zuobiao.ay800.com/s/27/index.php获取</span></span><br><span class="line">      <span class="attr">lon:</span> <span class="string">'11*.******'</span></span><br><span class="line">      <span class="comment">#lat 当前位置纬度</span></span><br><span class="line">      <span class="attr">lat:</span> <span class="string">'3*.******'</span></span><br><span class="line">      <span class="comment">#school 学校全称</span></span><br><span class="line">      <span class="attr">school:</span> <span class="string">安徽理工大学</span></span><br><span class="line"><span class="comment">#今日校园相关配置</span></span><br><span class="line"><span class="attr">cpdaily:</span></span><br><span class="line">  <span class="comment">#表单组默认选项配置</span></span><br><span class="line">  <span class="attr">defaults:</span></span><br><span class="line">    <span class="comment">#表单默认选项配置，按顺序，注意，只有标必填项的才处理，不会配置就执行generate.py</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">今天你的所在地是？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">**省/**市/**市</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">今天你的体温是多少？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="number">37.2</span><span class="string">℃及以下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">今天你的身体状况是？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">健康</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">近14天你或你的共同居住人是否有疫情中、高风险区域人员接触史？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">否</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">近14天你或你的共同居住人是否和确诊、疑似病人接触过？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">否</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">近14天你或你的共同居住人是否是确诊、疑似病例？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">否</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">你或你的共同居住人目前是否被医学隔离？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">否</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">今天你当地的健康码颜色是？</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">绿色</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">本人是否承诺以上所填报的全部内容均属实、准确，不存在任何隐瞒与不实的情况，更无遗漏之处</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">是</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> index <span class="keyword">as</span> app</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成默认配置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate</span>():</span><br><span class="line">    config = app.config</span><br><span class="line">    user = config[<span class="string">'users'</span>][<span class="number">0</span>]</span><br><span class="line">    apis = app.getCpdailyApis(user)</span><br><span class="line">    session = app.getSession(user, apis[<span class="string">'login-url'</span>])</span><br><span class="line">    form = <span class="built_in">dict</span>(app.queryForm(session, apis))[<span class="string">'form'</span>]</span><br><span class="line">    <span class="comment"># app.log(form)</span></span><br><span class="line">    defaults = []</span><br><span class="line">    sort = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> formItem <span class="keyword">in</span> form:</span><br><span class="line">        <span class="keyword">if</span> formItem[<span class="string">'isRequired'</span>] == <span class="number">1</span>:</span><br><span class="line">            default = {}</span><br><span class="line">            one = {}</span><br><span class="line">            default[<span class="string">'title'</span>] = formItem[<span class="string">'title'</span>]</span><br><span class="line">            default[<span class="string">'type'</span>] = formItem[<span class="string">'fieldType'</span>]</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'问题%d：'</span> % sort + default[<span class="string">'title'</span>])</span><br><span class="line">            <span class="keyword">if</span> default[<span class="string">'type'</span>] == <span class="number">1</span> <span class="keyword">or</span> default[<span class="string">'type'</span>] == <span class="number">5</span>:</span><br><span class="line">                default[<span class="string">'value'</span>] = <span class="built_in">input</span>(<span class="string">"请输入文本："</span>)</span><br><span class="line">            <span class="keyword">if</span> default[<span class="string">'type'</span>] == <span class="number">2</span>:</span><br><span class="line">                fieldItems = formItem[<span class="string">'fieldItems'</span>]</span><br><span class="line">                num = <span class="number">1</span></span><br><span class="line">                <span class="keyword">for</span> fieldItem <span class="keyword">in</span> fieldItems:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">'\t%d '</span> % num + fieldItem[<span class="string">'content'</span>])</span><br><span class="line">                    num += <span class="number">1</span></span><br><span class="line">                choose = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">"请输入序号："</span>))</span><br><span class="line">                <span class="keyword">if</span> choose &lt; <span class="number">1</span> <span class="keyword">or</span> choose &gt; num:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">'输入错误，请重新执行此脚本'</span>)</span><br><span class="line">                    exit(-<span class="number">1</span>)</span><br><span class="line">                default[<span class="string">'value'</span>] = fieldItems[choose - <span class="number">1</span>][<span class="string">'content'</span>]</span><br><span class="line">            <span class="keyword">if</span> default[<span class="string">'type'</span>] == <span class="number">3</span>:</span><br><span class="line">                fieldItems = formItem[<span class="string">'fieldItems'</span>]</span><br><span class="line">                num = <span class="number">1</span></span><br><span class="line">                <span class="keyword">for</span> fieldItem <span class="keyword">in</span> fieldItems:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">'\t%d '</span> % num + fieldItem[<span class="string">'content'</span>])</span><br><span class="line">                    num += <span class="number">1</span></span><br><span class="line">                chooses = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>(<span class="string">'请输入序号（可输入多个，请用空格隔开）：'</span>).split()))</span><br><span class="line">                default[<span class="string">'value'</span>] = <span class="string">''</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(chooses)):</span><br><span class="line">                    choose = chooses[i]</span><br><span class="line">                    <span class="keyword">if</span> choose &lt; <span class="number">1</span> <span class="keyword">or</span> choose &gt; num:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">'输入错误，请重新执行此脚本'</span>)</span><br><span class="line">                        exit(-<span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">if</span> i != <span class="built_in">len</span>(chooses) - <span class="number">1</span>:</span><br><span class="line">                        default[<span class="string">'value'</span>] += fieldItems[choose - <span class="number">1</span>][<span class="string">'content'</span>] + <span class="string">','</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        default[<span class="string">'value'</span>] += fieldItems[choose - <span class="number">1</span>][<span class="string">'content'</span>]</span><br><span class="line">            <span class="keyword">if</span> default[<span class="string">'type'</span>] == <span class="number">4</span>:</span><br><span class="line">                default[<span class="string">'value'</span>] = <span class="built_in">input</span>(<span class="string">"请输入图片名称："</span>)</span><br><span class="line">            one[<span class="string">'default'</span>] = default</span><br><span class="line">            defaults.append(one)</span><br><span class="line">            sort += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'======================分隔线======================'</span>)</span><br><span class="line">    <span class="built_in">print</span>(yaml.dump(defaults, allow_unicode=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    generate()</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-3"><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">import</span> oss2</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta, timezone</span><br><span class="line"><span class="keyword">from</span> urllib3.exceptions <span class="keyword">import</span> InsecureRequestWarning</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"></span><br><span class="line"><span class="comment"># debug模式</span></span><br><span class="line">debug = <span class="literal">False</span></span><br><span class="line"><span class="keyword">if</span> debug:</span><br><span class="line">    requests.packages.urllib3.disable_warnings(InsecureRequestWarning)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取yml配置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getYmlConfig</span>(<span class="params">yaml_file=<span class="string">'config.yml'</span></span>):</span><br><span class="line">    file = <span class="built_in">open</span>(yaml_file, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">    file_data = file.read()</span><br><span class="line">    file.close()</span><br><span class="line">    config = yaml.load(file_data, Loader=yaml.FullLoader)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>(config)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局配置</span></span><br><span class="line">config = getYmlConfig(yaml_file=<span class="string">'config.yml'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取今日校园api</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getCpdailyApis</span>(<span class="params">user</span>):</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (iPad; U; CPU OS 3_2_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B500 Safari/531.21.10'</span></span><br><span class="line">    }</span><br><span class="line">    apis = {}</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    schools = requests.get(url=<span class="string">'https://mobile.campushoy.com/v6/config/guest/tenant/list'</span>, headers=headers, verify=<span class="keyword">not</span> debug).json()[</span><br><span class="line">        <span class="string">'data'</span>]</span><br><span class="line">    flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> one <span class="keyword">in</span> schools:</span><br><span class="line">        <span class="keyword">if</span> one[<span class="string">'name'</span>] == user[<span class="string">'school'</span>]:</span><br><span class="line">            <span class="keyword">if</span> one[<span class="string">'joinType'</span>] == <span class="string">'NONE'</span>:</span><br><span class="line">                log(user[<span class="string">'school'</span>] + <span class="string">' 未加入今日校园'</span>)</span><br><span class="line">                exit(-<span class="number">1</span>)</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">            params = {</span><br><span class="line">                <span class="string">'ids'</span>: one[<span class="string">'id'</span>]</span><br><span class="line">            }</span><br><span class="line">            res = requests.get(url=<span class="string">'https://mobile.campushoy.com/v6/config/guest/tenant/info'</span>, params=params, headers=headers,</span><br><span class="line">                               verify=<span class="keyword">not</span> debug)</span><br><span class="line">            data = res.json()[<span class="string">'data'</span>][<span class="number">0</span>]</span><br><span class="line">            joinType = data[<span class="string">'joinType'</span>]</span><br><span class="line">            idsUrl = data[<span class="string">'idsUrl'</span>]</span><br><span class="line">            ampUrl = data[<span class="string">'ampUrl'</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'campusphere'</span> <span class="keyword">in</span> ampUrl <span class="keyword">or</span> <span class="string">'cpdaily'</span> <span class="keyword">in</span> ampUrl:</span><br><span class="line">                parse = urlparse(ampUrl)</span><br><span class="line">                host = parse.netloc</span><br><span class="line">                res = requests.get(parse.scheme + <span class="string">'://'</span> + host)</span><br><span class="line">                parse = urlparse(res.url)</span><br><span class="line">                apis[</span><br><span class="line">                    <span class="string">'login-url'</span>] = idsUrl + <span class="string">'/login?service='</span> + parse.scheme + <span class="string">r"%3A%2F%2F"</span> + host + <span class="string">r'%2Fportal%2Flogin'</span></span><br><span class="line">                apis[<span class="string">'host'</span>] = host</span><br><span class="line"></span><br><span class="line">            ampUrl2 = data[<span class="string">'ampUrl2'</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'campusphere'</span> <span class="keyword">in</span> ampUrl2 <span class="keyword">or</span> <span class="string">'cpdaily'</span> <span class="keyword">in</span> ampUrl2:</span><br><span class="line">                parse = urlparse(ampUrl2)</span><br><span class="line">                host = parse.netloc</span><br><span class="line">                res = requests.get(parse.scheme + <span class="string">'://'</span> + host)</span><br><span class="line">                parse = urlparse(res.url)</span><br><span class="line">                apis[</span><br><span class="line">                    <span class="string">'login-url'</span>] = idsUrl + <span class="string">'/login?service='</span> + parse.scheme + <span class="string">r"%3A%2F%2F"</span> + host + <span class="string">r'%2Fportal%2Flogin'</span></span><br><span class="line">                apis[<span class="string">'host'</span>] = host</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> flag:</span><br><span class="line">        log(user[<span class="string">'school'</span>] + <span class="string">' 未找到该院校信息，请检查是否是学校全称错误'</span>)</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line">    log(apis)</span><br><span class="line">    <span class="keyword">return</span> apis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前utc时间，并格式化为北京时间</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getTimeStr</span>():</span><br><span class="line">    utc_dt = datetime.utcnow().replace(tzinfo=timezone.utc)</span><br><span class="line">    bj_dt = utc_dt.astimezone(timezone(timedelta(hours=<span class="number">8</span>)))</span><br><span class="line">    <span class="keyword">return</span> bj_dt.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出调试信息，并及时刷新缓冲区</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="built_in">print</span>(getTimeStr() + <span class="string">' '</span> + <span class="built_in">str</span>(content))</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 登陆并返回session</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getSession</span>(<span class="params">user, loginUrl</span>):</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    params = {</span><br><span class="line">        <span class="string">'login_url'</span>: loginUrl,</span><br><span class="line">        <span class="comment"># 保证学工号和密码正确下面两项就不需要配置</span></span><br><span class="line">        <span class="string">'needcaptcha_url'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'captcha_url'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'username'</span>: user[<span class="string">'username'</span>],</span><br><span class="line">        <span class="string">'password'</span>: user[<span class="string">'password'</span>]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cookies = {}</span><br><span class="line">    <span class="comment"># 借助上一个项目开放出来的登陆API，模拟登陆</span></span><br><span class="line">    res = requests.post(config[<span class="string">'login'</span>][<span class="string">'api'</span>], params, verify=<span class="keyword">not</span> debug)</span><br><span class="line">    cookieStr = <span class="built_in">str</span>(res.json()[<span class="string">'cookies'</span>])</span><br><span class="line">    log(cookieStr)</span><br><span class="line">    <span class="keyword">if</span> cookieStr == <span class="string">'None'</span>:</span><br><span class="line">        log(res.json())</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析cookie</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> cookieStr.split(<span class="string">';'</span>):</span><br><span class="line">        name, value = line.strip().split(<span class="string">'='</span>, <span class="number">1</span>)</span><br><span class="line">        cookies[name] = value</span><br><span class="line">    session = requests.session()</span><br><span class="line">    session.cookies = requests.utils.cookiejar_from_dict(cookies)</span><br><span class="line">    <span class="keyword">return</span> session</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询表单</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">queryForm</span>(<span class="params">session, apis</span>):</span><br><span class="line">    host = apis[<span class="string">'host'</span>]</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Linux; Android 4.4.4; OPPO R11 Plus Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/33.0.0.0 Safari/537.36 yiban/8.1.11 cpdaily/8.1.11 wisedu/8.1.11'</span>,</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip,deflate'</span>,</span><br><span class="line">        <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,en-US;q=0.8'</span>,</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=UTF-8'</span></span><br><span class="line">    }</span><br><span class="line">    queryCollectWidUrl = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/queryCollectorProcessingList'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    params = {</span><br><span class="line">        <span class="string">'pageSize'</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="string">'pageNumber'</span>: <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">    res = session.post(queryCollectWidUrl, headers=headers,</span><br><span class="line">                       data=json.dumps(params), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(res.json()[<span class="string">'datas'</span>][<span class="string">'rows'</span>]) &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    collectWid = res.json()[<span class="string">'datas'</span>][<span class="string">'rows'</span>][<span class="number">0</span>][<span class="string">'wid'</span>]</span><br><span class="line">    formWid = res.json()[<span class="string">'datas'</span>][<span class="string">'rows'</span>][<span class="number">0</span>][<span class="string">'formWid'</span>]</span><br><span class="line"></span><br><span class="line">    detailCollector = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/detailCollector'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    res = session.post(url=detailCollector, headers=headers,</span><br><span class="line">                       data=json.dumps({<span class="string">"collectorWid"</span>: collectWid}), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    schoolTaskWid = res.json()[<span class="string">'datas'</span>][<span class="string">'collector'</span>][<span class="string">'schoolTaskWid'</span>]</span><br><span class="line"></span><br><span class="line">    getFormFields = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/getFormFields'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    res = session.post(url=getFormFields, headers=headers, data=json.dumps(</span><br><span class="line">        {<span class="string">"pageSize"</span>: <span class="number">100</span>, <span class="string">"pageNumber"</span>: <span class="number">1</span>, <span class="string">"formWid"</span>: formWid, <span class="string">"collectorWid"</span>: collectWid}), verify=<span class="keyword">not</span> debug)</span><br><span class="line"></span><br><span class="line">    form = res.json()[<span class="string">'datas'</span>][<span class="string">'rows'</span>]</span><br><span class="line">    <span class="keyword">return</span> {<span class="string">'collectWid'</span>: collectWid, <span class="string">'formWid'</span>: formWid, <span class="string">'schoolTaskWid'</span>: schoolTaskWid, <span class="string">'form'</span>: form}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 填写form</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fillForm</span>(<span class="params">session, form, host</span>):</span><br><span class="line">    sort = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> formItem <span class="keyword">in</span> form[:]:</span><br><span class="line">        <span class="comment"># 只处理必填项</span></span><br><span class="line">        <span class="keyword">if</span> formItem[<span class="string">'isRequired'</span>] == <span class="number">1</span>:</span><br><span class="line">            default = config[<span class="string">'cpdaily'</span>][<span class="string">'defaults'</span>][sort - <span class="number">1</span>][<span class="string">'default'</span>]</span><br><span class="line">            <span class="keyword">if</span> formItem[<span class="string">'title'</span>] != default[<span class="string">'title'</span>]:</span><br><span class="line">                log(<span class="string">'第%d个默认配置不正确，请检查'</span> % sort)</span><br><span class="line">                exit(-<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># 文本直接赋值</span></span><br><span class="line">            <span class="keyword">if</span> formItem[<span class="string">'fieldType'</span>] == <span class="number">1</span> <span class="keyword">or</span> formItem[<span class="string">'fieldType'</span>] == <span class="number">5</span>:</span><br><span class="line">                formItem[<span class="string">'value'</span>] = default[<span class="string">'value'</span>]</span><br><span class="line">            <span class="comment"># 单选框需要删掉多余的选项</span></span><br><span class="line">            <span class="keyword">if</span> formItem[<span class="string">'fieldType'</span>] == <span class="number">2</span>:</span><br><span class="line">                <span class="comment"># 填充默认值</span></span><br><span class="line">                formItem[<span class="string">'value'</span>] = default[<span class="string">'value'</span>]</span><br><span class="line">                fieldItems = formItem[<span class="string">'fieldItems'</span>]</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(fieldItems))[::-<span class="number">1</span>]:</span><br><span class="line">                    <span class="keyword">if</span> fieldItems[i][<span class="string">'content'</span>] != default[<span class="string">'value'</span>]:</span><br><span class="line">                        <span class="keyword">del</span> fieldItems[i]</span><br><span class="line">            <span class="comment"># 多选需要分割默认选项值，并且删掉无用的其他选项</span></span><br><span class="line">            <span class="keyword">if</span> formItem[<span class="string">'fieldType'</span>] == <span class="number">3</span>:</span><br><span class="line">                fieldItems = formItem[<span class="string">'fieldItems'</span>]</span><br><span class="line">                defaultValues = default[<span class="string">'value'</span>].split(<span class="string">','</span>)</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(fieldItems))[::-<span class="number">1</span>]:</span><br><span class="line">                    flag = <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(defaultValues))[::-<span class="number">1</span>]:</span><br><span class="line">                        <span class="keyword">if</span> fieldItems[i][<span class="string">'content'</span>] == defaultValues[j]:</span><br><span class="line">                            <span class="comment"># 填充默认值</span></span><br><span class="line">                            formItem[<span class="string">'value'</span>] += defaultValues[j] + <span class="string">' '</span></span><br><span class="line">                            flag = <span class="literal">False</span></span><br><span class="line">                    <span class="keyword">if</span> flag:</span><br><span class="line">                        <span class="keyword">del</span> fieldItems[i]</span><br><span class="line">            <span class="comment"># 图片需要上传到阿里云oss</span></span><br><span class="line">            <span class="keyword">if</span> formItem[<span class="string">'fieldType'</span>] == <span class="number">4</span>:</span><br><span class="line">                fileName = uploadPicture(session, default[<span class="string">'value'</span>], host)</span><br><span class="line">                formItem[<span class="string">'value'</span>] = getPictureUrl(session, fileName, host)</span><br><span class="line">            log(<span class="string">'必填问题%d：'</span> % sort + formItem[<span class="string">'title'</span>])</span><br><span class="line">            log(<span class="string">'答案%d：'</span> % sort + formItem[<span class="string">'value'</span>])</span><br><span class="line">            sort += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            form.remove(formItem)</span><br><span class="line">    <span class="comment"># print(form)</span></span><br><span class="line">    <span class="keyword">return</span> form</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传图片到阿里云oss</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uploadPicture</span>(<span class="params">session, image, host</span>):</span><br><span class="line">    url = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/getStsAccess'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    res = session.post(url=url, headers={</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json'</span>}, data=json.dumps({}), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    datas = res.json().get(<span class="string">'datas'</span>)</span><br><span class="line">    fileName = datas.get(<span class="string">'fileName'</span>)</span><br><span class="line">    accessKeyId = datas.get(<span class="string">'accessKeyId'</span>)</span><br><span class="line">    accessSecret = datas.get(<span class="string">'accessKeySecret'</span>)</span><br><span class="line">    securityToken = datas.get(<span class="string">'securityToken'</span>)</span><br><span class="line">    endPoint = datas.get(<span class="string">'endPoint'</span>)</span><br><span class="line">    bucket = datas.get(<span class="string">'bucket'</span>)</span><br><span class="line">    bucket = oss2.Bucket(oss2.Auth(access_key_id=accessKeyId,</span><br><span class="line">                                   access_key_secret=accessSecret), endPoint, bucket)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(image, <span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">    bucket.put_object(key=fileName, headers={</span><br><span class="line">        <span class="string">'x-oss-security-token'</span>: securityToken}, data=data)</span><br><span class="line">    res = bucket.sign_url(<span class="string">'PUT'</span>, fileName, <span class="number">60</span>)</span><br><span class="line">    <span class="comment"># log(res)</span></span><br><span class="line">    <span class="keyword">return</span> fileName</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图片上传位置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPictureUrl</span>(<span class="params">session, fileName, host</span>):</span><br><span class="line">    url = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/previewAttachment'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    data = {</span><br><span class="line">        <span class="string">'ossKey'</span>: fileName</span><br><span class="line">    }</span><br><span class="line">    res = session.post(url=url, headers={</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json'</span>}, data=json.dumps(data), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    photoUrl = res.json().get(<span class="string">'datas'</span>)</span><br><span class="line">    <span class="keyword">return</span> photoUrl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交表单</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">submitForm</span>(<span class="params">formWid, address, collectWid, schoolTaskWid, form, session, host</span>):</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Linux; Android 4.4.4; OPPO R11 Plus Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/33.0.0.0 Safari/537.36 okhttp/3.12.4'</span>,</span><br><span class="line">        <span class="string">'CpdailyStandAlone'</span>: <span class="string">'0'</span>,</span><br><span class="line">        <span class="string">'extension'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'Cpdaily-Extension'</span>: <span class="string">'eZbW2qLZT0G0VbYqnj5mz5UCyZiuS+Mht0ro4VCSTgTancCpi4ru3IpfZibLN2Q4JR3dl7wYTXnTi5dzfAwbYcs5FB4VPqOTrcYNVjoRY9h9J7sxA1MWIWZxiEC7iuzXwAeEjrGmnHnX3P7mprZW66fbhNsIrM938cVo6aK7fgdQx6vGY7OVJBS+kqwk/xE2ipLqV0ro4QNZ9u/6G9MUbyd7QghLIM9PIRJTrd6TzoYPFBHqDHIY57dHHUBUC8RzfvreU/2o5sY='</span>,</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=utf-8'</span>,</span><br><span class="line">        <span class="comment"># 请注意这个应该和配置文件中的host保持一致</span></span><br><span class="line">        <span class="string">'Host'</span>: host,</span><br><span class="line">        <span class="string">'Connection'</span>: <span class="string">'Keep-Alive'</span>,</span><br><span class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip'</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 默认正常的提交参数json</span></span><br><span class="line">    params = {<span class="string">"formWid"</span>: formWid, <span class="string">"address"</span>: address, <span class="string">"collectWid"</span>: collectWid, <span class="string">"schoolTaskWid"</span>: schoolTaskWid,</span><br><span class="line">              <span class="string">"form"</span>: form, <span class="string">"uaIsCpadaily"</span>: <span class="literal">True</span>}</span><br><span class="line">    <span class="comment"># print(params)</span></span><br><span class="line">    submitForm = <span class="string">'https://{host}/wec-counselor-collector-apps/stu/collector/submitForm'</span>.<span class="built_in">format</span>(</span><br><span class="line">        host=host)</span><br><span class="line">    r = session.post(url=submitForm, headers=headers,</span><br><span class="line">                     data=json.dumps(params), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    msg = r.json()[<span class="string">'message'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> msg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">title_text = <span class="string">'今日校园疫结果通知'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># server酱通知</span></span><br><span class="line"><span class="comment"># def sendServerChan(msg):</span></span><br><span class="line"><span class="comment">#     log('正在发送Server酱。。。')</span></span><br><span class="line"><span class="comment">#     SCKEY = "SCU103057*****************************"  # 这里填Server酱官方提供的SCKEY</span></span><br><span class="line"><span class="comment">#     url = "https://sc.ftqq.com/%s.send" % (SCKEY)</span></span><br><span class="line"><span class="comment">#     res = requests.post(url, data={'text': title_text, 'desp': getTimeStr() + "\n" + str(msg)})</span></span><br><span class="line"><span class="comment">#     code = res.json()['errmsg']</span></span><br><span class="line"><span class="comment">#     if code == 'success':</span></span><br><span class="line"><span class="comment">#         log('发送Server酱通知成功。。。')</span></span><br><span class="line"><span class="comment">#     else:</span></span><br><span class="line"><span class="comment">#         log('发送Server酱通知失败。。。')</span></span><br><span class="line"><span class="comment">#         log('Server酱返回结果' + code)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Qmsg酱通知</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sendQmsgChan</span>(<span class="params">msg</span>):</span><br><span class="line">    log(<span class="string">'正在发送Qmsg酱。。。'</span>)</span><br><span class="line">    QmsgKey = <span class="string">"1aacce**********************"</span>  <span class="comment"># 这里填Qmsg酱官方提供的KEY</span></span><br><span class="line">    url_send = <span class="string">"https://qmsg.zendee.cn/send/%s"</span> % (QmsgKey)</span><br><span class="line">    url_group = <span class="string">"https://qmsg.zendee.cn/group/%s"</span> % (QmsgKey)</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36'</span></span><br><span class="line">    }</span><br><span class="line">    payload = {<span class="string">'msg'</span>: <span class="string">'%s今日校园疫情上报自动填表结果通知'</span> % (getTimeStr() + <span class="string">'\n'</span>) + <span class="string">'\n'</span> + <span class="built_in">str</span>(msg)}</span><br><span class="line">    res = requests.post(url_send, params=payload, headers=headers)  <span class="comment"># 私聊消息推送</span></span><br><span class="line">    res_group = requests.post(url_group, params=payload, headers=headers)  <span class="comment"># 群消息推送</span></span><br><span class="line">    sucmsg = res.json()[<span class="string">'success'</span>]</span><br><span class="line">    <span class="keyword">if</span> sucmsg == <span class="literal">True</span>:</span><br><span class="line">        log(<span class="string">'Qmsg酱通知成功'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log(<span class="string">'推送失败'</span>)</span><br><span class="line">        log(res.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> user <span class="keyword">in</span> config[<span class="string">'users'</span>]:</span><br><span class="line">            log(<span class="string">'当前用户：'</span> + <span class="built_in">str</span>(user[<span class="string">'user'</span>][<span class="string">'username'</span>]))</span><br><span class="line">            apis = getCpdailyApis(user)</span><br><span class="line">            log(<span class="string">'脚本开始执行。。。'</span>)</span><br><span class="line">            log(<span class="string">'开始模拟登陆。。。'</span>)</span><br><span class="line">            session = getSession(user, apis[<span class="string">'login-url'</span>])</span><br><span class="line">            <span class="keyword">if</span> session != <span class="literal">None</span>:</span><br><span class="line">                log(<span class="string">'模拟登陆成功。。。'</span>)</span><br><span class="line">                log(<span class="string">'正在查询最新待填写问卷。。。'</span>)</span><br><span class="line">                params = queryForm(session, apis)</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">str</span>(params) == <span class="string">'None'</span>:</span><br><span class="line">                    log(<span class="string">'获取最新待填写问卷失败，可能是辅导员还没有发布。。。'</span>)</span><br><span class="line">                    <span class="comment"># sendServerChan('没有新问卷')</span></span><br><span class="line">                    sendQmsgChan(<span class="string">'没有新问卷'</span>)</span><br><span class="line">                    exit(-<span class="number">1</span>)</span><br><span class="line">                log(<span class="string">'查询最新待填写问卷成功。。。'</span>)</span><br><span class="line">                log(<span class="string">'正在自动填写问卷。。。'</span>)</span><br><span class="line">                form = fillForm(session, params[<span class="string">'form'</span>], apis[<span class="string">'host'</span>])</span><br><span class="line">                log(<span class="string">'填写问卷成功。。。'</span>)</span><br><span class="line">                log(<span class="string">'正在自动提交。。。'</span>)</span><br><span class="line">                msg = submitForm(params[<span class="string">'formWid'</span>], user[<span class="string">'user'</span>][<span class="string">'address'</span>], params[<span class="string">'collectWid'</span>],</span><br><span class="line">                                 params[<span class="string">'schoolTaskWid'</span>], form, session, apis[<span class="string">'host'</span>])</span><br><span class="line">                <span class="keyword">if</span> msg == <span class="string">'SUCCESS'</span>:</span><br><span class="line">                    log(<span class="string">'自动提交成功！'</span>)</span><br><span class="line">                    <span class="comment"># sendServerChan('🎉自动提交成功！o(*≧▽≦)ツ')</span></span><br><span class="line">                    sendQmsgChan(<span class="string">'🎉自动提交成功！o(*≧▽≦)ツ'</span>)</span><br><span class="line">                <span class="keyword">elif</span> msg == <span class="string">'该收集已填写无需再次填写'</span>:</span><br><span class="line">                    log(<span class="string">'今日已提交！'</span>)</span><br><span class="line">                    <span class="comment"># sendServerChan('🤔今日已提交！')</span></span><br><span class="line">                    sendQmsgChan(<span class="string">'🤔今日已提交！'</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    log(<span class="string">'自动提交失败。。。'</span>)</span><br><span class="line">                    log(<span class="string">'错误是'</span> + msg)</span><br><span class="line">                    <span class="comment"># sendServerChan('自动提交失败！错误是' + str(msg))</span></span><br><span class="line">                    sendQmsgChan(<span class="string">'自动提交失败！错误是'</span> + <span class="built_in">str</span>(msg))</span><br><span class="line">                    exit(-<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                log(<span class="string">'模拟登陆失败。。。'</span>)</span><br><span class="line">                log(<span class="string">'原因可能是学号或密码错误，请检查配置后，重启脚本。。。'</span>)</span><br><span class="line">                exit(-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="comment"># sendServerChan("出现问题了！" + str(e))</span></span><br><span class="line">        sendQmsgChan(<span class="string">"出现问题了！"</span> + <span class="built_in">str</span>(e))</span><br><span class="line">        <span class="keyword">raise</span> e</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'success'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配合Windows计划任务等使用</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="built_in">print</span>(main_handler({}, {}))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>层依赖 <code>dependency.zip</code>，<a class="btn-beautify outline blue larger" href="https://cdn.jsdelivr.net/gh/flipped-1121/FuckCPDaily@master/dependency.zip" title="点击下载"><i class="far fa-hand-point-right"></i><span>点击下载</span></a></li></ul><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ul><li>在 <code>config.yml</code> 中添加今日校园的账户信息😀、邮箱📪、<code>address</code>、<code>经纬度</code>以及第一个问题的所在地</li><li><del>在 <code>index.py</code> 中添加自己的 SCKEY（281 行左右）</del></li><li>在 <code>index.py</code> 中添加自己的 QmsgKEY（295 行左右）</li><li>有条件的可以自建 api</li></ul><div id="binft">Congratulations!</div><script src="https://cdn.jsdelivr.net/gh/flipped-1121/CDN/colorfont03.js"></script>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;由于子墨大佬的教程已足够详细，不再赘叙。传送门：&lt;a class=&quot;btn-beautify blue larger&quot; href=&quot;https://github.com/ZimoLoveShuang/auto-submit&quot; title=&quot;教程&quot;&gt;</summary>
      
    
    
    
    
    <category term="Python" scheme="https://kangblogs.top/tags/Python/"/>
    
    <category term="今日校园" scheme="https://kangblogs.top/tags/%E4%BB%8A%E6%97%A5%E6%A0%A1%E5%9B%AD/"/>
    
    <category term="云函数" scheme="https://kangblogs.top/tags/%E4%BA%91%E5%87%BD%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>今日校园自动签到・AUST</title>
    <link href="https://kangblogs.top/posts/2de425e.html"/>
    <id>https://kangblogs.top/posts/2de425e.html</id>
    <published>2020-12-10T10:57:19.000Z</published>
    <updated>2021-04-17T06:42:12.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>由于子墨大佬的教程已足够详细，不再赘叙。传送门：<a class="btn-beautify blue larger" href="https://github.com/ZimoLoveShuang/auto-sign" title="教程"><i class="far fa-hand-point-right"></i><span>教程</span></a></p></blockquote><h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><table>    <tbody>    <tr>        <th>时间</th>        <th>更新内容</th>    </tr>    <tr>        <td rowspan="1"> 2021.04.17</td>        <td> 在填充表单函数中添加版本号 <code>form['signVersion'] = '1.0.0'    </code><img src="https://i0.hdslb.com/bfs/album/89e6ffe1d58979a7e28566f59907e7dcb5206a9b.png"></td>    </tr>    <tr>        <td rowspan="1">2021.03.27</td>        <td> 写死 <code>apis = {            'login-url': 'https://aust.campusphere.net/iap/login?service=https%3A%2F%2Faust.campusphere.net%2Fportal%2Flogin',            'host': 'aust.campusphere.net'}    </code><img src="https://i0.hdslb.com/bfs/album/db16ac2062123ca5ae6a303f34a21cb1983ce0af.png"></td>    </tr>    <tr>        <td rowspan="1">2021.03.18</td>        <td> 添加 UA<code>headers = {        'User-Agent': 'Mozilla/5.0 (iPad; U; CPU OS 3_2_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B500 Safari/531.21.10'    }</code><img src="https://i0.hdslb.com/bfs/album/4786c7f8666e1d24c9abd6233b2c82b72e262912.png"></td>    </tr>    <tr>        <td rowspan="1">2021.01.10</td>        <td> 修改 <code>config.yml</code> 开放的模拟登陆 api 服务器地址 (line 4)<code>http://121.196.172.243:8080/wisedu-unified-login-api-v1.0/api/login</code>        <img src="https://i0.hdslb.com/bfs/album/bfb59dc90aa1896bd509979e0eb5ea625f758eb4.png" alt="20210110143243">        </td>    </tr>    <tr>        <td rowspan="2">2021.01.06</td>        <td> 填充表单 <code>fillForm</code> 函数 (line 212) 新增参数 <code>form['uaIsCpadaily'] = True</code>        <img src="https://i0.hdslb.com/bfs/album/9cf6ba17d8d79d1546159d626833bcff0bf66eba.png" alt="20210106203929">        </td>    </tr>    <tr>        <td>DES 加密 <code>DESEncrypt</code> 函数 (line 248)<code>key</code> 值修改为 <code>b3L26XNL</code>        <img src="https://i0.hdslb.com/bfs/album/33dcd510406f3a9f4a99492c40896db47cf2e755.png" alt="20210106203441">        </td>    </tr>    </tbody></table><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ul><li>此为<rainbow-text> AUST</rainbow-text>（安徽理工大学）专版。<del>其实就是为了方便校友</del></li><li>基于腾讯云函数</li><li>使用了自建 api。大佬造好的轮子。</li><li>新增消息通知 <a href="http://sc.ftqq.com/3.version">Server 酱</a></li><li>新增消息通知 <a href="https://qmsg.zendee.cn/">Qmsg 酱</a></li></ul><h1 id="所用代码"><a href="#所用代码" class="headerlink" title="所用代码"></a>所用代码</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">config.yml</button></li><li class="tab"><button type="button" data-href="#uuid-2">generate.py</button></li><li class="tab"><button type="button" data-href="#uuid-3">index.py</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#登陆相关配置</span></span><br><span class="line"><span class="attr">login:</span></span><br><span class="line">  <span class="comment">#开放的模拟登陆api服务器地址</span></span><br><span class="line">  <span class="attr">api:</span> <span class="string">"http://121.196.172.243:8080/wisedu-unified-login-api-v1.0/api/login"</span> <span class="comment">#  有条件的可以自建</span></span><br><span class="line"><span class="comment">#用户组配置</span></span><br><span class="line"><span class="attr">users:</span></span><br><span class="line">  <span class="comment">#单个用户配置</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">user:</span></span><br><span class="line">      <span class="comment">#username 学号或者工号</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">''</span></span><br><span class="line">      <span class="comment">#password 密码</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">''</span></span><br><span class="line">      <span class="comment">#address 地址，定位信息</span></span><br><span class="line">      <span class="attr">address:</span> <span class="string">中国安徽省淮南市田家庵区</span></span><br><span class="line">      <span class="comment">#email 接受通知消息的邮箱</span></span><br><span class="line">      <span class="attr">email:</span> </span><br><span class="line">      <span class="comment">#school 学校全称</span></span><br><span class="line">      <span class="attr">school:</span> <span class="string">安徽理工大学</span></span><br><span class="line">      <span class="comment">#lon 经度</span></span><br><span class="line">      <span class="attr">lon:</span> <span class="string">'117.029931'</span></span><br><span class="line">      <span class="comment">#lat 纬度</span></span><br><span class="line">      <span class="attr">lat:</span> <span class="string">'32.555161'</span></span><br><span class="line">      <span class="comment">#abnormalReason 反馈信息</span></span><br><span class="line">      <span class="attr">abnormalReason:</span></span><br><span class="line">      <span class="comment">#photo 签到照片，不需要可不填，或者直接删除</span></span><br><span class="line">      <span class="attr">photo:</span> </span><br><span class="line">  <span class="comment">#多用户配置，将下面的注释去掉即可，如果有表单内容有图片，不建议使用多用户配置</span></span><br><span class="line"><span class="comment">#今日校园相关配置</span></span><br><span class="line"><span class="attr">cpdaily:</span></span><br><span class="line">  <span class="comment">#是否检查问题,true检查，false不检查</span></span><br><span class="line">  <span class="attr">check:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">#附加信息组默认选项配置，没有可留空</span></span><br><span class="line">  <span class="attr">defaults:</span></span><br><span class="line">  <span class="comment">#附加信息组默认选项配置，按顺序，可留空</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">您目前的体温是多少</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">腋下温度37.3℃以下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">有无发热、干咳等呼吸道症状</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">无</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">有无呕吐、腹泻等消化道症状</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">无</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">default:</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">有无其他身体不适症状</span></span><br><span class="line">        <span class="attr">type:</span> <span class="number">2</span></span><br><span class="line">        <span class="attr">value:</span> <span class="string">无</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> index <span class="keyword">as</span> app</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"></span><br><span class="line">config = app.config</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成默认配置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generate</span>():</span><br><span class="line">    user = config[<span class="string">'users'</span>][<span class="number">0</span>]</span><br><span class="line">    apis = app.getCpdailyApis(user)</span><br><span class="line">    session = app.getSession(user, apis)</span><br><span class="line">    params = app.getUnSignedTasks(session, apis)</span><br><span class="line">    task = app.getDetailTask(session, params, apis)</span><br><span class="line">    extraFields = task[<span class="string">'extraField'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(extraFields) &lt; <span class="number">1</span>:</span><br><span class="line">        app.log(<span class="string">'没有附加问题需要填写'</span>)</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line">    defaults = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(extraFields)):</span><br><span class="line">        extraField = extraFields[i]</span><br><span class="line">        extraFieldItems = extraField[<span class="string">'extraFieldItems'</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">'额外问题%d '</span> % (i + <span class="number">1</span>) + extraField[<span class="string">'title'</span>])</span><br><span class="line">        default = {}</span><br><span class="line">        one = {}</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(extraFieldItems)):</span><br><span class="line">            extraFieldItem = extraFieldItems[j]</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">'\t%d '</span> % (j + <span class="number">1</span>) + extraFieldItem[<span class="string">'content'</span>])</span><br><span class="line">        choose = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">"请输入对应的序号："</span>))</span><br><span class="line">        <span class="keyword">if</span> choose &lt; <span class="number">1</span> <span class="keyword">or</span> choose &gt; <span class="built_in">len</span>(extraFieldItems):</span><br><span class="line">            app.log(<span class="string">'输入错误'</span>)</span><br><span class="line">            exit(-<span class="number">1</span>)</span><br><span class="line">        one[<span class="string">'title'</span>] = extraField[<span class="string">'title'</span>]</span><br><span class="line">        one[<span class="string">'value'</span>] = extraFieldItems[choose - <span class="number">1</span>][<span class="string">'content'</span>]</span><br><span class="line">        <span class="keyword">if</span> extraFieldItem[<span class="string">'isOtherItems'</span>] == <span class="number">1</span>:</span><br><span class="line">            text = <span class="built_in">input</span>(<span class="string">'\t'</span> + extraFieldItems[choose - <span class="number">1</span>][<span class="string">'content'</span>] + <span class="string">'，请输入额外文本：'</span>)</span><br><span class="line">            one[<span class="string">'other'</span>] = text</span><br><span class="line">        default[<span class="string">'default'</span>] = one</span><br><span class="line">        defaults.append(default)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'======================分隔线======================'</span>)</span><br><span class="line">    <span class="built_in">print</span>(yaml.dump(defaults, allow_unicode=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    generate()</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-3"><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="keyword">import</span> oss2</span><br><span class="line"><span class="keyword">import</span> yaml</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> pyDes <span class="keyword">import</span> des, CBC, PAD_PKCS5</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta, timezone</span><br><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"><span class="keyword">from</span> urllib3.exceptions <span class="keyword">import</span> InsecureRequestWarning</span><br><span class="line"></span><br><span class="line"><span class="comment"># debug模式</span></span><br><span class="line">debug = <span class="literal">False</span></span><br><span class="line"><span class="keyword">if</span> debug:</span><br><span class="line">    requests.packages.urllib3.disable_warnings(InsecureRequestWarning)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取yml配置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getYmlConfig</span>(<span class="params">yaml_file=<span class="string">'config.yml'</span></span>):</span><br><span class="line">    file = <span class="built_in">open</span>(yaml_file, <span class="string">'r'</span>, encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">    file_data = file.read()</span><br><span class="line">    file.close()</span><br><span class="line">    config = yaml.load(file_data, Loader=yaml.FullLoader)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span>(config)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 全局配置</span></span><br><span class="line">config = getYmlConfig(yaml_file=<span class="string">'config.yml'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前utc时间，并格式化为北京时间</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getTimeStr</span>():</span><br><span class="line">    utc_dt = datetime.utcnow().replace(tzinfo=timezone.utc)</span><br><span class="line">    bj_dt = utc_dt.astimezone(timezone(timedelta(hours=<span class="number">8</span>)))</span><br><span class="line">    <span class="keyword">return</span> bj_dt.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出调试信息，并及时刷新缓冲区</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">log</span>(<span class="params">content</span>):</span><br><span class="line">    <span class="built_in">print</span>(getTimeStr() + <span class="string">' '</span> + <span class="built_in">str</span>(content))</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取今日校园api</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getCpdailyApis</span>(<span class="params">user</span>):</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (iPad; U; CPU OS 3_2_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B500 Safari/531.21.10'</span></span><br><span class="line">    }</span><br><span class="line">    apis = {}</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    schools = requests.get(url=<span class="string">'https://mobile.campushoy.com/v6/config/guest/tenant/list'</span>, headers=headers, verify=<span class="keyword">not</span> debug).json()[</span><br><span class="line">        <span class="string">'data'</span>]</span><br><span class="line">    flag = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> one <span class="keyword">in</span> schools:</span><br><span class="line">        <span class="keyword">if</span> one[<span class="string">'name'</span>] == user[<span class="string">'school'</span>]:</span><br><span class="line">            <span class="keyword">if</span> one[<span class="string">'joinType'</span>] == <span class="string">'NONE'</span>:</span><br><span class="line">                log(user[<span class="string">'school'</span>] + <span class="string">' 未加入今日校园'</span>)</span><br><span class="line">                exit(-<span class="number">1</span>)</span><br><span class="line">            flag = <span class="literal">False</span></span><br><span class="line">            params = {</span><br><span class="line">                <span class="string">'ids'</span>: one[<span class="string">'id'</span>]</span><br><span class="line">            }</span><br><span class="line">            res = requests.get(url=<span class="string">'https://mobile.campushoy.com/v6/config/guest/tenant/info'</span>, params=params, headers=headers,</span><br><span class="line">                               verify=<span class="keyword">not</span> debug)</span><br><span class="line">            data = res.json()[<span class="string">'data'</span>][<span class="number">0</span>]</span><br><span class="line">            joinType = data[<span class="string">'joinType'</span>]</span><br><span class="line">            idsUrl = data[<span class="string">'idsUrl'</span>]</span><br><span class="line">            ampUrl = data[<span class="string">'ampUrl'</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'campusphere'</span> <span class="keyword">in</span> ampUrl <span class="keyword">or</span> <span class="string">'cpdaily'</span> <span class="keyword">in</span> ampUrl:</span><br><span class="line">                parse = urlparse(ampUrl)</span><br><span class="line">                host = parse.netloc</span><br><span class="line">                res = requests.get(parse.scheme + <span class="string">'://'</span> + host)</span><br><span class="line">                parse = urlparse(res.url)</span><br><span class="line">                apis[</span><br><span class="line">                    <span class="string">'login-url'</span>] = idsUrl + <span class="string">'/login?service='</span> + parse.scheme + <span class="string">r"%3A%2F%2F"</span> + host + <span class="string">r'%2Fportal%2Flogin'</span></span><br><span class="line">                apis[<span class="string">'host'</span>] = host</span><br><span class="line"></span><br><span class="line">            ampUrl2 = data[<span class="string">'ampUrl2'</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">'campusphere'</span> <span class="keyword">in</span> ampUrl2 <span class="keyword">or</span> <span class="string">'cpdaily'</span> <span class="keyword">in</span> ampUrl2:</span><br><span class="line">                parse = urlparse(ampUrl2)</span><br><span class="line">                host = parse.netloc</span><br><span class="line">                res = requests.get(parse.scheme + <span class="string">'://'</span> + host)</span><br><span class="line">                parse = urlparse(res.url)</span><br><span class="line">                apis[</span><br><span class="line">                    <span class="string">'login-url'</span>] = idsUrl + <span class="string">'/login?service='</span> + parse.scheme + <span class="string">r"%3A%2F%2F"</span> + host + <span class="string">r'%2Fportal%2Flogin'</span></span><br><span class="line">                apis[<span class="string">'host'</span>] = host</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> flag:</span><br><span class="line">        log(user[<span class="string">'school'</span>] + <span class="string">' 未找到该院校信息，请检查是否是学校全称错误'</span>)</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line">    log(apis)</span><br><span class="line">    <span class="keyword">return</span> apis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 登陆并获取session</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getSession</span>(<span class="params">user, apis</span>):</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    params = {</span><br><span class="line">        <span class="comment"># 'login_url': 'http://authserverxg.swu.edu.cn/authserver/login?service=https://swu.cpdaily.com/wec-counselor-sign-apps/stu/sign/getStuSignInfosInOneDay',</span></span><br><span class="line">        <span class="string">'login_url'</span>: apis[<span class="string">'login-url'</span>],</span><br><span class="line">        <span class="string">'needcaptcha_url'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'captcha_url'</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="string">'username'</span>: user[<span class="string">'username'</span>],</span><br><span class="line">        <span class="string">'password'</span>: user[<span class="string">'password'</span>]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    cookies = {}</span><br><span class="line">    <span class="comment"># 借助上一个项目开放出来的登陆API，模拟登陆</span></span><br><span class="line">    res = requests.post(url=config[<span class="string">'login'</span>][<span class="string">'api'</span>], data=params, verify=<span class="keyword">not</span> debug)</span><br><span class="line">    <span class="comment"># cookieStr可以使用手动抓包获取到的cookie，有效期暂时未知，请自己测试</span></span><br><span class="line">    <span class="comment"># cookieStr = str(res.json()['cookies'])</span></span><br><span class="line">    cookieStr = <span class="built_in">str</span>(res.json()[<span class="string">'cookies'</span>])</span><br><span class="line">    log(cookieStr)</span><br><span class="line">    <span class="keyword">if</span> cookieStr == <span class="string">'None'</span>:</span><br><span class="line">        log(res.json())</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># log(cookieStr)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 解析cookie</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> cookieStr.split(<span class="string">';'</span>):</span><br><span class="line">        name, value = line.strip().split(<span class="string">'='</span>, <span class="number">1</span>)</span><br><span class="line">        cookies[name] = value</span><br><span class="line">    session = requests.session()</span><br><span class="line">    session.cookies = requests.utils.cookiejar_from_dict(cookies, cookiejar=<span class="literal">None</span>, overwrite=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> session</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取最新未签到任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getUnSignedTasks</span>(<span class="params">session, apis</span>):</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.97 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip,deflate'</span>,</span><br><span class="line">        <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,en-US;q=0.8'</span>,</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=UTF-8'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment"># 第一次请求每日签到任务接口，主要是为了获取MOD_AUTH_CAS</span></span><br><span class="line">    res = session.post(</span><br><span class="line">        url=<span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/getStuSignInfosInOneDay'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>]),</span><br><span class="line">        headers=headers, data=json.dumps({}), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    <span class="comment"># 第二次请求每日签到任务接口，拿到具体的签到任务</span></span><br><span class="line">    res = session.post(</span><br><span class="line">        url=<span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/getStuSignInfosInOneDay'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>]),</span><br><span class="line">        headers=headers, data=json.dumps({}), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(res.json()[<span class="string">'datas'</span>][<span class="string">'unSignedTasks'</span>]) &lt; <span class="number">1</span>:</span><br><span class="line">        log(<span class="string">'当前没有未签到任务'</span>)</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># log(res.json())</span></span><br><span class="line">    latestTask = res.json()[<span class="string">'datas'</span>][<span class="string">'unSignedTasks'</span>][<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">        <span class="string">'signInstanceWid'</span>: latestTask[<span class="string">'signInstanceWid'</span>],</span><br><span class="line">        <span class="string">'signWid'</span>: latestTask[<span class="string">'signWid'</span>]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取签到任务详情</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getDetailTask</span>(<span class="params">session, params, apis</span>):</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'Accept'</span>: <span class="string">'application/json, text/plain, */*'</span>,</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.97 Safari/537.36'</span>,</span><br><span class="line">        <span class="string">'content-type'</span>: <span class="string">'application/json'</span>,</span><br><span class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip,deflate'</span>,</span><br><span class="line">        <span class="string">'Accept-Language'</span>: <span class="string">'zh-CN,en-US;q=0.8'</span>,</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=UTF-8'</span></span><br><span class="line">    }</span><br><span class="line">    res = session.post(</span><br><span class="line">        url=<span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/detailSignInstance'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>]),</span><br><span class="line">        headers=headers, data=json.dumps(params), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    data = res.json()[<span class="string">'datas'</span>]</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 填充表单</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fillForm</span>(<span class="params">task, session, user, apis</span>):</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    form = {}</span><br><span class="line">    <span class="keyword">if</span> task[<span class="string">'isPhoto'</span>] == <span class="number">1</span>:</span><br><span class="line">        fileName = uploadPicture(session, user[<span class="string">'photo'</span>], apis)</span><br><span class="line">        form[<span class="string">'signPhotoUrl'</span>] = getPictureUrl(session, fileName, apis)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        form[<span class="string">'signPhotoUrl'</span>] = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> task[<span class="string">'isNeedExtra'</span>] == <span class="number">1</span>:</span><br><span class="line">        extraFields = task[<span class="string">'extraField'</span>]</span><br><span class="line">        defaults = config[<span class="string">'cpdaily'</span>][<span class="string">'defaults'</span>]</span><br><span class="line">        extraFieldItemValues = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(extraFields)):</span><br><span class="line">            default = defaults[i][<span class="string">'default'</span>]</span><br><span class="line">            extraField = extraFields[i]</span><br><span class="line">            <span class="keyword">if</span> config[<span class="string">'cpdaily'</span>][<span class="string">'check'</span>] <span class="keyword">and</span> default[<span class="string">'title'</span>] != extraField[<span class="string">'title'</span>]:</span><br><span class="line">                log(<span class="string">'第%d个默认配置项错误，请检查'</span> % (i + <span class="number">1</span>))</span><br><span class="line">                exit(-<span class="number">1</span>)</span><br><span class="line">            extraFieldItems = extraField[<span class="string">'extraFieldItems'</span>]</span><br><span class="line">            <span class="keyword">for</span> extraFieldItem <span class="keyword">in</span> extraFieldItems:</span><br><span class="line">                <span class="keyword">if</span> extraFieldItem[<span class="string">'content'</span>] == default[<span class="string">'value'</span>]:</span><br><span class="line">                    extraFieldItemValue = {<span class="string">'extraFieldItemValue'</span>: default[<span class="string">'value'</span>],</span><br><span class="line">                                           <span class="string">'extraFieldItemWid'</span>: extraFieldItem[<span class="string">'wid'</span>]}</span><br><span class="line">                    <span class="comment"># 其他，额外文本</span></span><br><span class="line">                    <span class="keyword">if</span> extraFieldItem[<span class="string">'isOtherItems'</span>] == <span class="number">1</span>:</span><br><span class="line">                        extraFieldItemValue = {<span class="string">'extraFieldItemValue'</span>: default[<span class="string">'other'</span>],</span><br><span class="line">                                               <span class="string">'extraFieldItemWid'</span>: extraFieldItem[<span class="string">'wid'</span>]}</span><br><span class="line">                    extraFieldItemValues.append(extraFieldItemValue)</span><br><span class="line">        <span class="comment"># log(extraFieldItemValues)</span></span><br><span class="line">        <span class="comment"># 处理带附加选项的签到</span></span><br><span class="line">        form[<span class="string">'extraFieldItems'</span>] = extraFieldItemValues</span><br><span class="line">    <span class="comment"># form['signInstanceWid'] = params['signInstanceWid']</span></span><br><span class="line">    form[<span class="string">'signInstanceWid'</span>] = task[<span class="string">'signInstanceWid'</span>]</span><br><span class="line">    form[<span class="string">'longitude'</span>] = user[<span class="string">'lon'</span>]</span><br><span class="line">    form[<span class="string">'latitude'</span>] = user[<span class="string">'lat'</span>]</span><br><span class="line">    form[<span class="string">'isMalposition'</span>] = task[<span class="string">'isMalposition'</span>]</span><br><span class="line">    form[<span class="string">'abnormalReason'</span>] = user[<span class="string">'abnormalReason'</span>]</span><br><span class="line">    form[<span class="string">'position'</span>] = user[<span class="string">'address'</span>]</span><br><span class="line">    form[<span class="string">'uaIsCpadaily'</span>] = <span class="literal">True</span></span><br><span class="line">    form[<span class="string">'signVersion'</span>] = <span class="string">'1.0.0'</span></span><br><span class="line">    <span class="keyword">return</span> form</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 上传图片到阿里云oss</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uploadPicture</span>(<span class="params">session, image, apis</span>):</span><br><span class="line">    url = <span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/getStsAccess'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>])</span><br><span class="line">    res = session.post(url=url, headers={<span class="string">'content-type'</span>: <span class="string">'application/json'</span>}, data=json.dumps({}), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    datas = res.json().get(<span class="string">'datas'</span>)</span><br><span class="line">    fileName = datas.get(<span class="string">'fileName'</span>)</span><br><span class="line">    accessKeyId = datas.get(<span class="string">'accessKeyId'</span>)</span><br><span class="line">    accessSecret = datas.get(<span class="string">'accessKeySecret'</span>)</span><br><span class="line">    securityToken = datas.get(<span class="string">'securityToken'</span>)</span><br><span class="line">    endPoint = datas.get(<span class="string">'endPoint'</span>)</span><br><span class="line">    bucket = datas.get(<span class="string">'bucket'</span>)</span><br><span class="line">    bucket = oss2.Bucket(oss2.Auth(access_key_id=accessKeyId, access_key_secret=accessSecret), endPoint, bucket)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(image, <span class="string">"rb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = f.read()</span><br><span class="line">    bucket.put_object(key=fileName, headers={<span class="string">'x-oss-security-token'</span>: securityToken}, data=data)</span><br><span class="line">    res = bucket.sign_url(<span class="string">'PUT'</span>, fileName, <span class="number">60</span>)</span><br><span class="line">    <span class="comment"># log(res)</span></span><br><span class="line">    <span class="keyword">return</span> fileName</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图片上传位置</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getPictureUrl</span>(<span class="params">session, fileName, apis</span>):</span><br><span class="line">    url = <span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/previewAttachment'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>])</span><br><span class="line">    data = {</span><br><span class="line">        <span class="string">'ossKey'</span>: fileName</span><br><span class="line">    }</span><br><span class="line">    res = session.post(url=url, headers={<span class="string">'content-type'</span>: <span class="string">'application/json'</span>}, data=json.dumps(data), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    photoUrl = res.json().get(<span class="string">'datas'</span>)</span><br><span class="line">    <span class="keyword">return</span> photoUrl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># DES加密</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">DESEncrypt</span>(<span class="params">s, key=<span class="string">'b3L26XNL'</span></span>):</span><br><span class="line">    key = key</span><br><span class="line">    iv = <span class="string">b"\x01\x02\x03\x04\x05\x06\x07\x08"</span></span><br><span class="line">    k = des(key, CBC, iv, pad=<span class="literal">None</span>, padmode=PAD_PKCS5)</span><br><span class="line">    encrypt_str = k.encrypt(s)</span><br><span class="line">    <span class="keyword">return</span> base64.b64encode(encrypt_str).decode()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交签到任务</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">submitForm</span>(<span class="params">session, user, form, apis</span>):</span><br><span class="line">    user = user[<span class="string">'user'</span>]</span><br><span class="line">    <span class="comment"># Cpdaily-Extension</span></span><br><span class="line">    extension = {</span><br><span class="line">        <span class="string">"lon"</span>: user[<span class="string">'lon'</span>],</span><br><span class="line">        <span class="string">"model"</span>: <span class="string">"OPPO R11 Plus"</span>,</span><br><span class="line">        <span class="string">"appVersion"</span>: <span class="string">"8.1.14"</span>,</span><br><span class="line">        <span class="string">"systemVersion"</span>: <span class="string">"4.4.4"</span>,</span><br><span class="line">        <span class="string">"userId"</span>: user[<span class="string">'username'</span>],</span><br><span class="line">        <span class="string">"systemName"</span>: <span class="string">"android"</span>,</span><br><span class="line">        <span class="string">"lat"</span>: user[<span class="string">'lat'</span>],</span><br><span class="line">        <span class="string">"deviceId"</span>: <span class="built_in">str</span>(uuid.uuid1())</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    headers = {</span><br><span class="line">        <span class="comment"># 'tenantId': '1019318364515869',</span></span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Linux; Android 4.4.4; OPPO R11 Plus Build/KTU84P) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/33.0.0.0 Safari/537.36 okhttp/3.12.4'</span>,</span><br><span class="line">        <span class="string">'CpdailyStandAlone'</span>: <span class="string">'0'</span>,</span><br><span class="line">        <span class="string">'extension'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'Cpdaily-Extension'</span>: DESEncrypt(json.dumps(extension)),</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json; charset=utf-8'</span>,</span><br><span class="line">        <span class="string">'Accept-Encoding'</span>: <span class="string">'gzip'</span>,</span><br><span class="line">        <span class="comment"># 'Host': 'swu.cpdaily.com',</span></span><br><span class="line">        <span class="string">'Connection'</span>: <span class="string">'Keep-Alive'</span></span><br><span class="line">    }</span><br><span class="line">    res = session.post(url=<span class="string">'https://{host}/wec-counselor-sign-apps/stu/sign/submitSign'</span>.<span class="built_in">format</span>(host=apis[<span class="string">'host'</span>]),</span><br><span class="line">                       headers=headers, data=json.dumps(form), verify=<span class="keyword">not</span> debug)</span><br><span class="line">    message = res.json()[<span class="string">'message'</span>]</span><br><span class="line">    <span class="keyword">if</span> message == <span class="string">'SUCCESS'</span>:</span><br><span class="line">        log(<span class="string">'自动签到成功'</span>)</span><br><span class="line">        sendMessageByWeChat(<span class="string">'自动签到成功'</span>, <span class="string">'SUCCESS🎉\n今日校园打卡成功了o(*≧▽≦)ツ'</span>)</span><br><span class="line">        sendMessageByQQ(<span class="string">'自动签到成功'</span>, <span class="string">'SUCCESS🎉\n今日校园打卡成功了o(*≧▽≦)ツ'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log(<span class="string">'自动签到失败，原因是：'</span> + message)</span><br><span class="line">        sendMessageByWeChat(<span class="string">'自动签到失败，原因是：'</span> + message, <span class="string">'🤔该收集已填写无需再次填写'</span>)</span><br><span class="line">        sendMessageByQQ(<span class="string">'自动签到失败，原因是：'</span> + message, <span class="string">'🤔该收集已填写无需再次填写'</span>)</span><br><span class="line">        exit(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送Server酱通知</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sendMessageByWeChat</span>(<span class="params">send, msg</span>):</span><br><span class="line">    <span class="keyword">if</span> send != <span class="string">''</span>:</span><br><span class="line">        log(<span class="string">'正在用Server酱进行推送'</span>)</span><br><span class="line">    key = <span class="string">"SCU103057T*********************************"</span>  <span class="comment">#  这里填Server酱官方提供的SCKEY</span></span><br><span class="line">    url = <span class="string">"https://sc.ftqq.com/%s.send"</span> % (key)</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36'</span>}</span><br><span class="line">    payload = {<span class="string">'text'</span>: <span class="string">'今日校园疫情上报自动填表结果通知'</span>, <span class="string">'desp'</span>: getTimeStr() + <span class="string">'\n\r'</span> + <span class="built_in">str</span>(msg)}</span><br><span class="line">    res = requests.post(url, params=payload, headers=headers)</span><br><span class="line">    errmsg = res.json()[<span class="string">'errmsg'</span>]</span><br><span class="line">    <span class="keyword">if</span> errmsg == <span class="string">'success'</span>:</span><br><span class="line">        log(<span class="string">'Server酱通知成功'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log(<span class="string">'推送失败'</span>)</span><br><span class="line">        log(res.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送Qmsg酱通知</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sendMessageByQQ</span>(<span class="params">send, msg</span>):</span><br><span class="line">    <span class="keyword">if</span> send != <span class="string">''</span>:</span><br><span class="line">        log(<span class="string">'正在用Qmsg酱进行推送'</span>)</span><br><span class="line">    key = <span class="string">"1aacc*************************"</span>  <span class="comment"># 这里填Qmsg酱官方提供的KEY</span></span><br><span class="line">    url_send = <span class="string">"https://qmsg.zendee.cn/send/%s"</span> % (key)</span><br><span class="line">    url_group = <span class="string">"https://qmsg.zendee.cn/group/%s"</span> % (key)</span><br><span class="line">    headers = {</span><br><span class="line">        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36'</span>}</span><br><span class="line">    payload = {<span class="string">'msg'</span>: <span class="string">'%s今日校园疫情上报自动填表结果通知'</span> % (getTimeStr() + <span class="string">'\n'</span>) + <span class="string">'\n'</span> + <span class="built_in">str</span>(msg)}</span><br><span class="line">    res = requests.post(url_send, params=payload, headers=headers)  <span class="comment"># 私聊消息推送</span></span><br><span class="line">    res_group = requests.post(url_group, params=payload, headers=headers)  <span class="comment"># 群消息推送</span></span><br><span class="line">    sucmsg = res.json()[<span class="string">'success'</span>]</span><br><span class="line">    <span class="keyword">if</span> sucmsg == <span class="literal">True</span>:</span><br><span class="line">        log(<span class="string">'Qmsg酱通知成功'</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        log(<span class="string">'推送失败'</span>)</span><br><span class="line">        log(res.json())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 主函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="keyword">for</span> user <span class="keyword">in</span> config[<span class="string">'users'</span>]:</span><br><span class="line">        apis = getCpdailyApis(user)</span><br><span class="line">        session = getSession(user, apis)</span><br><span class="line">        params = getUnSignedTasks(session, apis)</span><br><span class="line">        task = getDetailTask(session, params, apis)</span><br><span class="line">        form = fillForm(task, session, user, apis)</span><br><span class="line">        <span class="comment"># form = getDetailTask(session, user, params, apis)</span></span><br><span class="line">        submitForm(session, user, form, apis)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提供给腾讯云函数调用的启动函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main_handler</span>(<span class="params">event, context</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        main()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">raise</span> e</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'success'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># print(extension)</span></span><br><span class="line">    <span class="built_in">print</span>(main_handler({}, {}))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><ul><li>层依赖 <code>dependency.zip</code>，<a class="btn-beautify outline blue larger" href="https://cdn.jsdelivr.net/gh/flipped-1121/FuckCPDaily@master/dependency.zip" title="点击下载"><i class="far fa-hand-point-right"></i><span>点击下载</span></a></li></ul><h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ul><li>在 <code>config.yml</code> 中添加今日校园的账户信息😀和以及自己的邮箱📪</li><li>在 <code>index.py</code> 中添加自己的 SCKEY（299 行左右）</li><li>在 <code>index.py</code> 中添加自己的 KEY（317 行左右）</li><li>有条件的可以自建 api</li></ul><div id="binft">Congratulations!</div><script src="https://cdn.jsdelivr.net/gh/flipped-1121/CDN/colorfont03.js"></script>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;由于子墨大佬的教程已足够详细，不再赘叙。传送门：&lt;a class=&quot;btn-beautify blue larger&quot; href=&quot;https://github.com/ZimoLoveShuang/auto-sign&quot; title=&quot;教程&quot;&gt;&lt;i</summary>
      
    
    
    
    
    <category term="Python" scheme="https://kangblogs.top/tags/Python/"/>
    
    <category term="今日校园" scheme="https://kangblogs.top/tags/%E4%BB%8A%E6%97%A5%E6%A0%A1%E5%9B%AD/"/>
    
    <category term="云函数" scheme="https://kangblogs.top/tags/%E4%BA%91%E5%87%BD%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java 学习・前期准备</title>
    <link href="https://kangblogs.top/posts/e7bbd878.html"/>
    <id>https://kangblogs.top/posts/e7bbd878.html</id>
    <published>2020-10-07T14:54:49.000Z</published>
    <updated>2020-11-14T11:45:11.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="初识Java"><a href="#初识Java" class="headerlink" title="初识Java"></a>初识 Java</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>Java 是一种<strong>面向对象</strong>的编程语言。在学习语法细节前，对其历史、现状和特性有所了解是有裨益的。</p></blockquote><h3 id="什么是Java语言"><a href="#什么是Java语言" class="headerlink" title="什么是Java语言"></a>什么是 Java 语言</h3><p>Java 语言是 Sun 公司于 1990 年开发的，当时 Green 项目小组的研究人员正在致力于为未来的智能设备开发一种新的编程语言。由于该小组的成员 James Gosling 对 C++ 语言在执行过程中的表现非常不满，就把自己封闭在办公室里编写了一种新的语言，并将其命名为 Oak（Oak 就是 Java 语言的前身），这个名字源于 Gosling 办公室窗外的一棵橡树（Oak）。此时的 Oak 已经具备<strong>安全性</strong>、<strong>网络通信</strong>、<strong>面向对象</strong>、<strong>多线程</strong>等特性，是一款相当优秀的程序语言。后来，在注册 Oak 商标时，发现它已经被另一家公司注册，所以不得不改名。要取什么名字呢？工程师们边喝咖啡边讨论着，看看手上的咖啡，联想到印度尼西亚有一个盛产咖啡的岛屿（中文名叫爪哇），于是将其改名为 Java。</p><h4 id="Java语言的历史"><a href="#Java语言的历史" class="headerlink" title="Java语言的历史"></a>Java 语言的历史</h4><p>随着 Internet 的迅速发展，Web 应用日益广泛，Java 语言也得到了迅速发展。1994 年，Gosling 用 Java 语言开发了一个实时性较高、可靠、安全、有交互功能的新型 Web 浏览器，它不依赖于任何硬件平台和软件平台。该浏览器被命名为 HotJava，并于 1995 年在业界发表，引起了巨大的轰动，Java 语言的地位随之得到了肯定。1995 年 5 月 23 日，JDK（Java Development Kit）1.0a2 版本正式对外发布。此后，Java 语言的发展异常迅速。2009 年 4 月 20 日，Sun 公司被 Oracle 公司收购。</p><h4 id="Java的运行机制"><a href="#Java的运行机制" class="headerlink" title="Java的运行机制"></a>Java 的运行机制</h4><p>Java 语言编写的程序既是编译型的，又是解释型的。程序代码经过编译之后转换为一种称为 Java 字节码的中间语言，并由 Java 虚拟机（JVM）将这些字节码进行解释和运行。编译只进行一次，而解释在每次运行程序时都会进行。编译后的字节码采用一种针对 JVM 优化过的机器码形式保存，虚拟机将字节码解释为机器码，然后在计算机上运行。</p><hr><h3 id="Java语言现状"><a href="#Java语言现状" class="headerlink" title="Java语言现状"></a>Java 语言现状</h3><p>借助 Java，程序开发人员可以自由地使用现有的硬件和软件系统平台。由于 Java 是独立于平台的，它还可以应用于计算机之外的领域。Java 程序可以在便携式计算机、电视、电话、手机和其他设备上运行。Java 的用途数不胜数，它拥有无可比拟的能力，使用它所节省的时间和费用十分可观。Java 应用领域主要包括以下几方面。</p><ul><li>桌面应用系统开发</li><li>嵌入式系统开发</li><li>电子商务应用开发</li><li>企业级应用开发</li><li>交互式系统开发</li><li>多媒体系统开发</li><li>分布式系统开发</li><li> Web 应用系统开发</li></ul><p>Java 无处不在，可应用在任何地方、任何领域，目前已拥有几百万用户，发展速度要快与在它之前任何一种计算机语言。Java 能够给企业和最终用户带来数不尽的好处。Oracle 公司董事长和首席执行官 Larru Ellision 说过：“Java 正在进入企业、家庭和学校。它正在像 Internet 本身一样成为普遍存在的技术。”<br>如果仔细观察就会发现，Java 就在我们身边。使用 Java 语言编写的常见开源软件包括 NetBeans 和 Eclipse 集成开发环境、JBoss 和 GlassFish 应用服务器；商业软件包括永中 Office、合金战士 Chrome、Websphere 和 Oracle Database 11g。此外，各手机厂商都为自己的产品提供了 Java 技术的支持，手机上的 Java 程序和游戏已经不胜枚举。<br>为了满足不同开发人员的需求，Java 开发分成了以下 3 个方向。</p><ul><li>Java SE：主要用于桌面程序的开发。它是学习 Java EE 和 Java ME 的基础。</li><li>Java EE：主要用于网页程序的开发。随着互联网的发展，越来越多的企业使用 Java 语言来开发自己的官方网站，其中不乏一些世界 500 强的企业。</li><li>Java ME：主要用于嵌入式系统程序的开发。</li></ul><hr><h3 id="Java语言特性"><a href="#Java语言特性" class="headerlink" title="Java语言特性"></a>Java 语言特性</h3><p>Java 语言的作者们编写了具有广泛影响的 Java 白皮书，里面详细介绍了他们的设计目标以及实现成果。此外，还用简短的篇幅介绍了 Java 语言的特性。下面将对其进行简要介绍。</p><h4 id="简单"><a href="#简单" class="headerlink" title="简单"></a>简单</h4><p>Java 语言的语法简单明了，容易掌握，而且是纯面向对象的语言。Java 语言的简单性主要体现在以下几点：</p><ul><li>语法规则和 C++ 类似。从某种意义上讲，Java 语言是由 C 和 C++ 语言转变而来，所以 C 程序设计人员可以很容易地掌握 Java 语言的语法。</li><li>Java 语言对 C++ 进行了简化和提高。例如，Java 使用接口取代了多重继承，并取消了指针，因为指针和多重继承通常使程序变得复杂。Java 语言还通过实现垃圾自动收集，大大简化了程序设计人员的资源释放管理工作。</li><li>Java 提供了丰富的类库和 API 文档以及第三方开发包，另外，还有大量的基于 Java 的开源项目，现在 JDK 也开放源代码了，读者可以通过分析项目的源代码，提高自己的编程水平。</li></ul><h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><p>Java 语言本身是一种面向对象的程序设计语言。Java 提倡万物皆对象，语法中不能在类外面定义单独的变量和方法，也就是说，Java 语言最外部的数据类型是对象，所有的元素都要通过类和对象来访问。</p><h4 id="分布式"><a href="#分布式" class="headerlink" title="分布式"></a>分布式</h4><p>Java 的分布性包括操作分布和数据分布，其中操作分布是指在多个不同的主机上布置相关操作，而数据分布是将数据分别存放在多个不同的主机上，这些主机是网络中的不同成员。Java 可以凭借 URL 对象访问网络对象，访问方式与访问本地系统相同。</p><h4 id="可移植性"><a href="#可移植性" class="headerlink" title="可移植性"></a>可移植性</h4><p>Java 程序具有与体系结构无关的特性，从而使 Java 程序可以方便地移植到网络的不同计算机中。同时，Java 的类库中也实现了针对不同平台的接口，使这些类库也可以移植。</p><h4 id="解释性"><a href="#解释性" class="headerlink" title="解释性"></a>解释性</h4><p>运行 Java 程序需要解释器。任何移植了 Java 解释器的计算机或其他设备都可以用 Java 字节码进行解释执行。字节码独立于平台，它本身携带了许多编译信息，使得连接过程更加简单，开发过程也就更加迅速，更具探索性。</p><h4 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h4><p>Java 语言删除了类似 C 语言中的指针和内存释放等语法，从而有效地避免了非法操作内存。Java 程序代码要经过代码校验、指针校验等很多的测试步骤才能够运行，所以未经允许的 Java 程序不可能出现损害系统平台的行为，而且使用 Java 可以编写防病毒和防修改的系统。</p><h4 id="健壮性"><a href="#健壮性" class="headerlink" title="健壮性"></a>健壮性</h4><p>Java 的设计目标之一是编写多方面可靠的应用程序，Java 将检查程序在编译和运行时的错误，以及消除错误。类型检查能帮助用户检查出许多在开发早期出现的错误。同时，很多集成开发工具 IDE（如 Eclipse、NetBeans）的出现使编译和运行 Java 程序更加容易。</p><h4 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h4><p>多线程机制能够使应用程序在同一时间并行执行多项任务，而且相应的同步机制可以保证不同线程能够正确地共享数据。使用多线程，可以带来更好的交互能力和实时行为。</p><h4 id="高性能"><a href="#高性能" class="headerlink" title="高性能"></a>高性能</h4><p>Java 编译后的字节码是在解释器中运行的，所以它的速度比多数交互式应用程序提高了很多。另外，字节码可以在程序运行时被翻译成特定平台的机器指令，从而进一步提高运行速度。</p><h4 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h4><p>Java 在很多方面比 C 和 C++ 更能够适应发展的环境，可以动态调整库中方法和变量的增加，而客户端却不需要作任何更改。在 Java 中，动态调整是非常简单、直接的。</p><h1 id="搭建开发环境"><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h1><h2 id="JDK的下载、安装和配置"><a href="#JDK的下载、安装和配置" class="headerlink" title="JDK的下载、安装和配置"></a>JDK 的下载、安装和配置</h2><p>开发 Java 程序必须安装 JDK (Java Developers Kits) 开发环境。它包含演示程序和样例、Java 公共 API 类的源代码、Java 运行环境、编译调试等开发工具。</p><h3 id="下载JDK"><a href="#下载JDK" class="headerlink" title="下载JDK"></a>下载 JDK</h3><p>由于 Sun 公司被 Oracle 收购，因此 JDK 可以在 Oracle 公司的官方网站下载。<a class="btn-beautify blue larger" href="http://www.oracle.com/cn/index.html" title="Oracle"><i class="far fa-hand-point-right"></i><span>Oracle</span></a><br>下面以<rainbow-text> JDK8</rainbow-text> 为例介绍 Windows64 位下载 JDK 的方法，具体步骤如下。</p><ul><li>浏览器地址栏输入 <a href="https://www.oracle.com/cn/java/technologies/javase-downloads.html">https://www.oracle.com/cn/java/technologies/javase-downloads.html</a></li><li> 下滑到 Java SE 8，点击 JDK Download<img src="https://i0.hdslb.com/bfs/album/1caec0c63036bd393b939903e73a750225738018.png"></li><li>点击下载对应版本，这里以 WIN-64 为例。<img src="https://i0.hdslb.com/bfs/album/f55ca0a9e5ef9f80d2782b0317d484bc5f6c60c6.png"><div class="note info flat"><p>首次使用需要注册并登录 Oracle 账号</p></div></li></ul><h3 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装 JDK</h3><blockquote><p>在 JDK 中，已经包含了 JRE。JDK 用于开发 Java 程序，JRE 用于运行 Java 程序</p></blockquote><ul><li>双击下载的 <code>jdk-8u261-windows-x64.exe</code>，接着 Windows 式下一步。<img src="https://i0.hdslb.com/bfs/album/c82d9b73e6a24d3de8352fe463c04c01b097f67d.png"></li><li>如需更改安装位置，点击<code>更改</code>，接着<code>下一步</code>。注：请记住该安装位置，后续配置环境变量会用到。<img src="https://i0.hdslb.com/bfs/album/e94196b4ffa668c891fe83344ce6c1bbf5496f21.png"></li><li>点击<code>下一步</code>，安装中。<img src="https://i0.hdslb.com/bfs/album/e2b92c28a8f293eaf1db38ada6d547ffee9f24e7.png"></li></ul><h3 id="配置JDK"><a href="#配置JDK" class="headerlink" title="配置JDK"></a>配置 JDK</h3><p>安装完 JDK 之后，必须配置环境变量方可使用 Java 环境。在 Windows 操作系统中，主要配置 3 个环境变量，分别是 JAVA_HOME、Path 和 CLASSPATH。其中 JAVA_HOME 用来指定 JDK 的安装路径；Path 用来使系统能够在任何路径下都可以识别 Java 命令；CLASSPATH 用来加载 Java 类库的路径。在 Windows 7 系统中配置环境变量的步骤如下。</p><ul><li>在 “计算机” 图标上单击鼠标右键，在弹出的快捷菜单中选择<code>属性</code>命令，在弹出的<code>属性</code>对话框左侧单击<code>高级系统设置</code>超链接，将打开<code>系统属性</code>对话框。</li><li>单击<code>环境变量</code>按钮，将弹出 “环境变量” 对话框，单击<code>系统变量</code>栏下的 “新建” 按钮，创建新的系统变量。弹出 “新建系统变量” 对话框，分别输入变量名 <code>JAVA_HOME</code> 和变量值（即 JDK 的安装路径），其中变量值是笔者的 JDK 安装路径，读者需要根据自己的计算机环境进行修改。单击<code>确定</code>按钮，关闭 “新建系统变量” 对话框。<br><img src="https://i0.hdslb.com/bfs/album/e54cdf24004b153f5887bcea553f78f21d019a1c.png" alt="20201011150220"><br><img src="https://i0.hdslb.com/bfs/album/5e027efb56a432cb6167d9662ce19a863b47d4c0.png" alt="20201011151600"><br><img src="https://i0.hdslb.com/bfs/album/458b5edeb7d45c7ad944c219760cf96276548ec6.png" alt="20201011152037"></li><li>在<code>环境变量</code>对话框中双击 Path 变量，对其进行修改。将原变量值最前面的 <code>C:\Program Files (x86)\Common Files\Oracle\Java\javapath;</code> 删除，并输入 <code>%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;</code>（注意，最后的 “;” 不要丢掉，它用于分割不同的变量值）。单击<code>确定</code>按钮完成环境变量的设置。<br><img src="https://i0.hdslb.com/bfs/album/4c8e5cb06c352f9899d18084a07f072bc97fc063.png" alt="20201011152528"></li><li>在 “环境变量” 对话框中，单击 “系统变量” 栏下的<code>新建</code>按钮，新建一个 <strong>CLASSPATH</strong> 变量，变量值为<code>.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar;</code>。<br><img src="https://i0.hdslb.com/bfs/album/42534458066d89abb656eaef310872a642d95f9d.png" alt="20201011152735"><div class="note info flat"><p>在 Windows 系统中，环境变量需要使用英文的分号进行分隔；在 Linux 系统中，环境变量需要使用英文的冒号进行分隔。要注意全角和半角的区别。</p></div></li><li>接着一路<code>确定</code>，就到了激动人心的验证是否配置成功的环节。</li></ul><h3 id="测试开发环境"><a href="#测试开发环境" class="headerlink" title="测试开发环境"></a>测试开发环境</h3><p>JDK 配置完成后，需确认是否配置准确。在 Windows 系统中测试 JDK 环境需要选择 “开始”/“运行” 命令（没有 “运行” 命令可以按 Windows+R 组合键），然后在 “运行” 对话框中输入 “cmd” 并单击 “确定” 按钮启动控制台。在控制台中输入 javac 命令，按 Enter 键，将输出如下图所示的 JDK 的编译器信息，其中包括修改命令的语法和参数选项等信息。这说明 JDK 环境搭建成功。<span class="Pshake">Congratulations!</span><br><img src="https://i0.hdslb.com/bfs/album/9ed0f34695bc264a336093590c2f35864eb71c87.png" alt="20201011153704"></p><hr><h2 id="JDK、JRE和JVM之间的关系"><a href="#JDK、JRE和JVM之间的关系" class="headerlink" title="JDK、JRE和JVM之间的关系"></a>JDK、JRE 和 JVM 之间的关系</h2><p><img src="https://i0.hdslb.com/bfs/album/b0cc83ae8daaf9b91bf2c74a600b73328a7a96f6.png" alt="JDKJREJVM"></p><h1 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h1><h2 id="第一个Java程序"><a href="#第一个Java程序" class="headerlink" title="第一个Java程序"></a>第一个 Java 程序</h2><blockquote><p>又到了激动人心的<rainbow-text> Hello World</rainbow-text><br>在完成 JDK 的下载和安装后，就可以开始编写 Java 程序了。下面将编写第一个 Java 程序，其效果是在 DOS 控制台上显示 “Hello World!”。</p></blockquote><h3 id="编写源代码"><a href="#编写源代码" class="headerlink" title="编写源代码"></a>编写源代码</h3><p>使用 Java 编程的第一步是编写源代码，这里需要使用到文本编辑器。目前有各种各样的文本编辑器，如 “记事本” 工具、Sublime Text 等。这里使用 Windows 系统自带的 “记事本” 工具。</p><ul><li><p>先进行一番设置<br><img src="https://i0.hdslb.com/bfs/album/3775b67a6f4726bf0e144d6be64d09dd58ff375e.png" alt="20201012005109"><br><img src="https://i0.hdslb.com/bfs/album/a0675d876cd149c5e7b1c0cfcfce3192b5dda127.png" alt="20201012005310"></p></li><li><p>正式开始<br>在电脑任意磁盘新建一文件夹，用于存放 Java 代码，方便后续管理。新建完成后在此文件夹下新建一<code>文本文档</code>，编辑以下为内容：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>{</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>{</span><br><span class="line">System.out.println(<span class="string">"Hello World!"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><code>Ctrl+S</code> 保存。<br>并重命名为 <code>HelloWorld.java</code><br><img src="https://i0.hdslb.com/bfs/album/bdc9febc539dbff15235c6e5e21b26b205b5881e.png" alt="20201012005845"></p></li></ul><h3 id="编译源代码"><a href="#编译源代码" class="headerlink" title="编译源代码"></a>编译源代码</h3><p>点击 Java 文件所处界面的文件管理器路径框并输入 <code>cmd</code>，并回车 <code>Enter</code>。<br><img src="https://i0.hdslb.com/bfs/album/fa488d4c5d71e20d541ffd89c2b4260352847b39.png" alt="20201012011000"><br>在弹出的运行框中输入指令 <code>javac HelloWorld.java</code>, 并回车 <code>Enter</code>。<br><img src="https://i0.hdslb.com/bfs/album/cf5c71372dd31c08de7ae508cdc10f707a947844.png" alt="20201012011303"><br>编译过后，无返回错误且目标文件夹下多出一个名为 <code>HelloWold.class</code> 的文件，则说明编译成功。<br><img src="https://i0.hdslb.com/bfs/album/2ba480e8abd4c0f25076c1b6e76e02fd95e4c8e4.png" alt="20201012011722"></p><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>执行 <code>java HelloWorld</code>。<br><img src="https://i0.hdslb.com/bfs/album/420aaa7142e13204b6c3e25218ed33aa456383c3.png" alt="20201012012000"><br><font class="Pshake" size="6">Congratulations!</font></p><h1 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h1><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>学习 Java 语言程序设计必须选择一个<strong>功能强大</strong>、<strong>使用简单</strong>、<strong>能够辅助程序设计</strong>的 IDE（Integrated Development Environment）。虽然使用记事本和 JDK 编译工具已经可以编写 Java 程序，但是在项目开发过程中必须使用大型的集成开发工具（IDE）来编写 Java 程序，这样可以避免编码错误，方便管理项目结构，而且使用 IDE 工具的代码辅助功能可以快速地输入程序代码。好用的 IDE 可以大量节省程序开发所需的时间和精力。</p><h2 id="IDE之Eclipse"><a href="#IDE之Eclipse" class="headerlink" title="IDE之Eclipse"></a>IDE 之 Eclipse</h2><p><strong>Eclipse</strong> 是由 <a href="https://www.ibm.com/cn-zh">IBM</a> 公司投资 4000 万美元开发的集成开发工具。它基于 Java 语言编写，并且是<strong>开放源代码的</strong>、<strong>可扩展的</strong>，也是目前流行的 Java 集成开发工具之一。另外，IBM 公司捐出 Eclipse 源代码，组建了 Eclipse 联盟，由该联盟负责这种工具的后续开发。Eclipse 为编程人员提供了一流的 Java 程序开发环境，它的平台体系结构是在插件概念的基础上构建的，插件是 Eclipse 平台最具特色的特征之一。</p><h3 id="下载Eclipse"><a href="#下载Eclipse" class="headerlink" title="下载Eclipse"></a>下载 Eclipse</h3><blockquote><p>这里以 64 位 Windows 为例</p></blockquote><ul><li>打开浏览器，首先在地址栏中输入 <a href="http://www.eclipse.org/">http://www.eclipse.org</a>，按 Enter 键开始访问 Eclipse 的官网首页，然后单击 Eclipse 官网首页上的 <code>Download</code> 按钮。再一直 <code>Download</code> 下去。<br><img src="https://i0.hdslb.com/bfs/album/253a7e3685cd6768118e33eda6d7ddbba43e259d.png" alt="20201013001133"><br><img src="https://i0.hdslb.com/bfs/album/c9ad7dd8b36c6c23b28de83926e5ef03e525d59b.png" alt="20201013001447"><br><img src="https://i0.hdslb.com/bfs/album/563ef085ac8db7c505b3f20b27e450aeb6de0443.png" alt="20201013001652"><div class="note warning flat"><p>若下载无响应，请更换镜像源</p></div><img src="https://i0.hdslb.com/bfs/album/5f2b679fe978c0f1b7b51154302fc78c1b7ac91f.png" alt="20201013003158"></li></ul><h3 id="安装Eclipse"><a href="#安装Eclipse" class="headerlink" title="安装Eclipse"></a>安装 Eclipse</h3><ul><li>双击下载的安装包，选择 <code>Eclipse IDE for Java Developers</code>，<img src="https://i0.hdslb.com/bfs/album/16e3e8840881582c9ea6710602f77fc3a41c5c13.png" alt="20201013010537"></li><li>设置安装位置<br><img src="https://i0.hdslb.com/bfs/album/6c63db3b4f69e0f24c7bb8252774eeca4f683d95.png" alt="20201013011310"></li><li>点击 <code>INSTALL</code>—&gt;<code>Accept Now</code>，等待安装完成。</li></ul><h3 id="配置Eclipse"><a href="#配置Eclipse" class="headerlink" title="配置Eclipse"></a>配置 Eclipse</h3><ul><li>双击 Eclipse 快捷方式，配置工作空间，并点击 <code>Launch</code>。每次启动 Eclipse 时都会出现设置工作空间的对话框，通过选中 <code>Use this as the default and do not ask again</code> 复选框可以设置默认工作空间，这样 Eclipse 启动时就不会再询问工作空间的设置了。<br><img src="https://i0.hdslb.com/bfs/album/d641e633ae1839703da38054741c5aa4b6a4e6c9.png" alt="20201014000907"><br><img src="https://i0.hdslb.com/bfs/album/ed9edd3fa7596d06a01d54f5cb7cbfc4a26c8bcd.png" alt="20201014002305"></li><li>这里附上汉化教程，酌情选择是否汉化。<ul><li>在浏览器的地址栏中输入 <a href="http://www.eclipse.org/babel">http://www.eclipse.org/babel</a>，并按 Enter 键，进入 Babel 项目组首页。单击页面右侧导航中的 Downloads 超链接或者单击页面下方的绿色箭头都可以进入语言包的下载页面。<br>  <img src="https://i0.hdslb.com/bfs/album/236e5a51009777c7d08a9ddc39a30d4fcb75567d.png" alt="20201014002958"></li><li>在下载页面的 Babel Language Packs 标题下选择对应 Eclipse 版本的超链接下载语言包，进入 Eclipse 的 Babel 语言包下载页面，在该页面中包含了对应各国语言的资源包，而每个语言的资源包又按插件与功能模块分为多个 zip 压缩包。在页面中找到简体中文的语言包分类，可以单独选择 Eclipse 的语言包下载，也可以下载全部语言包。例如，单独下载 Eclipse 的语言包，可以单击 <code>BabelLanguagePack-eclipse-zh_4.16.0.v20200711020001.zip (84.09%)</code> 超链接，下载后的文件名为 <code>BabelLanguagePack-eclipse-zh_4.16.0.v20200711020001.zip</code>。<br>  <img src="https://i0.hdslb.com/bfs/album/1bf91c976418b597c03ee52f9bb3134fcf0822cd.png" alt="20201014004759">  <div class="note info flat"><p>下载 Eclipse 多国语言包时，一定要注意语言包所匹配的 Eclipse 版本，否则可能无法实现 Eclipse 的国际化。</p></div>  <div class="note warning flat"><p>若下载无响应，请更换镜像源</p></div></li><li>将下载的所有语言包解压缩并将 <code>features</code> 和 <code>plugins</code> 两个文件夹复制到 Eclipse 安装目录中的 <code>dropins</code> 文件夹下，这样在启动 Eclipse 时便会自动加载语言包。<div class="Pshake">Congratulations!</div><br>  <img src="https://i0.hdslb.com/bfs/album/6ff818f7595d22dd539a5aff92f29d7ad6544ffc.png" alt="20201014124918"></li></ul></li><li><rainbow-text>HelloWorld!</rainbow-text><br>新建一个 Java 项目（<code>文件</code> —&gt; <code>新建</code> —&gt;<code>Java项目</code>），名称随意。<br>新建一个 Java 类（<code>右击刚新建的Java项目</code>–&gt; <code>新建</code> —&gt; <code>类</code>），命名为 <code>HelloWorld</code>。并编写刚学会的打印 <code>HelloWorld!</code> 的代码。<br><code>Ctrl+F11</code> 编译并运行。<br><img src="https://i0.hdslb.com/bfs/album/fc85242d5efe74c14b378cbb375910fce899c6b0.png" alt="20201014145539"></li></ul><h2 id="IDE之IDEA"><a href="#IDE之IDEA" class="headerlink" title="IDE之IDEA"></a>IDE 之 IDEA</h2><p>“你怎么还在用 Eclipse？？？”，“因为它免费啊！”。现在介绍一款 Java 开发利器 —<rainbow-text>IntelliJ IDEA</rainbow-text>，IntelliJ 在业界被公认为最好的 Java 开发工具，尤其在智能代码助手、代码自动提示、重构、JavaEE 支持、各类版本工具 (git、svn 等)、JUnit、CVS 整合、代码分析、 创新的 GUI 设计等方面的功能可以说是超常的。IDEA 是 JetBrains 公司的产品，这家公司总部位于捷克共和国的首都布拉格，开发人员以严谨著称的东欧程序员为主。它的旗舰版本还支持 HTML，CSS，PHP，MySQL，Python 等。免费版只支持 Java,Kotlin 等少数语言。诚然，没有最好的工具，只有适合自己的工具。免费版的 IntelliJ IDEA 已经基本可以满足 Java 学习。</p><h3 id="下载IDEA"><a href="#下载IDEA" class="headerlink" title="下载IDEA"></a>下载 IDEA</h3><blockquote><p>这里以 64 位 Windows 为例</p></blockquote><ul><li>打开浏览器，首先在地址栏中输入 <a href="https://www.jetbrains.com/zh-cn/idea/download/##section=windows">https://www.jetbrains.com/zh-cn/idea/download/##section=windows</a>，按 Enter 键开始访问 IDEA 的官网下载页面，这里提供了两个版本：<code>Ultimate</code>，付费版，可免费试用 30 天，学生可申请免费；<code>社区版</code>，免费开源，够用。<br><img src="https://i0.hdslb.com/bfs/album/d42a6188c1ed5caad00c3cb562bba122b7b9c7b8.png" alt="20201017231957"></li></ul><h3 id="安装IDEA"><a href="#安装IDEA" class="headerlink" title="安装IDEA"></a>安装 IDEA</h3><p>双击安装包，选择安装路径，安装。【不再赘叙】</p><h3 id="配置IDEA"><a href="#配置IDEA" class="headerlink" title="配置IDEA"></a>配置 IDEA</h3><ul><li><p>点击 <code>Create New Project </code>，选择 <code>Java模块</code>，Project SDK 选择 JDK 的安装目录。<code>Next</code>—&gt;<code>Next</code>—&gt; <code>命名项目名称</code> —&gt;<code>Finish</code>。<br><img src="https://i0.hdslb.com/bfs/album/aaa440058a6d04456eac15fa451224dc1cf9c470.png" alt="20201017233631"></p></li><li><p>这里附上汉化教程，酌情选择是否汉化。</p><ul><li>依次点击<code>文件</code>、<code>设置</code>、<code>Plugins</code>，并搜索 <code>Chinese</code>。点击安装。<br>  <img src="https://i0.hdslb.com/bfs/album/9b5e354eee0c9833c45aab8adf7a9903891cd637.png" alt="20201018002334"><br><img src="https://i0.hdslb.com/bfs/album/02bc7f2ec895735b2d83ba7b37bc36ee6b170a39.png" alt="20201018002532"></li></ul></li><li><p><rainbow-text>HelloWorld!</rainbow-text><br>新建一个 Java 类（右击刚新建的 Java 项目下的 <code>src</code> 目录–&gt; 新建 <code>Java类</code>），命名为 <code>HelloWorld</code>。并编写刚学会的打印 <code>HelloWorld!</code> 的代码。<br><code>Shift+F10</code> 编译并运行。<br><img src="https://i0.hdslb.com/bfs/album/bc41ddbd6bfb6102accabe447d7a5109e3e35056.png" alt="20201018003433"></p></li></ul><div id="binft">Congratulations!</div><script src="https://cdn.jsdelivr.net/gh/flipped-1121/CDN/colorfont03.js"></script>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;初识Java&quot;&gt;&lt;a href=&quot;#初识Java&quot; class=&quot;headerlink&quot; title=&quot;初识Java&quot;&gt;&lt;/a&gt;初识 Java&lt;/h1&gt;&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;</summary>
      
    
    
    
    
    <category term="Java" scheme="https://kangblogs.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>前端学习（八）</title>
    <link href="https://kangblogs.top/posts/58860a6d.html"/>
    <id>https://kangblogs.top/posts/58860a6d.html</id>
    <published>2020-10-05T16:54:47.000Z</published>
    <updated>2020-10-05T16:54:50.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>记录前端学习<span id="more"></span></p></blockquote><h1 id="学习之路-·-Demo-02"><a href="#学习之路-·-Demo-02" class="headerlink" title="学习之路  ·  Demo-02"></a>学习之路・Demo-02</h1><p>因本人习惯，笔记在 WebStorm 上呈现</p><h1 id="源码·一"><a href="#源码·一" class="headerlink" title="源码·一"></a>源码・一</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">index.html</button></li><li class="tab"><button type="button" data-href="#uuid-2">Demo02.css</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo02<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"./css/Demo02.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"l"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">*, *<span class="selector-pseudo">:before</span>, *<span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-pseudo">:root</span> {</span><br><span class="line">    <span class="comment">/* minFontSize + (maxFontSize - minFontSize) * (100vw - minVWidth)/(maxVWidth - minVWidth) */</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="built_in">calc</span>(<span class="number">64px</span> + (<span class="number">80</span> - <span class="number">64</span>) * (<span class="number">100vw</span> - <span class="number">320px</span>)/(<span class="number">960</span> - <span class="number">320</span>));</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span>, <span class="selector-tag">input</span> {</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.5</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#bbb</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">input</span> {</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">1.5em</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">main</span> {</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">1.5em</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0.75em</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0.125em</span> <span class="number">0.125em</span> <span class="number">0</span> <span class="number">0.125em</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>) inset;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fdea7b</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0.15em</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">3em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.5em</span>;</span><br><span class="line">    <span class="attribute">transition</span>: background-color <span class="number">0.1s</span> <span class="number">0.3s</span> ease-out, box-shadow <span class="number">0.1s</span> <span class="number">0.3s</span> ease-out;</span><br><span class="line">    -webkit-appearance: none;</span><br><span class="line">    -moz-appearance: none;</span><br><span class="line">    appearance: none;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:before</span>, <span class="selector-class">.l</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#d7d7d7</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1.2em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1.2em</span>;</span><br><span class="line">    <span class="attribute">transition</span>: background-color <span class="number">0.1s</span> <span class="number">0.3s</span> ease-out, transform <span class="number">0.3s</span> ease-out;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">background</span>:</span><br><span class="line">            <span class="built_in">linear-gradient</span>(transparent <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.15</span>) <span class="number">0</span>) <span class="number">0</span> <span class="number">50%</span> / <span class="number">50%</span> <span class="number">100%</span>,</span><br><span class="line">            <span class="built_in">repeating-linear-gradient</span>(<span class="number">90deg</span>,<span class="number">#bbb</span> <span class="number">0</span>,<span class="number">#bbb</span>,<span class="number">#bbb</span> <span class="number">20%</span>,<span class="number">#999</span> <span class="number">20%</span>,<span class="number">#999</span> <span class="number">40%</span>) <span class="number">0</span> <span class="number">50%</span> / <span class="number">50%</span> <span class="number">100%</span>,</span><br><span class="line">            <span class="built_in">radial-gradient</span>(circle at <span class="number">50%</span> <span class="number">50%</span>,<span class="number">#888</span> <span class="number">25%</span>, transparent <span class="number">26%</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0.25em</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">0.4em</span> solid <span class="number">#d8d8d8</span>;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">0</span> solid transparent;</span><br><span class="line">    <span class="attribute">transition</span>: border-left-color <span class="number">0.1s</span> <span class="number">0.3s</span> ease-out, transform <span class="number">0.3s</span> ease-out;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">22.5%</span>);</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">25%</span> <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1.2em</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1em</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* Checked */</span></span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:checked</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.45</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0.125em</span> <span class="number">0.125em</span> <span class="number">0</span> <span class="number">0.125em</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>) inset;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: currentColor;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">125%</span>)</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">border-left-color</span>: currentColor;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">2.5%</span>) <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* Other States */</span></span><br><span class="line"><span class="selector-class">.l</span><span class="selector-pseudo">:focus</span> {</span><br><span class="line">    <span class="comment">/* Usually an anti-A11Y practice but set to remove an annoyance just for this demo */</span></span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="效果·一"><a href="#效果·一" class="headerlink" title="效果·一"></a>效果・一</h1><p><img src="https://i0.hdslb.com/bfs/album/0d879988354245add15bed934245f611a6bcde56.gif" alt="效果"></p><h1 id="源码·二"><a href="#源码·二" class="headerlink" title="源码·二"></a>源码・二</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">index.html</button></li><li class="tab"><button type="button" data-href="#uuid-2">Demo03.css</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo03<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/Demo03.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"switcher switcher-1"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"switcher-1"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"switcher-1"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"switcher switcher-2"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">id</span>=<span class="string">"switcher-2"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"switcher-2"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#CCCCCC</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> {</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">input</span> {</span><br><span class="line">    appearance: none;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">    <span class="attribute">outline</span>: none;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">"Oswald"</span>, sans-serif;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">input</span><span class="selector-pseudo">:before</span>, <span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">input</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">input</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"ON"</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">input</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"OFF"</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span> <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span> {</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.25s</span> -<span class="number">0.1s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">transition</span>: color <span class="number">0.5s</span> <span class="number">0.2s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#CCCCCC</span>;</span><br><span class="line">    <span class="attribute">transition</span>: color <span class="number">0.5s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">    <span class="attribute">transition</span>: left <span class="number">0.5s</span>, right <span class="number">0.4s</span> <span class="number">0.2s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>) {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">    <span class="attribute">transition</span>: background <span class="number">0.5s</span> -<span class="number">0.1s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>)<span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#CCCCCC</span>;</span><br><span class="line">    <span class="attribute">transition</span>: color <span class="number">0.5s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>)<span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">    <span class="attribute">transition</span>: color <span class="number">0.5s</span> <span class="number">0.2s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-1</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>) + <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">transition</span>: left <span class="number">0.4s</span> <span class="number">0.2s</span>, right <span class="number">0.5s</span>, background <span class="number">0.35s</span> -<span class="number">0.1s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> {</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span> {</span><br><span class="line">    <span class="attribute">transition</span>: background-color <span class="number">0s</span> <span class="number">0.5s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> {</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">animation</span>: turn-on <span class="number">0.5s</span> ease-out;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> turn-on {</span><br><span class="line">    <span class="number">0%</span> {</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0%</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>) {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">input</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:checked</span>) + <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#1E1E1E</span>;</span><br><span class="line">    <span class="attribute">animation</span>: turn-off <span class="number">0.5s</span> ease-out;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> turn-off {</span><br><span class="line">    <span class="number">0%</span> {</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">0%</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">span</span><span class="selector-class">.switcher</span><span class="selector-class">.switcher-2</span> <span class="selector-tag">label</span> {</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">56px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="效果·二"><a href="#效果·二" class="headerlink" title="效果·二"></a>效果・二</h1><p><img src="https://i0.hdslb.com/bfs/album/db4c6ece0e07d8d272c5d574190b50953943ef77.gif" alt="效果"></p><h1 id="源码·三"><a href="#源码·三" class="headerlink" title="源码·三"></a>源码・三</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">index.html</button></li><li class="tab"><button type="button" data-href="#uuid-2">Demo04.css</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo04<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/Demo04.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"toggle"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"toggle-state"</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"check"</span> <span class="attr">value</span>=<span class="string">"check"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"indicator"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'IBM Plex Sans Condensed'</span>, sans-serif;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ecf0f3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.label</span> {</span><br><span class="line">    <span class="attribute">display</span>: inline-flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#394a56</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.label-text</span> {</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">16px</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toggle</span> {</span><br><span class="line">    <span class="attribute">isolation</span>: isolate;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">box-shadow</span>:</span><br><span class="line">            -<span class="number">8px</span> -<span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> <span class="number">#ffffff</span>,</span><br><span class="line">            <span class="number">8px</span> <span class="number">4px</span> <span class="number">12px</span> <span class="number">0px</span> <span class="number">#d1d9e6</span>,</span><br><span class="line">            <span class="number">4px</span> <span class="number">4px</span> <span class="number">4px</span> <span class="number">0px</span> <span class="number">#d1d9e6</span> inset,</span><br><span class="line">            -<span class="number">4px</span> -<span class="number">4px</span> <span class="number">4px</span> <span class="number">0px</span> <span class="number">#ffffff</span> inset;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toggle-state</span> {</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.indicator</span> {</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#ecf0f3</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">75%</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attribute">transition</span>: transform <span class="number">0.4s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.85</span>, <span class="number">0.05</span>, <span class="number">0.18</span>, <span class="number">1.35</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>:</span><br><span class="line">            -<span class="number">8px</span> -<span class="number">4px</span> <span class="number">8px</span> <span class="number">0px</span> <span class="number">#ffffff</span>,</span><br><span class="line">            <span class="number">8px</span> <span class="number">4px</span> <span class="number">12px</span> <span class="number">0px</span> <span class="number">#d1d9e6</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toggle-state</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.indicator</span> {</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">25%</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="效果·三"><a href="#效果·三" class="headerlink" title="效果·三"></a>效果・三</h1><p><img src="https://i0.hdslb.com/bfs/album/30ce6c3e9061db67f5801abf23db694fd8c3fea6.gif" alt="效果"></p><h1 id="源码·四"><a href="#源码·四" class="headerlink" title="源码·四"></a>源码・四</h1><div class="tabs" id="uuid"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#uuid-1">index.html</button></li><li class="tab"><button type="button" data-href="#uuid-2">Demo05.css</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="uuid-1"><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo05<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/Demo05.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"egg-switch"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"flipper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">svg</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#flipper"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"egg"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"front"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"back"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">symbol</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 39 18"</span> <span class="attr">id</span>=<span class="string">"flipper"</span> <span class="attr">fill</span>=<span class="string">"currentColor"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M0.0244740693,1.75473835 C0.00818305726,1.86197078 0,1.97036486 0,2.07892575 L0,15.921377 C0,17.0693688 0.8954305,18 2,18 C2.10445462,18 2.20874874,17.9914953 2.31192515,17.9745638 L17.3119251,15.5130366 C18.2840292,15.3535125 19,14.4826852 19,13.4598497 L19,12.6377416 C19.6666667,11.5984301 20.3333333,11.0787744 21,11.0787744 L39,11.0787744 L39,6.92152835 L21,6.92152835 C20.3333333,6.92152835 19.6666667,6.4018726 19,5.36256109 L19,4.540453 C19,3.51761755 18.2840292,2.64679022 17.3119251,2.48726617 L2.31192515,0.0257389154 C1.2208723,-0.153304839 0.196745571,0.620794577 0.0244740693,1.75473835 Z M12.2049236,12.279252 C12.6185695,12.2575737 12.9714694,12.5753263 12.9931477,12.9889722 C13.0130194,13.3681476 12.747675,13.6962795 12.3847003,13.7650328 L12.2834275,13.7771963 L3.79507644,14.2220519 C3.38143055,14.2437302 3.02853059,13.9259776 3.00685233,13.5123317 C2.98698059,13.1331563 3.25232501,12.8050244 3.61529975,12.7362711 L3.71657251,12.7241076 L12.2049236,12.279252 Z M16.75,5 C16.8683467,5 16.9674868,5.08223341 16.9933973,5.19267729 L17,5.25 L17,12.75 C17,12.8880712 16.8880712,13 16.75,13 C16.6316533,13 16.5325132,12.9177666 16.5066027,12.8073227 L16.5,12.75 L16.5,5.25 C16.5,5.11192881 16.6119288,5 16.75,5 Z M13.7339356,9.6630893 C14.1480861,9.65586028 14.4896817,9.9857353 14.4971398,10.3998858 C14.5035373,10.7795237 14.2269029,11.0981954 13.8617498,11.1542391 L13.7601142,11.1628608 L3.26171343,11.3461111 C2.84756295,11.3533401 2.50596738,11.0234651 2.49850922,10.6093146 C2.49211175,10.2296767 2.76874618,9.91100505 3.13389925,9.85496129 L3.23553482,9.84633957 L13.7339356,9.6630893 Z M3.26171343,6.6630893 L13.7601142,6.84633957 C14.1742647,6.8535686 14.5041397,7.19516417 14.4971402,7.60931465 C14.4902841,7.98895258 14.2026967,8.29777572 13.8358102,8.34104168 L13.7339356,8.34611112 L3.23553482,8.16286085 C2.82138434,8.15563182 2.49150933,7.81403625 2.49850889,7.39988577 C2.50536496,7.02024784 2.79295235,6.7114247 3.15983888,6.66815874 L3.26171343,6.6630893 Z M3.79507644,3.77925197 L12.2834275,4.2241076 C12.6970734,4.24578586 13.0148259,4.59868582 12.9931477,5.01233171 C12.9732759,5.39150712 12.675086,5.69010548 12.306913,5.72054092 L12.2049236,5.7220519 L3.71657251,5.27719627 C3.30292661,5.25551801 2.98517406,4.90261805 3.00685233,4.48897215 C3.02672407,4.10979675 3.32491404,3.81119839 3.69308704,3.78076294 L3.79507644,3.77925197 Z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">symbol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- twitter / dribbble --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"dribbble"</span> <span class="attr">href</span>=<span class="string">"https://dribbble.com/shots/9934807-Egg-Switch"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://dribbble.com/assets/logo-small-2x-9fe74d2ad7b25fba0f50168523c15fda4c35534f9ea0b1011179275383035439.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"twitter"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"https://twitter.com/aaroniker_me"</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">width</span>=<span class="string">"72"</span> <span class="attr">height</span>=<span class="string">"72"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 72 72"</span>&gt;</span><span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M67.812 16.141a26.246 26.246 0 0 1-7.519 2.06 13.134 13.134 0 0 0 5.756-7.244 26.127 26.127 0 0 1-8.313 3.176A13.075 13.075 0 0 0 48.182 10c-7.229 0-13.092 5.861-13.092 13.093 0 1.026.118 2.021.338 2.981-10.885-.548-20.528-5.757-26.987-13.679a13.048 13.048 0 0 0-1.771 6.581c0 4.542 2.312 8.551 5.824 10.898a13.048 13.048 0 0 1-5.93-1.638c-.002.055-.002.11-.002.162 0 6.345 4.513 11.638 10.504 12.84a13.177 13.177 0 0 1-3.449.457c-.846 0-1.667-.078-2.465-.231 1.667 5.2 6.499 8.986 12.23 9.09a26.276 26.276 0 0 1-16.26 5.606A26.21 26.21 0 0 1 4 55.976a37.036 37.036 0 0 0 20.067 5.882c24.083 0 37.251-19.949 37.251-37.249 0-.566-.014-1.134-.039-1.694a26.597 26.597 0 0 0 6.533-6.774z"</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="uuid-2"><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.egg-switch</span> {</span><br><span class="line">    <span class="attr">--background</span>: <span class="number">#171827</span>;</span><br><span class="line">    <span class="attr">--shadow</span>: <span class="built_in">rgba</span>(<span class="number">246</span>, <span class="number">248</span>, <span class="number">255</span>, .<span class="number">08</span>);</span><br><span class="line">    <span class="attr">--shadow-inner</span>: <span class="built_in">rgba</span>(<span class="number">13</span>, <span class="number">15</span>, <span class="number">24</span>, .<span class="number">8</span>);</span><br><span class="line">    <span class="attr">--egg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--egg-back</span>: <span class="number">#f4d2ad</span>;</span><br><span class="line">    <span class="attr">--egg-yellow</span>: <span class="built_in">linear-gradient</span>(<span class="number">135deg</span>, <span class="built_in">rgba</span>(<span class="number">239</span>,<span class="number">202</span>,<span class="number">51</span>, <span class="number">1</span>) <span class="number">50%</span>, <span class="built_in">rgba</span>(<span class="number">237</span>,<span class="number">139</span>,<span class="number">2</span>, <span class="number">1</span>) <span class="number">100%</span>);</span><br><span class="line">    <span class="attr">--egg-shadow</span>: <span class="built_in">rgba</span>(<span class="number">13</span>, <span class="number">15</span>, <span class="number">24</span>, .<span class="number">25</span>);</span><br><span class="line">    <span class="attr">--flipper</span>: <span class="number">#F6F8FF</span>;</span><br><span class="line">    <span class="attr">--flipper-hand</span>: <span class="number">#8A91B4</span>;</span><br><span class="line">    <span class="attr">--flipper-shadow</span>: <span class="number">#646B8C</span>;</span><br><span class="line">    <span class="attribute">perspective</span>: <span class="number">160px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    -webkit-tap-highlight-<span class="attribute">color</span>: transparent;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> {</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> {</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">64px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--background);</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">3px</span> <span class="number">0</span> <span class="built_in">var</span>(--shadow-inner), <span class="number">0</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">var</span>(--shadow);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">animation</span>: egg <span class="number">2s</span> linear forwards;</span><br><span class="line">    <span class="attribute">transform-style</span>: preserve-<span class="number">3</span>d;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="built_in">var</span>(--border-radius, <span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="built_in">var</span>(--width, <span class="built_in">var</span>(--size, <span class="number">24px</span>));</span><br><span class="line">    <span class="attribute">height</span>: <span class="built_in">var</span>(--height, <span class="built_in">var</span>(--size, <span class="number">24px</span>));</span><br><span class="line">    <span class="attribute">left</span>: <span class="built_in">var</span>(--left, <span class="built_in">var</span>(--spacing, <span class="number">0</span>));</span><br><span class="line">    <span class="attribute">top</span>: <span class="built_in">var</span>(--top, <span class="built_in">var</span>(--spacing, <span class="number">0</span>));</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--background, <span class="built_in">var</span>(--egg));</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span> {</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>);</span><br><span class="line">    <span class="attribute">backface-visibility</span>: hidden;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attr">--background</span>: <span class="built_in">var</span>(--egg);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attr">--size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attr">--spacing</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attr">--background</span>: <span class="built_in">var</span>(--egg-yellow);</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">1px</span> <span class="number">3px</span> <span class="built_in">var</span>(--egg-shadow);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span> {</span><br><span class="line">    <span class="attr">--background</span>: none;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:before</span>, <span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attr">--height</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attr">--background</span>: <span class="built_in">var</span>(--egg-back);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attr">--border-radius</span>: <span class="number">12px</span> <span class="number">12px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">0</span>, <span class="number">100%</span> <span class="number">90%</span>, <span class="number">75%</span> <span class="number">100%</span>, <span class="number">50%</span> <span class="number">90%</span>, <span class="number">25%</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">80%</span>);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attr">--border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">12px</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attr">--top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">clip-path</span>: <span class="built_in">polygon</span>(<span class="number">0</span> <span class="number">0</span>, <span class="number">25%</span> <span class="number">20%</span>, <span class="number">50%</span> <span class="number">10%</span>, <span class="number">75%</span> <span class="number">20%</span>, <span class="number">100%</span> <span class="number">10%</span>, <span class="number">100%</span> <span class="number">100%</span>, <span class="number">0</span> <span class="number">100%</span>);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.flipper</span> {</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">7px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">20px</span> <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">60px</span>) <span class="built_in">translateY</span>(-<span class="number">32px</span>) <span class="built_in">rotate</span>(-<span class="number">30deg</span>) <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">    <span class="attribute">animation</span>: flipper <span class="number">2s</span> linear;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.flipper</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">2px</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--flipper-hand);</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">0</span> <span class="built_in">var</span>(--flipper-shadow);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span> + <span class="selector-tag">div</span> <span class="selector-class">.flipper</span> svg {</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">39px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--flipper);</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.flipper</span> {</span><br><span class="line">    <span class="attribute">animation</span>: none;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> {</span><br><span class="line">    <span class="attribute">animation</span>: crack <span class="number">2s</span> linear forwards;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.front</span><span class="selector-pseudo">:before</span> {</span><br><span class="line">    <span class="attribute">animation</span>: egg-white <span class="number">0.8s</span> linear forwards <span class="number">1.4s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:before</span>, <span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attr">--animate-y</span>: -<span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(-<span class="number">2px</span>);</span><br><span class="line">    <span class="attribute">animation</span>: egg-crack <span class="number">0.8s</span> linear forwards <span class="number">1.4s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-class">.egg-switch</span> <span class="selector-tag">input</span><span class="selector-pseudo">:checked</span> + <span class="selector-tag">div</span> <span class="selector-class">.egg</span> <span class="selector-class">.back</span><span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attr">--animate-y</span>: <span class="number">16px</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> egg {</span><br><span class="line">    <span class="number">0%</span>, <span class="number">40%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">translateX</span>(-<span class="number">32px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">50%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">translateX</span>(-<span class="number">33px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">75%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">32px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">90%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(<span class="number">0.9</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(<span class="number">0.8</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> egg-white {</span><br><span class="line">    <span class="number">0%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0.4</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.4</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">60%</span>, <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> egg-crack {</span><br><span class="line">    <span class="number">0%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(-<span class="number">2px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">70%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(-<span class="number">2px</span>) <span class="built_in">scale</span>(<span class="number">0.8</span>) <span class="built_in">rotate</span>(<span class="number">4deg</span>) <span class="built_in">translateY</span>(<span class="built_in">var</span>(--animate-y));</span><br><span class="line">    }</span><br><span class="line">    <span class="number">80%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(-<span class="number">2px</span>) <span class="built_in">scale</span>(<span class="number">0.8</span>) <span class="built_in">rotate</span>(<span class="number">8deg</span>) <span class="built_in">translateY</span>(<span class="built_in">calc</span>(<span class="built_in">var</span>(--animate-y) * <span class="number">1.5</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> crack {</span><br><span class="line">    <span class="number">0%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">scaleX</span>(<span class="number">0.8</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">30%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">rotateZ</span>(-<span class="number">16deg</span>) <span class="built_in">translateX</span>(-<span class="number">8px</span>) <span class="built_in">translateY</span>(<span class="number">12px</span>) <span class="built_in">translateZ</span>(-<span class="number">24px</span>) <span class="built_in">scaleX</span>(<span class="number">0.8</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">40%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">rotateZ</span>(-<span class="number">16deg</span>) <span class="built_in">translateX</span>(-<span class="number">8px</span>) <span class="built_in">translateY</span>(<span class="number">12px</span>) <span class="built_in">scaleX</span>(<span class="number">0.8</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">60%</span>, <span class="number">80%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">translateX</span>(-<span class="number">32px</span>) <span class="built_in">scaleX</span>(<span class="number">0.8</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">180deg</span>) <span class="built_in">translateX</span>(-<span class="number">32px</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">@keyframes</span> flipper {</span><br><span class="line">    <span class="number">30%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">4px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">40%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">16px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">50%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">24px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">60%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">32px</span>) <span class="built_in">rotateY</span>(<span class="number">50deg</span>) <span class="built_in">translateZ</span>(<span class="number">16px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">70%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">14px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">85%</span>, <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">60px</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="number">15%</span>, <span class="number">80%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="number">95%</span>, <span class="number">100%</span> {</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">html</span> {</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">* {</span><br><span class="line">    <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">}</span><br><span class="line">*<span class="selector-pseudo">:before</span>, *<span class="selector-pseudo">:after</span> {</span><br><span class="line">    <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#2B3044</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-class">.dribbble</span> {</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">20px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-class">.dribbble</span> <span class="selector-tag">img</span> {</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">76px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-class">.twitter</span> {</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">112px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">14px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-class">.twitter</span> svg {</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    fill: white;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h1 id="效果·四"><a href="#效果·四" class="headerlink" title="效果·四"></a>效果・四</h1><p><img src="https://i0.hdslb.com/bfs/album/d932b242d5235bd18cd4005c85ea2fc5f1164900.gif" alt="效果"></p><h1 id="学习心得"><a href="#学习心得" class="headerlink" title="学习心得"></a>学习心得</h1><ul><li>代码规范所带来的心灵上的享受</li><li>逐步变成 “CV 攻城狮”</li><li> 更加了解代码编写逻辑</li></ul>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;记录前端学习</summary>
    
    
    
    
    <category term="前端" scheme="https://kangblogs.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
</feed>
